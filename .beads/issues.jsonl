{"id":"crumbs-1gq","title":"Configuration System","description":"Implement the configuration system with Attach/Detach lifecycle:\n- Config struct with Backend, DataDir, and backend-specific configs\n- Cupboard.Attach(config) to initialize storage backend\n- Cupboard.Detach() to release resources\n- Use case demonstrating configuration workflow\n- CLI config file support\n\nThis epic covers the cupboard lifecycle management.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:42.837245-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:49:49.739496-05:00","closed_at":"2026-02-04T21:49:49.739496-05:00","close_reason":"Closed"}
{"id":"crumbs-1gq.1","title":"Create uc003-configuration.md use case","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated with Attach/Detach)\n- docs/use-cases/uc001-crud-operations.md (example use case)\n- .claude/rules/use-case-format.md (use case format rule)\n\n## Files to Create/Modify\n- docs/use-cases/uc003-configuration.md (create)\n\n## Requirements\nCreate use case demonstrating configuration and cupboard lifecycle:\n1. Summary: How applications initialize and configure storage backend\n2. Actor: Developer or application using Crumbs library\n3. Flow: Create Config → Attach to backend → Verify connection → Use tables → Detach\n4. Architecture touchpoints: Cupboard interface, Config struct, Attach/Detach methods\n5. Success criteria: Observable configuration loading and backend initialization\n6. Out of scope: Backend-specific features, multi-backend switching\n\n## Design Decisions\n- Use case demonstrates SQLite backend configuration\n- Show typed Config struct usage\n- Demonstrate error handling for invalid config\n\n## Acceptance Criteria\n- [ ] Summary states configuration workflow clearly\n- [ ] Actor and trigger defined\n- [ ] Flow shows end-to-end configuration (Config → Attach → Use → Detach)\n- [ ] Architecture touchpoints list Cupboard, Config, backends\n- [ ] Success/demo criteria are checkable\n- [ ] File follows use-case-format rule with numeric prefix uc003","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:18.646693-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:06:38.174518-05:00","closed_at":"2026-02-04T21:06:38.174518-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.1","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:18.649124-05:00","created_by":"petardjukic"}],"comments":[{"id":27,"issue_id":"crumbs-1gq.1","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T02:06:37Z"}]}
{"id":"crumbs-1gq.2","title":"Implement Config struct in pkg/types","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Config struct spec)\n- docs/ARCHITECTURE.md (system overview)\n\n## Files to Create/Modify\n- pkg/types/config.go (create)\n\n## Requirements\nImplement Config struct per prd-cupboard-core:\n1. Backend field (string): \"sqlite\", \"dolt\", \"dynamodb\"\n2. DataDir field (string): directory for local backends\n3. DoltConfig field (*DoltConfig): Dolt-specific settings\n4. DynamoDBConfig field (*DynamoDBConfig): DynamoDB-specific settings\n5. Backend-specific config structs (DoltConfig, DynamoDBConfig)\n6. Validation method: Validate() error\n\n## Design Decisions\n- Config is a plain struct (no methods except Validate)\n- Backend-specific configs use pointer types (nil = not configured)\n- Validation checks: Backend not empty, required configs not nil\n\n## Acceptance Criteria\n- [ ] Config struct defined with all fields\n- [ ] DoltConfig struct defined (DSN, Branch)\n- [ ] DynamoDBConfig struct defined (TableName, Region, Endpoint)\n- [ ] Validate() method checks Backend and required configs\n- [ ] File saved at pkg/types/config.go\n- [ ] Go code compiles","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:25.975145-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:50:09.822675-05:00","closed_at":"2026-02-04T20:50:09.822675-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.2","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:25.976722-05:00","created_by":"petardjukic"}],"comments":[{"id":21,"issue_id":"crumbs-1gq.2","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T01:50:09Z"}]}
{"id":"crumbs-1gq.3","title":"Implement Cupboard interface with Attach/Detach","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Cupboard interface spec)\n- pkg/types/config.go (Config struct)\n\n## Files to Create/Modify\n- pkg/types/cupboard.go (create)\n\n## Requirements\nImplement Cupboard interface per prd-cupboard-core:\n1. GetTable(name string) (Table, error) - returns table by name\n2. Attach(config Config) error - initialize backend\n3. Detach() error - release resources\n4. Define standard table names as constants: CrumbsTable, TrailsTable, PropertiesTable, etc.\n5. Define ErrCupboardClosed sentinel error\n6. Define ErrInvalidTableName sentinel error\n\n## Design Decisions\n- Cupboard is an interface (implementations in backend packages)\n- Standard table names are package-level constants\n- Attach validates config before initializing backend\n- Detach is idempotent (safe to call multiple times)\n\n## Acceptance Criteria\n- [ ] Cupboard interface defined with GetTable, Attach, Detach\n- [ ] Table name constants defined (CrumbsTable = \"crumbs\", etc.)\n- [ ] Sentinel errors defined (ErrCupboardClosed, ErrInvalidTableName)\n- [ ] File saved at pkg/types/cupboard.go\n- [ ] Go code compiles","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:31.849873-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:51:29.873868-05:00","closed_at":"2026-02-04T20:51:29.873868-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.3","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:31.851987-05:00","created_by":"petardjukic"}],"comments":[{"id":22,"issue_id":"crumbs-1gq.3","author":"petardjukic","text":"tokens: 8000","created_at":"2026-02-05T01:51:29Z"}]}
{"id":"crumbs-1gq.4","title":"Implement Table interface","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Table interface spec)\n\n## Files to Create/Modify\n- pkg/types/table.go (create)\n\n## Requirements\nImplement Table interface per prd-cupboard-core:\n1. Get(id string) (any, error) - retrieve entity by ID\n2. Set(id string, data any) (string, error) - create or update entity, return actual ID\n3. Delete(id string) error - delete entity\n4. Fetch(filter map[string]any) ([]any, error) - query multiple entities\n5. Define sentinel errors: ErrNotFound, ErrInvalidID, ErrInvalidData\n\n## Design Decisions\n- Table interface is uniform across all entity types\n- Get returns any (caller type-asserts to Crumb, Trail, etc.)\n- Set with empty/nil id creates new with auto-generated ID\n- Set returns actual ID (useful for creates)\n- Fetch accepts filter map for flexible queries\n\n## Acceptance Criteria\n- [ ] Table interface defined with Get, Set, Delete, Fetch\n- [ ] Sentinel errors defined\n- [ ] File saved at pkg/types/table.go\n- [ ] Go code compiles","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:37.16327-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:51:30.382662-05:00","closed_at":"2026-02-04T20:51:30.382662-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.4","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:37.165166-05:00","created_by":"petardjukic"}],"comments":[{"id":23,"issue_id":"crumbs-1gq.4","author":"petardjukic","text":"tokens: 5000","created_at":"2026-02-05T01:51:30Z"}]}
{"id":"crumbs-1gq.5","title":"Add config file support in CLI","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Config struct)\n- pkg/types/config.go (Config implementation)\n- pkg/types/cupboard.go (Cupboard interface)\n\n## Files to Create/Modify\n- cmd/crumbs/main.go (create)\n- cmd/crumbs/config.go (create)\n- .crumbs.yaml (create example config file in repo root)\n\n## Requirements\nImplement CLI config file support:\n1. Load config from .crumbs.yaml or ~/.crumbs/config.yaml\n2. Parse YAML into Config struct\n3. Support --config flag to specify custom config file location\n4. Initialize Cupboard via Attach in CLI startup\n5. Call Detach on CLI shutdown\n\n## Design Decisions\n- Use viper for config file parsing\n- Search order: --config flag, ./.crumbs.yaml, ~/.crumbs/config.yaml\n- Example config includes SQLite backend setup\n- CLI opens cupboard once at startup, closes on exit\n\n## Acceptance Criteria\n- [ ] Config file loading implemented\n- [ ] --config flag supported\n- [ ] Example .crumbs.yaml created with SQLite config\n- [ ] Cupboard initialized via Attach at CLI startup\n- [ ] Cupboard closed via Detach at CLI exit\n- [ ] CLI compiles and runs","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:43.451018-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:45:04.879769-05:00","closed_at":"2026-02-04T21:45:04.879769-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.5","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:43.454489-05:00","created_by":"petardjukic"}],"comments":[{"id":33,"issue_id":"crumbs-1gq.5","author":"petardjukic","text":"tokens: ~35000","created_at":"2026-02-05T02:45:04Z"}]}
{"id":"crumbs-5wm","title":"CRUD Use Case and Property Enforcement","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:37:50.317729-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:55:45.777368-05:00","closed_at":"2026-02-04T11:55:45.777368-05:00","close_reason":"Closed"}
{"id":"crumbs-5wm.1","title":"PRD Update: Property Default Values","description":"## Required Reading\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-crumbs-interface.md\n\n## Files to Create/Modify\n- docs/product-requirements/prd-properties-interface.md (modify)\n\n## Requirements\nAdd type-based default values for properties:\n- When a property is defined, specify what the default value is for each type\n- categorical: null (or first category if categories exist)\n- text: \"\" (empty string)\n- integer: 0\n- boolean: false\n- timestamp: null\n- list: [] (empty list)\n\nAdd requirement that when a new property is defined, all existing crumbs receive that property with its default value.\n\n## Acceptance Criteria\n- [ ] Default values documented for each value type\n- [ ] R4 (Define) updated to specify backfill of existing crumbs\n- [ ] File saved","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:37:58.298176-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:46:16.700263-05:00","closed_at":"2026-02-04T11:46:16.700263-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.1","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:37:58.299689-05:00","created_by":"petardjukic"}],"comments":[{"id":8,"issue_id":"crumbs-5wm.1","author":"petardjukic","text":"tokens: 25000","created_at":"2026-02-04T16:46:16Z"}]}
{"id":"crumbs-5wm.2","title":"PRD Update: Crumb Property Auto-Initialization","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-properties-interface.md (after update)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-crumbs-interface.md (modify)\n\n## Requirements\nUpdate R3 (Add operation) to specify that when a crumb is created:\n- All defined properties are automatically initialized with their type-based default values\n- The crumb has a value for every property (no property is ever \"not set\" for a crumb)\n\nUpdate R11 (GetProperties) to reflect that it always returns all properties (never empty unless no properties are defined).\n\n## Acceptance Criteria\n- [ ] R3 updated to specify property auto-initialization on Add\n- [ ] R11 updated to reflect complete property coverage\n- [ ] File saved","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:38:04.962015-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:54:26.475047-05:00","closed_at":"2026-02-04T11:54:26.475047-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.2","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:38:04.964199-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.2","depends_on_id":"crumbs-5wm.1","type":"blocks","created_at":"2026-02-04T11:38:20.448159-05:00","created_by":"petardjukic"}],"comments":[{"id":9,"issue_id":"crumbs-5wm.2","author":"petardjukic","text":"tokens: 8000","created_at":"2026-02-04T16:54:26Z"}]}
{"id":"crumbs-5wm.3","title":"Use Case: CRUD Operations Demo","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-sqlite-backend.md\n- .claude/rules/use-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/uc-crud-operations.md (create)\n\n## Summary\nEnd-to-end use case demonstrating:\n1. Create SQLite database (OpenCupboard)\n2. Add crumbs with various states\n3. Change crumb states\n4. Archive crumbs\n5. Create new properties\n6. Add/Change/Delete property values\n7. Verify property enforcement (all crumbs have all properties)\n8. Delete database (Close + remove DataDir)\n\n## Format\nFollow use-case-format rule:\n- Summary\n- Actor and trigger\n- Flow (numbered steps)\n- Architecture touchpoints\n- Success/demo criteria\n- Out of scope\n\n## Acceptance Criteria\n- [ ] All required sections present per use-case-format\n- [ ] Flow covers all CRUD operations\n- [ ] Architecture touchpoints list interfaces used\n- [ ] Demo criteria are observable and checkable\n- [ ] File saved at docs/use-cases/uc-crud-operations.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:38:33.071323-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:55:29.96549-05:00","closed_at":"2026-02-04T11:55:29.96549-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:38:33.072994-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm.1","type":"blocks","created_at":"2026-02-04T11:38:37.002282-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm.2","type":"blocks","created_at":"2026-02-04T11:38:37.166628-05:00","created_by":"petardjukic"}],"comments":[{"id":10,"issue_id":"crumbs-5wm.3","author":"petardjukic","text":"tokens: 5000","created_at":"2026-02-04T16:55:29Z"}]}
{"id":"crumbs-ag8","title":"Technical Debt","description":"Address technical debt and improve development infrastructure.\n\nIssues:\n1. Convert bash validation script to Go integration tests\n2. Add Makefile for common operations\n3. Add golangci-lint configuration","status":"open","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T22:16:31.544349-05:00","created_by":"petardjukic","updated_at":"2026-02-04T22:17:12.008593-05:00"}
{"id":"crumbs-ag8.1","title":"Convert validation script to Go integration tests","description":"## Type\nCode\n\n## Required Reading\n- scripts/validate-self-hosting.sh (current implementation)\n- docs/use-cases/uc002-self-hosting.md (test scenarios)\n- cmd/cupboard/ (CLI structure)\n\n## Files to Create/Modify\n- tests/integration/cli_test.go (create) - Integration tests using exec.Command\n- tests/integration/testutil.go (create) - Test helpers (temp dir, config, exec wrapper)\n- scripts/validate-self-hosting.sh (delete after migration)\n\n## Requirements\n1. Create test harness that builds cupboard binary once via TestMain\n2. Each test uses isolated temp directory with config file\n3. Execute CLI via exec.Command, capture stdout/stderr\n4. Parse JSON output and assert with standard Go testing\n5. Cover all 11 tests from current script:\n   - Cupboard initialization\n   - Crumb CRUD and state transitions\n   - Query with filters\n   - Trail creation, completion, abandonment\n   - Link crumbs to trails\n   - Crumb archival\n   - JSON persistence verification\n   - Full workflow summary\n\n## Design Decisions\n- Use testing.T subtests for organization\n- Helper function runCupboard(t, args...) returns stdout, stderr, exit code\n- Temp directory per test with t.TempDir()\n- Parse JSON with encoding/json into typed structs\n\n## Acceptance Criteria\n- [ ] go test ./tests/integration/... runs all CLI tests\n- [ ] Tests pass on clean checkout\n- [ ] Tests isolated (no shared state between tests)\n- [ ] Coverage matches current bash script (11 test scenarios)\n- [ ] Can run with -v for verbose output","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T22:16:48.284254-05:00","created_by":"petardjukic","updated_at":"2026-02-04T22:16:51.698906-05:00","dependencies":[{"issue_id":"crumbs-ag8.1","depends_on_id":"crumbs-ag8","type":"parent-child","created_at":"2026-02-04T22:16:48.285203-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-ag8.2","title":"Add Makefile","description":"## Type\nCode\n\n## Required Reading\n- cmd/cupboard/ (build target)\n- tests/integration/ (test target, after issue 1)\n- scripts/ (existing scripts)\n\n## Files to Create/Modify\n- Makefile (create)\n\n## Requirements\n1. build target: compile cupboard binary to bin/\n2. test target: run all tests (unit + integration)\n3. test-unit target: run only unit tests\n4. test-integration target: run only integration tests\n5. lint target: run golangci-lint\n6. clean target: remove build artifacts\n7. install target: install to GOPATH/bin\n8. help target: show available targets\n\n## Design Decisions\n- Use standard Make conventions\n- Binary output to bin/ directory\n- Support VERBOSE=1 for detailed output\n\n## Acceptance Criteria\n- [ ] make build creates bin/cupboard\n- [ ] make test runs all tests\n- [ ] make lint runs linter\n- [ ] make clean removes bin/\n- [ ] make help shows targets","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T22:16:55.947132-05:00","created_by":"petardjukic","updated_at":"2026-02-04T22:16:59.807063-05:00","dependencies":[{"issue_id":"crumbs-ag8.2","depends_on_id":"crumbs-ag8","type":"parent-child","created_at":"2026-02-04T22:16:55.948163-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-ag8.3","title":"Add golangci-lint configuration","description":"## Type\nCode\n\n## Required Reading\n- pkg/types/*.go (code style reference)\n- internal/sqlite/*.go (code style reference)\n- cmd/cupboard/*.go (code style reference)\n\n## Files to Create/Modify\n- .golangci.yml (create) - Linter configuration\n\n## Requirements\n1. Enable useful linters: errcheck, govet, staticcheck, unused, gosimple\n2. Enable style linters: gofmt, goimports, misspell\n3. Configure reasonable timeouts\n4. Exclude generated files if any\n5. Set appropriate line length (120 chars)\n\n## Design Decisions\n- Start with sensible defaults, not overly strict\n- Can tighten rules over time\n- Match existing code style\n\n## Acceptance Criteria\n- [ ] golangci-lint run passes on current codebase\n- [ ] Config file documents enabled linters\n- [ ] No false positives on existing code","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T22:17:04.386673-05:00","created_by":"petardjukic","updated_at":"2026-02-04T22:17:07.697649-05:00","dependencies":[{"issue_id":"crumbs-ag8.3","depends_on_id":"crumbs-ag8","type":"parent-child","created_at":"2026-02-04T22:17:04.387583-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-gfu","title":"Interface Definition PRDs","description":"Define Cupboard interface PRDs using table accessor pattern. Each PRD specifies one table interface from prd-cupboard-core.\n\n## Scope (revised)\n\nSix PRDs total:\n1. prd-cupboard-core - Cupboard lifecycle, config, table accessors (DONE)\n2. prd-sqlite-backend - SQLite backend, JSON sync, graph model, LinkTable (DONE)\n3. prd-crumbs-interface - CrumbTable: Drop, Get, Delete, Fetch, property ops\n4. prd-trails-interface - TrailTable: Start, Get, GetCrumbs, Complete, Abandon\n5. prd-properties-interface - PropertyTable: Define, Get, List, DefineCategory\n6. prd-metadata-interface - MetadataTable: Register, Add, Get, Search\n\n## Design Decisions\n\n- Table accessor pattern: cupboard.Crumbs(), cupboard.Trails(), etc.\n- Graph model: links table for belongs_to (crumb→trail) and child_of (crumb→crumb)\n- Property values on CrumbTable (not separate interface)\n- FetchCrumbs on CrumbTable (not separate query interface)\n- LinkTable defined in prd-sqlite-backend (graph model)\n\n## Removed from original scope\n\n- prd-crumb-properties-interface (merged into CrumbTable)\n- prd-query-interface (FetchCrumbs merged into CrumbTable)\n\n## Acceptance Criteria\n\n- [ ] All six PRDs created in docs/product-requirements/\n- [ ] Each PRD follows prd-format\n- [ ] Each PRD defines Go interface matching prd-cupboard-core\n- [ ] PRDs traceable to prd-task-storage requirements","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-03T21:04:45.137607-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:22:30.764254-05:00","closed_at":"2026-02-04T11:22:30.764254-05:00","close_reason":"Closed","comments":[{"id":7,"issue_id":"crumbs-gfu","author":"petardjukic","text":"All 6 interface PRDs complete","created_at":"2026-02-04T16:22:30Z"}]}
{"id":"crumbs-gfu.1","title":"PRD: Cupboard Core Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-cupboard-core.md\n\n## Required Sections (per prd-format)\n1. Problem - Why we need a cupboard lifecycle interface\n2. Goals - Define the core cupboard contract\n3. Requirements - Go interface definition, Config struct, OpenCupboard, CloseCupboard, backend selection, error conditions\n4. Non-Goals - Implementation details, specific backend behavior\n5. Acceptance Criteria - Interface defined, config schema, error handling\n\n## Scope\n- Config struct with backend selection, backend-specific parameters\n- OpenCupboard(config) returns Cupboard instance\n- CloseCupboard() releases resources, idempotent\n- Error handling for operations after close\n- Backend interface that all backends must implement\n\n## Design Decisions\n- Config uses functional options or struct with backend-specific embedded configs\n- Cupboard interface is the main contract; backends implement it\n- Reference prd-task-storage R8, R9\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-cupboard-core.md\n- [ ] Defines Config struct with all fields\n- [ ] Defines Cupboard interface with OpenCupboard, CloseCupboard\n- [ ] Defines Backend interface\n- [ ] Documents error conditions\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:00.164888-05:00","created_by":"petardjukic","updated_at":"2026-02-03T21:07:49.837711-05:00","closed_at":"2026-02-03T21:07:49.837711-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.1","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:00.167338-05:00","created_by":"petardjukic"}],"comments":[{"id":1,"issue_id":"crumbs-gfu.1","author":"petardjukic","text":"tokens: 45000, loc: 162+0","created_at":"2026-02-04T02:07:44Z"}]}
{"id":"crumbs-gfu.2","title":"PRD: Crumbs Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-crumbs-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Core entity storage for work items\n2. Goals - Define CrumbTable interface\n3. Requirements - Crumb struct, Drop, Get, Delete, Fetch, property operations\n4. Non-Goals - Trail operations, property definitions (separate interfaces)\n5. Acceptance Criteria - Interface defined, struct documented\n\n## Scope (updated for table accessor pattern)\n- Crumb struct: crumb_id, name, state, created_at, updated_at (no trail_id - uses links)\n- CrumbTable interface from prd-cupboard-core:\n  - Drop(name) - create crumb with UUID v7\n  - Get(id) - retrieve by ID\n  - Delete(id) - remove crumb and associated data\n  - Fetch(filter) - query crumbs by properties\n  - SetProperty, GetProperty, GetProperties, ClearProperty - property values\n- State values: pending, ready, running, completed, failed\n- Filter struct for Fetch operation\n\n## Design Decisions\n- Trail membership via links table (belongs_to), not crumb field\n- Property operations on CrumbTable (not separate interface)\n- Fetch replaces separate query interface\n- Reference prd-cupboard-core R2.3\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-crumbs-interface.md\n- [ ] Defines Crumb struct (no trail_id field)\n- [ ] Defines CrumbTable interface matching prd-cupboard-core\n- [ ] Defines Filter struct for Fetch\n- [ ] Documents state values\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:07.136442-05:00","created_by":"petardjukic","updated_at":"2026-02-04T10:36:56.204119-05:00","closed_at":"2026-02-04T10:36:56.204119-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.2","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:07.14021-05:00","created_by":"petardjukic"}],"comments":[{"id":3,"issue_id":"crumbs-gfu.2","author":"petardjukic","text":"tokens: 18000","created_at":"2026-02-04T15:36:55Z"}]}
{"id":"crumbs-gfu.3","title":"PRD: Trails Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-trails-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Support exploratory work sessions with backtracking\n2. Goals - Define TrailTable interface\n3. Requirements - Trail struct, Start, Get, GetCrumbs, Complete, Abandon\n4. Non-Goals - Crumb CRUD (separate interface), link operations (prd-sqlite-backend)\n5. Acceptance Criteria - Interface defined, lifecycle documented\n\n## Scope (updated for table accessor pattern)\n- Trail struct: trail_id, parent_crumb_id, state, created_at, completed_at\n- TrailTable interface from prd-cupboard-core:\n  - Start(parentCrumbID?) - create trail, optionally deviate from crumb\n  - Get(id) - retrieve trail\n  - GetCrumbs(id) - list crumbs on trail (via belongs_to links)\n  - Complete(id) - mark completed, remove belongs_to links (crumbs become permanent)\n  - Abandon(id) - mark abandoned, delete crumbs and their links\n- Trail states: active, completed, abandoned\n\n## Design Decisions\n- Crumb membership via links table (belongs_to), queried by GetCrumbs\n- Complete removes belongs_to links (crumbs no longer belong to any trail)\n- Abandon deletes crumbs and all their links\n- Reference prd-cupboard-core R2.3, prd-sqlite-backend graph model\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-trails-interface.md\n- [ ] Defines Trail struct\n- [ ] Defines TrailTable interface matching prd-cupboard-core\n- [ ] Documents complete vs abandon semantics with links\n- [ ] Documents trail states\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:12.659552-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:13:21.786124-05:00","closed_at":"2026-02-04T11:13:21.786124-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.3","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:12.661217-05:00","created_by":"petardjukic"}],"comments":[{"id":4,"issue_id":"crumbs-gfu.3","author":"petardjukic","text":"tokens: ~15000","created_at":"2026-02-04T16:13:21Z"}]}
{"id":"crumbs-gfu.4","title":"PRD: Properties Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-properties-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Extensible property definitions without schema migrations\n2. Goals - Define PropertyTable interface\n3. Requirements - Property struct, Category struct, Define, Get, List, DefineCategory\n4. Non-Goals - Setting property values on crumbs (in CrumbTable)\n5. Acceptance Criteria - Interface defined, built-in properties listed\n\n## Scope (updated for table accessor pattern)\n- Property struct: property_id, name, description, value_type, created_at\n- Category struct: category_id, property_id, name, ordinal\n- PropertyTable interface from prd-cupboard-core:\n  - Define(name, description, valueType) - create property definition\n  - Get(id) - retrieve definition\n  - List() - list all definitions\n  - DefineCategory(propertyID, name, ordinal) - create category for categorical property\n- value_type enum: categorical, text, integer, boolean, timestamp, list\n- Built-in properties: priority, type, description, owner, labels, dependencies\n\n## Design Decisions\n- Property definitions only (not values - those are on CrumbTable)\n- Categories enable ordered enumeration for categorical properties\n- Built-in properties seeded on first startup (per prd-sqlite-backend R9)\n- Reference prd-cupboard-core R2.3\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-properties-interface.md\n- [ ] Defines Property struct\n- [ ] Defines Category struct\n- [ ] Defines PropertyTable interface matching prd-cupboard-core\n- [ ] Documents value_type enum\n- [ ] Lists built-in properties\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:19.061987-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:20:46.797976-05:00","closed_at":"2026-02-04T11:20:46.797976-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.4","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:19.063767-05:00","created_by":"petardjukic"}],"comments":[{"id":5,"issue_id":"crumbs-gfu.4","author":"petardjukic","text":"tokens: ~8000","created_at":"2026-02-04T16:20:46Z"}]}
{"id":"crumbs-gfu.5","title":"PRD: SQLite Backend","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-sqlite-backend.md\n\n## Required Sections (per prd-format)\n1. Problem - Why we need detailed SQLite backend specification\n2. Goals - Define JSON↔SQLite sync, schema, file layout\n3. Requirements - JSON file format, SQLite schema, sync operations, startup/shutdown, error handling\n4. Non-Goals - Other backends, Cupboard interface (defined elsewhere)\n5. Acceptance Criteria - Schema documented, sync behavior specified\n\n## Scope\n- JSON file format and directory layout (DataDir structure)\n- SQLite schema matching JSON structure\n- Startup: load JSON → SQLite\n- Write operations: update SQLite → persist to JSON\n- Shutdown: flush pending writes\n- Error handling: corrupt JSON, schema mismatch\n- Concurrency: single-writer, multiple-reader\n\n## Design Decisions\n- JSON is source of truth; SQLite is ephemeral query cache\n- modernc.org/sqlite (pure Go, no CGO)\n- One JSON file per table or single JSONL file\n- Reference prd-cupboard-core R7\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-sqlite-backend.md\n- [ ] JSON file format fully specified\n- [ ] SQLite schema documented\n- [ ] Sync lifecycle (startup, write, shutdown) specified\n- [ ] Error handling documented\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:17:26.922101-05:00","created_by":"petardjukic","updated_at":"2026-02-04T09:59:55.836462-05:00","closed_at":"2026-02-04T09:59:55.836462-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.5","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:17:26.92315-05:00","created_by":"petardjukic"}],"comments":[{"id":2,"issue_id":"crumbs-gfu.5","author":"petardjukic","text":"tokens: 25000, loc: 477+0","created_at":"2026-02-04T14:59:55Z"}]}
{"id":"crumbs-gfu.6","title":"PRD: Metadata Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-metadata-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Extensible metadata storage (comments, attachments, logs)\n2. Goals - Define MetadataTable interface\n3. Requirements - Metadata struct, Schema struct, Register, Add, Get, Search\n4. Non-Goals - Core crumb/trail operations (separate interfaces)\n5. Acceptance Criteria - Interface defined, built-in tables listed\n\n## Scope (from prd-cupboard-core table accessor pattern)\n- Metadata struct: metadata_id, table_name, crumb_id, property_id, content, created_at\n- Schema struct: defines fields for custom metadata tables\n- MetadataTable interface from prd-cupboard-core:\n  - Register(tableName, schema) - add new metadata table type\n  - Add(tableName, crumbID, content, propertyID?) - add metadata entry\n  - Get(tableName, crumbID) - retrieve metadata for crumb\n  - Search(tableName, filter) - search by crumb, property, or text\n- MetadataFilter struct for search\n- Built-in tables: comments, attachments\n\n## Design Decisions\n- Metadata tables are extensible at runtime\n- Schema defines structure but storage is flexible (content as text/JSON)\n- Search supports filtering by crumb_id, property_id, or text content\n- Reference prd-cupboard-core R2.3, prd-sqlite-backend R2.9\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-metadata-interface.md\n- [ ] Defines Metadata struct\n- [ ] Defines Schema struct\n- [ ] Defines MetadataTable interface matching prd-cupboard-core\n- [ ] Defines MetadataFilter for search\n- [ ] Lists built-in tables (comments, attachments)\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-04T10:13:31.44233-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:22:08.582849-05:00","closed_at":"2026-02-04T11:22:08.582849-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.6","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-04T10:13:31.443413-05:00","created_by":"petardjukic"}],"comments":[{"id":6,"issue_id":"crumbs-gfu.6","author":"petardjukic","text":"tokens: ~6000","created_at":"2026-02-04T16:22:08Z"}]}
{"id":"crumbs-l3x","title":"SQLite Backend Implementation","description":"Implement the SQLite backend with ORM pattern:\n- Uniform Table interface (Get/Set/Delete/Fetch)\n- Entity types with methods (Crumb, Trail, Property, Stash, Metadata)\n- SQLite backend with JSON persistence\n- Use case demonstrating CRUD operations\n- CLI commands for table operations\n\nThis epic delivers the core storage functionality.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:45.23551-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:49:48.568433-05:00","closed_at":"2026-02-04T21:49:48.568433-05:00","close_reason":"Closed"}
{"id":"crumbs-l3x.1","title":"Create uc004-sqlite-crud.md use case","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md (SQLite backend spec)\n- docs/product-requirements/prd-crumbs-interface.md (Crumb entity)\n- docs/use-cases/uc001-crud-operations.md (current CRUD use case)\n- .claude/rules/use-case-format.md (use case format rule)\n\n## Files to Create/Modify\n- docs/use-cases/uc004-sqlite-crud.md (create)\n\n## Requirements\nCreate use case demonstrating SQLite backend CRUD operations:\n1. Summary: How to perform CRUD operations on crumbs using SQLite backend\n2. Actor: Developer or agent using Crumbs with SQLite\n3. Flow: Attach SQLite backend → Get table → Create crumb → Get crumb → Update via entity methods → Save → Delete\n4. Architecture touchpoints: Cupboard, Table, Crumb entity, SQLite backend\n5. Success criteria: Crumbs persisted to JSON, queryable via SQLite\n6. Out of scope: Trails, properties, stashes (covered in later use cases)\n\n## Design Decisions\n- Focus on basic CRUD for crumbs table\n- Demonstrate ORM pattern (Get entity → modify → Set)\n- Show JSON persistence\n\n## Acceptance Criteria\n- [ ] Summary states SQLite CRUD workflow clearly\n- [ ] Actor and trigger defined\n- [ ] Flow shows end-to-end CRUD (Attach → GetTable → Get/Set/Delete)\n- [ ] Architecture touchpoints list Cupboard, Table, Crumb, SQLite backend\n- [ ] Success/demo criteria are checkable\n- [ ] File follows use-case-format rule with numeric prefix uc004","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:07.430381-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:00:49.124477-05:00","closed_at":"2026-02-04T21:00:49.124477-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.1","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:07.436875-05:00","created_by":"petardjukic"}],"comments":[{"id":26,"issue_id":"crumbs-l3x.1","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T02:00:46Z"}]}
{"id":"crumbs-l3x.2","title":"Implement entity types in pkg/types","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md (Crumb entity spec)\n- docs/product-requirements/prd-trails-interface.md (Trail entity spec)\n- docs/product-requirements/prd-properties-interface.md (Property entity spec)\n- docs/product-requirements/prd-stash-interface.md (Stash entity spec)\n- docs/product-requirements/prd-metadata-interface.md (Metadata entity spec)\n\n## Files to Create/Modify\n- pkg/types/crumb.go (create)\n- pkg/types/trail.go (create)\n- pkg/types/property.go (create)\n- pkg/types/stash.go (create)\n- pkg/types/metadata.go (create)\n\n## Requirements\nImplement entity structs per updated PRDs:\n1. Crumb struct: CrumbID, Name, State, CreatedAt, UpdatedAt, Properties (map[string]any)\n2. Trail struct: TrailID, ParentCrumbID, State, CreatedAt, CompletedAt\n3. Property struct: PropertyID, Name, ValueType, Description, CreatedAt\n4. Category struct: CategoryID, PropertyID, Name, Ordinal\n5. Stash struct: StashID, TrailID, Name, StashType, Value, Version, CreatedAt\n6. Metadata struct: MetadataID, CrumbID, TableName, Content, PropertyID, CreatedAt\n7. Link struct: LinkID, LinkType, FromID, ToID\n\n## Design Decisions\n- All entities are plain structs (no embedded methods yet)\n- Use time.Time for timestamps\n- Use string for IDs (UUID v7 will be generated by backend)\n- Properties field on Crumb is map[string]any\n\n## Acceptance Criteria\n- [ ] All entity structs defined with correct fields\n- [ ] Field types match PRD specs\n- [ ] Files saved in pkg/types/\n- [ ] Go code compiles","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:15.306509-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:54:18.172661-05:00","closed_at":"2026-02-04T20:54:18.172661-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.2","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:15.308138-05:00","created_by":"petardjukic"}],"comments":[{"id":24,"issue_id":"crumbs-l3x.2","author":"petardjukic","text":"tokens: 25000","created_at":"2026-02-05T01:54:17Z"}]}
{"id":"crumbs-l3x.3","title":"Implement entity methods in pkg/types","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md (Crumb methods)\n- docs/product-requirements/prd-trails-interface.md (Trail methods)\n- docs/product-requirements/prd-stash-interface.md (Stash methods)\n- pkg/types/crumb.go (Crumb struct)\n- pkg/types/trail.go (Trail struct)\n- pkg/types/stash.go (Stash struct)\n\n## Files to Create/Modify\n- pkg/types/crumb.go (update - add methods)\n- pkg/types/trail.go (update - add methods)\n- pkg/types/stash.go (update - add methods)\n\n## Requirements\nImplement entity methods per updated PRDs:\n1. Crumb methods: SetState(state), Complete(), Archive(), Fail(), SetProperty(name, value), GetProperty(name), ClearProperty(name)\n2. Trail methods: Complete(), Abandon()\n3. Stash methods: SetValue(value), GetValue(), Increment(delta) (for counter type)\n4. Property methods: DefineCategory(name, ordinal) returns Category struct\n\n## Design Decisions\n- Methods update struct fields in place\n- Caller must save entity via Table.Set after modifying\n- SetState validates state transitions\n- Property methods on Crumb manipulate Properties map\n\n## Acceptance Criteria\n- [ ] All entity methods implemented\n- [ ] Methods update struct fields correctly\n- [ ] State validation logic in place (for Crumb.SetState)\n- [ ] Go code compiles\n- [ ] Unit tests for entity methods","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:21.942717-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:21:01.608357-05:00","closed_at":"2026-02-04T21:21:01.608357-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.3","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:21.944391-05:00","created_by":"petardjukic"}],"comments":[{"id":29,"issue_id":"crumbs-l3x.3","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T02:21:01Z"},{"id":30,"issue_id":"crumbs-l3x.3","author":"petardjukic","text":"stats: +268 LOC (prod), +652 LOC (test), +0 words (docs)","created_at":"2026-02-05T02:22:11Z"}]}
{"id":"crumbs-l3x.4","title":"Implement SQLite backend in internal/sqlite","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md (SQLite backend spec)\n- docs/product-requirements/prd-cupboard-core.md (Cupboard and Table interfaces)\n- pkg/types/cupboard.go (Cupboard interface)\n- pkg/types/table.go (Table interface)\n- pkg/types/crumb.go (Crumb entity)\n\n## Files to Create/Modify\n- internal/sqlite/backend.go (create)\n- internal/sqlite/table.go (create)\n- internal/sqlite/schema.sql (create)\n\n## Requirements\nImplement SQLite backend per prd-sqlite-backend:\n1. Backend struct implementing Cupboard interface\n2. Table implementation for uniform Get/Set/Delete/Fetch operations\n3. Entity hydration: table rows → entity objects (Crumb, Trail, etc.)\n4. Entity persistence: entity objects → table rows\n5. Table name routing: GetTable(\"crumbs\") → crumbs table\n6. SQLite schema creation on first startup\n7. Use modernc.org/sqlite (pure Go)\n\n## Design Decisions\n- Backend struct holds SQLite connection\n- Table struct holds reference to backend and table name\n- Hydration uses type switch on table name\n- Schema includes all tables: crumbs, trails, properties, categories, stashes, metadata, links\n- SQLite is query cache; JSON is source of truth (handled in separate issue)\n\n## Acceptance Criteria\n- [ ] Backend implements Cupboard interface (GetTable, Attach, Detach)\n- [ ] Table implements Table interface (Get, Set, Delete, Fetch)\n- [ ] Entity hydration works for all entity types\n- [ ] Table name routing works\n- [ ] Schema creation on Attach\n- [ ] Go code compiles\n- [ ] Unit tests for backend operations","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:30.120679-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:35:13.621039-05:00","closed_at":"2026-02-04T21:35:13.621039-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.4","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:30.122479-05:00","created_by":"petardjukic"}],"comments":[{"id":31,"issue_id":"crumbs-l3x.4","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T02:35:13Z"}]}
{"id":"crumbs-l3x.5","title":"Implement JSON persistence in internal/sqlite","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md (JSON persistence spec)\n- internal/sqlite/backend.go (SQLite backend)\n\n## Files to Create/Modify\n- internal/sqlite/json.go (create)\n- internal/sqlite/backend.go (update - integrate JSON sync)\n\n## Requirements\nImplement JSON ↔ SQLite synchronization per prd-sqlite-backend:\n1. On Attach: Load JSON files → SQLite tables\n2. On Set/Delete: Write to JSON first, then update SQLite\n3. JSON file per table: crumbs.json, trails.json, properties.json, etc.\n4. JSON format: array of entity objects\n5. Atomic writes (temp file + rename)\n\n## Design Decisions\n- JSON is source of truth\n- SQLite is query cache (for filtering, joins, indexing)\n- JSON files stored in DataDir\n- Use json.Marshal/Unmarshal for serialization\n- Atomic writes prevent corruption\n\n## Acceptance Criteria\n- [ ] LoadFromJSON loads all tables on Attach\n- [ ] SaveToJSON writes entity to JSON on Set\n- [ ] DeleteFromJSON removes entity from JSON on Delete\n- [ ] Atomic writes implemented (temp + rename)\n- [ ] JSON format is array of objects\n- [ ] Go code compiles\n- [ ] Unit tests for JSON sync","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:36.668863-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:41:14.464042-05:00","closed_at":"2026-02-04T21:41:14.464042-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.5","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:36.671625-05:00","created_by":"petardjukic"}],"comments":[{"id":32,"issue_id":"crumbs-l3x.5","author":"petardjukic","text":"tokens: 35000","created_at":"2026-02-05T02:41:14Z"}]}
{"id":"crumbs-l3x.6","title":"Add CLI commands for table operations","description":"## Required Reading\n- cmd/crumbs/main.go (CLI setup)\n- pkg/types/cupboard.go (Cupboard interface)\n- pkg/types/table.go (Table interface)\n\n## Files to Create/Modify\n- cmd/crumbs/cmd/get.go (create)\n- cmd/crumbs/cmd/set.go (create)\n- cmd/crumbs/cmd/delete.go (create)\n- cmd/crumbs/cmd/list.go (create)\n- cmd/crumbs/main.go (update - register commands)\n\n## Requirements\nImplement CLI commands for table operations:\n1. crumbs get \u003ctable\u003e \u003cid\u003e - Get entity by ID\n2. crumbs set \u003ctable\u003e \u003cid\u003e \u003cjson\u003e - Create or update entity\n3. crumbs delete \u003ctable\u003e \u003cid\u003e - Delete entity\n4. crumbs list \u003ctable\u003e [filter] - List entities with optional filter\n5. Output format: JSON (pretty-printed)\n\n## Design Decisions\n- Use cobra for command structure\n- Commands call Cupboard.GetTable().Get/Set/Delete/Fetch\n- JSON input for set command\n- Filter syntax for list: key=value pairs\n\n## Acceptance Criteria\n- [ ] All commands implemented\n- [ ] Commands call Cupboard operations\n- [ ] JSON output formatted\n- [ ] Error handling for invalid table names, IDs, data\n- [ ] CLI compiles and runs\n- [ ] Manual testing of each command","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:42.377269-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:49:10.467304-05:00","closed_at":"2026-02-04T21:49:10.467304-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.6","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:42.378613-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-mtn","title":"PRD Gap Fixes","description":"## Summary\n\nAddress missing operations identified during PRD review that would block implementation.\n\n## Gaps Identified\n\n1. **SetState on CrumbTable** - No way to change crumb state except Archive\n2. **Trail membership operations** - No way to add/remove crumbs from trails\n3. **ListCategories on PropertyTable** - Can define categories but not list them\n4. **Update crumb name** - No way to rename a crumb after creation\n\n## Deliverables\n\n- PRD updates to add missing operations\n- Update sqlite-backend with affected JSON files","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T16:39:51.373391-05:00","created_by":"petardjukic","updated_at":"2026-02-04T16:44:18.389741-05:00","closed_at":"2026-02-04T16:44:18.389741-05:00","close_reason":"Closed"}
{"id":"crumbs-mtn.1","title":"PRD Update: CrumbTable SetState and Update operations","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-cupboard-core.md\n\n## Files to Create/Modify\n- docs/product-requirements/prd-crumbs-interface.md (modify)\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n\n### Add SetState operation (new R14)\n```go\nfunc (t CrumbTable) SetState(id string, state string) error\n```\n- Validate crumb exists\n- Validate state is one of valid states (R2.1)\n- Update state and UpdatedAt\n- Return ErrInvalidState if state is not recognized\n\n### Add Update operation (new R15)\n```go\nfunc (t CrumbTable) Update(id string, name string) error\n```\n- Validate crumb exists\n- Validate name is non-empty\n- Update name and UpdatedAt\n\n### Update CrumbTable interface in prd-cupboard-core\n\n### Add ErrInvalidState to error types (R13)\n\n## Acceptance Criteria\n- [ ] SetState operation specified\n- [ ] Update operation specified  \n- [ ] ErrInvalidState error documented\n- [ ] CrumbTable interface updated in prd-cupboard-core","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T16:40:01.553475-05:00","created_by":"petardjukic","updated_at":"2026-02-04T16:42:38.176569-05:00","closed_at":"2026-02-04T16:42:38.176569-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-mtn.1","depends_on_id":"crumbs-mtn","type":"parent-child","created_at":"2026-02-04T16:40:01.554976-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-mtn.2","title":"PRD Update: Trail membership operations","description":"## Required Reading\n- docs/product-requirements/prd-trails-interface.md\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-sqlite-backend.md (links table)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-trails-interface.md (modify)\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n\n### Add AddCrumb operation to TrailTable\n```go\nfunc (t TrailTable) AddCrumb(trailID, crumbID string) error\n```\n- Validate trail exists\n- Validate crumb exists\n- Validate crumb not already in another trail (belongs_to is many-to-one)\n- Create belongs_to link\n- Return ErrAlreadyInTrail if crumb belongs to another trail\n\n### Add RemoveCrumb operation to TrailTable\n```go\nfunc (t TrailTable) RemoveCrumb(trailID, crumbID string) error\n```\n- Validate trail exists\n- Validate crumb exists\n- Validate crumb belongs to this trail\n- Remove belongs_to link\n- Idempotent: succeed if crumb not in trail\n\n### Update TrailTable interface in prd-cupboard-core\n\n### Add ErrAlreadyInTrail to error types\n\n## Acceptance Criteria\n- [ ] AddCrumb operation specified\n- [ ] RemoveCrumb operation specified\n- [ ] ErrAlreadyInTrail error documented\n- [ ] TrailTable interface updated in prd-cupboard-core","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T16:40:09.662387-05:00","created_by":"petardjukic","updated_at":"2026-02-04T16:43:38.574589-05:00","closed_at":"2026-02-04T16:43:38.574589-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-mtn.2","depends_on_id":"crumbs-mtn","type":"parent-child","created_at":"2026-02-04T16:40:09.664309-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-mtn.3","title":"PRD Update: PropertyTable ListCategories operation","description":"## Required Reading\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-cupboard-core.md\n\n## Files to Create/Modify\n- docs/product-requirements/prd-properties-interface.md (modify)\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n\n### Add ListCategories operation (update R10)\n```go\nfunc (t PropertyTable) ListCategories(propertyID string) ([]*Category, error)\n```\n- Validate property exists\n- Return categories ordered by ordinal ascending, then name\n- Return empty slice if no categories defined\n- Return ErrNotFound if property does not exist\n- Return ErrInvalidID if propertyID is empty\n\n### Remove R10.3 implementation note (no longer needed)\n\n### Update PropertyTable interface in prd-cupboard-core\n\n## Acceptance Criteria\n- [ ] ListCategories operation specified\n- [ ] R10.3 implementation note removed\n- [ ] PropertyTable interface updated in prd-cupboard-core","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T16:40:16.81199-05:00","created_by":"petardjukic","updated_at":"2026-02-04T16:44:15.089828-05:00","closed_at":"2026-02-04T16:44:15.089828-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-mtn.3","depends_on_id":"crumbs-mtn","type":"parent-child","created_at":"2026-02-04T16:40:16.81492-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-r4y","title":"Self-Hosting Milestone","description":"Milestone: Crumbs builds crumbs.\n- Update uc002-self-hosting.md for ORM pattern\n- Validate that crumbs can manage its own development tasks\n- Demonstrate trails for exploratory work\n- End-to-end validation of the system\n\nThis epic proves the system works for its intended use case.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:48.686509-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:53:55.474626-05:00","closed_at":"2026-02-04T21:53:55.474626-05:00","close_reason":"Closed"}
{"id":"crumbs-r4y.1","title":"Update uc002-self-hosting.md for ORM pattern","description":"## Required Reading\n- docs/use-cases/uc002-self-hosting.md (current use case)\n- docs/product-requirements/prd-cupboard-core.md (updated interfaces)\n- docs/product-requirements/prd-crumbs-interface.md (Crumb entity)\n- docs/product-requirements/prd-trails-interface.md (Trail entity)\n- .claude/rules/use-case-format.md (use case format rule)\n\n## Files to Create/Modify\n- docs/use-cases/uc002-self-hosting.md (update)\n\n## Requirements\nUpdate uc002-self-hosting.md to reflect ORM pattern:\n1. Update flow to use new interfaces (GetTable, entity methods)\n2. Show trail creation and management with ORM pattern\n3. Demonstrate crumb creation via entity objects\n4. Update architecture touchpoints to reference new interfaces\n5. Keep milestone goal: crumbs builds crumbs\n\n## Design Decisions\n- Flow uses Cupboard.GetTable(\"crumbs\") and Cupboard.GetTable(\"trails\")\n- Entities created via Table.Set with empty ID\n- State transitions via entity methods\n- Trail operations via Trail entity methods\n\n## Acceptance Criteria\n- [ ] Flow updated to use ORM pattern\n- [ ] GetTable and Table interface shown in flow\n- [ ] Entity methods demonstrated\n- [ ] Architecture touchpoints updated\n- [ ] Success criteria reflect milestone validation\n- [ ] File follows use-case-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:08:04.496101-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:10:15.920337-05:00","closed_at":"2026-02-04T21:10:15.920337-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r4y.1","depends_on_id":"crumbs-r4y","type":"parent-child","created_at":"2026-02-04T20:08:04.497838-05:00","created_by":"petardjukic"}],"comments":[{"id":28,"issue_id":"crumbs-r4y.1","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T02:10:15Z"}]}
{"id":"crumbs-r4y.2","title":"Validate self-hosting milestone","description":"## Required Reading\n- docs/use-cases/uc002-self-hosting.md (updated use case)\n- All implemented code (pkg/types, internal/sqlite, cmd/crumbs)\n\n## Files to Create/Modify\n- scripts/validate-self-hosting.sh (create - test script)\n\n## Requirements\nValidate that crumbs can manage its own development:\n1. Create trail for a feature exploration\n2. Add crumbs to trail representing implementation tasks\n3. Complete trail (merge crumbs into permanent record)\n4. Abandon a trail (cleanup failed exploration)\n5. Query crumbs with filters\n6. Verify JSON persistence\n\n## Design Decisions\n- Test script uses CLI commands\n- Covers full workflow from uc002-self-hosting\n- Validates trail lifecycle\n- Checks JSON files for correctness\n\n## Acceptance Criteria\n- [ ] Test script created\n- [ ] Script covers trail creation, crumb addition, completion, abandonment\n- [ ] Script verifies JSON persistence\n- [ ] All tests pass\n- [ ] Milestone validated: crumbs builds crumbs","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:08:10.656296-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:53:52.016262-05:00","closed_at":"2026-02-04T21:53:52.016262-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r4y.2","depends_on_id":"crumbs-r4y","type":"parent-child","created_at":"2026-02-04T20:08:10.657665-05:00","created_by":"petardjukic"}],"comments":[{"id":34,"issue_id":"crumbs-r4y.2","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T02:53:47Z"}]}
{"id":"crumbs-r9j","title":"Stash Interface PRD","description":"## Summary\n\nDefine the Stash entity for sharing state between crumbs on a trail. Stashes provide shared resources, artifacts, context, and coordination primitives (counters, locks) with full change history.\n\n## Motivation\n\nCrumbs are individual work items. Trails group them. But there's no mechanism for crumbs to share runtime state. When multiple agents coordinate on work, they need:\n- Shared resources (files, URLs, connections)\n- Artifacts (outputs from one crumb as inputs to another)\n- Context (decisions, configuration)\n- Coordination primitives (locks, counters)\n\nStash is a new first-class entity that provides this shared state with versioning and history.\n\n## Deliverables\n\n1. PRD: Stash Interface - Stash struct, StashHistory, types, operations\n2. PRD update: Cupboard Core - Add Stashes() accessor\n3. PRD update: SQLite Backend - Add stashes.json, stash_history.json, schema\n\n## Design Summary\n\n- Stash scoped to trail (or global if trail_id is null)\n- Types: resource, artifact, context, counter, lock\n- All mutations create history entries with version, operation, changedBy\n- Interface includes GetHistory and GetValueAtVersion for auditing","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:31.561381-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:02:11.498943-05:00","closed_at":"2026-02-04T14:02:11.498943-05:00","close_reason":"Closed"}
{"id":"crumbs-r9j.1","title":"PRD: Stash Interface","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (interface pattern)\n- docs/product-requirements/prd-properties-interface.md (similar entity design)\n- docs/product-requirements/prd-crumbs-interface.md (operation patterns)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-stash-interface.md (create)\n\n## Required Sections (per prd-format rule)\n\n### Problem\n- Crumbs need to share state: resources, artifacts, context, coordination primitives\n- No current mechanism for trail-scoped or global shared state\n- Agents coordinating on work need blackboard-style communication\n\n### Goals\n1. Define Stash struct with all fields\n2. Define StashHistory struct for change tracking\n3. Define stash types and their semantics\n4. Specify CRUD operations\n5. Specify type-specific operations (counter increment, lock acquire/release)\n6. Specify history operations\n7. Document error conditions\n\n### Requirements\n\nR1: Stash Struct\n- StashID (UUID v7)\n- TrailID (optional, null for global)\n- Name (unique within scope)\n- StashType (resource | artifact | context | counter | lock)\n- Value (JSON blob)\n- Version (monotonically increasing)\n- CreatedAt, UpdatedAt\n\nR2: StashHistory Struct\n- HistoryID (UUID v7)\n- StashID (foreign key)\n- Version\n- Value (value after change)\n- Operation (create | set | increment | acquire | release)\n- ChangedBy (crumb ID, nullable)\n- CreatedAt\n\nR3: Stash Types\n- resource: URIs, paths, connections\n- artifact: outputs with producer, checksum\n- context: configuration, decisions\n- counter: atomic numeric state\n- lock: mutual exclusion\n\nR4-R8: Operations (Create, Get, GetByName, List, Delete)\nR9: Set operation (records history)\nR10: Counter operations (Increment)\nR11: Lock operations (Acquire, Release, TryAcquire)\nR12: History operations (GetHistory, GetValueAtVersion)\nR13: Error types\n\n### Non-Goals\n- Queue/channel type (future)\n- Cross-cupboard stashes\n- Stash replication\n\n## Acceptance Criteria\n- [ ] Stash struct defined with all fields\n- [ ] StashHistory struct defined\n- [ ] All stash types documented with value schemas\n- [ ] CRUD operations specified\n- [ ] Type-specific operations specified\n- [ ] History operations specified\n- [ ] Error types documented\n- [ ] File saved at docs/product-requirements/prd-stash-interface.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:46.438271-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:00:13.290671-05:00","closed_at":"2026-02-04T14:00:13.290671-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.1","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:54:46.43996-05:00","created_by":"petardjukic"}],"comments":[{"id":11,"issue_id":"crumbs-r9j.1","author":"petardjukic","text":"tokens: 12000","created_at":"2026-02-04T19:00:13Z"}]}
{"id":"crumbs-r9j.2","title":"PRD Update: Cupboard Core - Add Stashes accessor","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-stash-interface.md (after crumbs-r9j.1)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n- Add Stashes() StashTable to Cupboard interface (R2.2)\n- Add StashTable interface definition to R2.3\n- Update R2.4 to reference prd-stash-interface\n- Update Acceptance Criteria\n\n## Acceptance Criteria\n- [ ] Cupboard interface includes Stashes() accessor\n- [ ] StashTable interface listed in R2.3\n- [ ] Reference to prd-stash-interface added","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:52.914779-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:01:01.824984-05:00","closed_at":"2026-02-04T14:01:01.824984-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.2","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:54:52.917854-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-r9j.2","depends_on_id":"crumbs-r9j.1","type":"blocks","created_at":"2026-02-04T13:55:04.191426-05:00","created_by":"petardjukic"}],"comments":[{"id":12,"issue_id":"crumbs-r9j.2","author":"petardjukic","text":"tokens: 3000","created_at":"2026-02-04T19:01:01Z"}]}
{"id":"crumbs-r9j.3","title":"PRD Update: SQLite Backend - Stash storage","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/product-requirements/prd-stash-interface.md (after crumbs-r9j.1)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-sqlite-backend.md (modify)\n\n## Requirements\n\n### R1: Directory Layout\n- Add stashes.json to file list\n- Add stash_history.json to file list\n\n### R2: JSON File Format\n- Add stashes.json format specification\n- Add stash_history.json format specification\n\n### R3: SQLite Schema\n- Add stashes table (stash_id, trail_id, name, stash_type, value, version, created_at, updated_at)\n- Add stash_history table (history_id, stash_id, version, value, operation, changed_by, created_at)\n- Add indexes for common queries\n\n### R5: Write Operations\n- Add stash operations to affected JSON files table\n\n## Acceptance Criteria\n- [ ] stashes.json format specified\n- [ ] stash_history.json format specified\n- [ ] SQLite schema includes stashes and stash_history tables\n- [ ] Indexes defined for stash queries\n- [ ] Write operations table updated","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:55:00.129284-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:02:11.342691-05:00","closed_at":"2026-02-04T14:02:11.342691-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.3","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:55:00.131692-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-r9j.3","depends_on_id":"crumbs-r9j.1","type":"blocks","created_at":"2026-02-04T13:55:04.353483-05:00","created_by":"petardjukic"}],"comments":[{"id":13,"issue_id":"crumbs-r9j.3","author":"petardjukic","text":"tokens: 5000","created_at":"2026-02-04T19:02:11Z"}]}
{"id":"crumbs-xgb","title":"epic","description":"Update all product requirement documents to reflect the ORM pattern design:\n- Cupboard interface with GetTable(name), Attach(config), Detach()\n- Uniform Table interface with Get/Set/Delete/Fetch\n- Entity types (Crumb, Trail, Property, etc.) with methods for state transitions\n- Remove table-specific interfaces (CrumbTable, TrailTable, etc.)\n\nThis epic ensures all documentation is aligned with the new ORM design before implementation begins.","status":"tombstone","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:24.142164-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:13:11.556126-05:00","deleted_at":"2026-02-04T20:13:11.556126-05:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"crumbs-y6u","title":"Update PRDs for ORM Pattern","description":"Update all product requirement documents to reflect the ORM pattern design:\n- Cupboard interface with GetTable(name), Attach(config), Detach()\n- Uniform Table interface with Get/Set/Delete/Fetch\n- Entity types (Crumb, Trail, Property, etc.) with methods for state transitions\n- Remove table-specific interfaces (CrumbTable, TrailTable, etc.)\n\nThis epic ensures all documentation is aligned with the new ORM design before implementation begins.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:39.672073-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:49:49.267414-05:00","closed_at":"2026-02-04T21:49:49.267414-05:00","close_reason":"Closed"}
{"id":"crumbs-y6u.1","title":"Update prd-cupboard-core.md for ORM pattern","description":"## Required Reading\n- docs/ARCHITECTURE.md (current design)\n- docs/product-requirements/prd-cupboard-core.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-cupboard-core.md (update)\n\n## Requirements\nUpdate prd-cupboard-core.md to reflect the ORM pattern:\n1. Cupboard interface with GetTable(name), Attach(config), Detach()\n2. Uniform Table interface with Get(id), Set(id, data), Delete(id), Fetch(filter)\n3. Remove table-specific interfaces (CrumbTable, TrailTable, etc.)\n4. Update Config struct (keep typed struct per user preference 4B)\n5. Update OpenCupboard → Attach/Detach pattern\n6. Define standard table names: \"crumbs\", \"trails\", \"properties\", \"metadata\", \"links\", \"stashes\"\n\n## Design Decisions\n- Cupboard.GetTable(name) returns uniform Table interface\n- Table.Get returns entity objects (any type)\n- Table.Set accepts entity objects for persistence\n- Config remains a typed struct for compile-time validation\n- Attach/Detach methods replace OpenCupboard function\n\n## Acceptance Criteria\n- [ ] Cupboard interface defined with GetTable, Attach, Detach\n- [ ] Table interface defined with Get, Set, Delete, Fetch\n- [ ] Config struct updated with Backend, DataDir, backend-specific configs\n- [ ] Standard table names documented\n- [ ] All required PRD sections present (Problem, Goals, Requirements, Non-Goals, Acceptance Criteria)\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:14.754092-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:15:05.517195-05:00","closed_at":"2026-02-04T20:15:05.517195-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.1","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:14.755819-05:00","created_by":"petardjukic"}],"comments":[{"id":14,"issue_id":"crumbs-y6u.1","author":"petardjukic","text":"tokens: 15320, doc_changes: +94-113 lines (prd-cupboard-core.md updated for ORM pattern)","created_at":"2026-02-05T01:15:05Z"}]}
{"id":"crumbs-y6u.2","title":"Update prd-crumbs-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-crumbs-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-crumbs-interface.md (update)\n\n## Requirements\nUpdate prd-crumbs-interface.md to define Crumb entity and methods:\n1. Crumb struct with fields: CrumbID, Name, State, CreatedAt, UpdatedAt, Properties (map)\n2. Entity methods: SetState(state), Complete(), Archive(), Fail()\n3. Property methods: SetProperty(name, value), GetProperty(name), ClearProperty(name)\n4. Remove table-level operations (they move to uniform Table interface)\n5. Define state transitions and validation rules\n\n## Design Decisions\n- Crumb is a plain struct with methods (not active record)\n- State transitions via entity methods (SetState, Complete, Archive, Fail)\n- Properties stored as map[string]any on Crumb struct\n- Methods update struct fields; caller must save via Table.Set\n\n## Acceptance Criteria\n- [ ] Crumb struct defined with all required fields\n- [ ] State transition methods defined\n- [ ] Property methods defined\n- [ ] State validation rules documented\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:25.67095-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:18:26.393691-05:00","closed_at":"2026-02-04T20:18:26.393691-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.2","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:25.672223-05:00","created_by":"petardjukic"}],"comments":[{"id":15,"issue_id":"crumbs-y6u.2","author":"petardjukic","text":"tokens: 23016, loc: 213+186","created_at":"2026-02-05T01:18:23Z"}]}
{"id":"crumbs-y6u.3","title":"Update prd-trails-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-trails-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-trails-interface.md (update)\n\n## Requirements\nUpdate prd-trails-interface.md to define Trail entity and methods:\n1. Trail struct with fields: TrailID, ParentCrumbID, State, CreatedAt, CompletedAt\n2. Entity methods: Complete(), Abandon()\n3. Crumb association: AddCrumb(crumbID), RemoveCrumb(crumbID), GetCrumbs()\n4. Define trail states and lifecycle\n5. Remove table-level operations\n\n## Design Decisions\n- Trail is a plain struct with methods\n- Complete/Abandon update state field\n- Crumb associations managed via methods\n- GetCrumbs queries the links table\n\n## Acceptance Criteria\n- [ ] Trail struct defined with all required fields\n- [ ] Complete and Abandon methods defined\n- [ ] Crumb association methods defined\n- [ ] Trail lifecycle documented\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:30.311391-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:23:52.584319-05:00","closed_at":"2026-02-04T20:23:52.584319-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.3","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:30.313987-05:00","created_by":"petardjukic"}],"comments":[{"id":16,"issue_id":"crumbs-y6u.3","author":"petardjukic","text":"tokens: 19533, lines: 87 modified","created_at":"2026-02-05T01:23:52Z"}]}
{"id":"crumbs-y6u.4","title":"Update prd-properties-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-properties-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-properties-interface.md (update)\n\n## Requirements\nUpdate prd-properties-interface.md to define Property and Category entities:\n1. Property struct: PropertyID, Name, ValueType, Description, CreatedAt\n2. Category struct: CategoryID, PropertyID, Name, Ordinal\n3. Entity methods for property operations: DefineCategory(name, ordinal)\n4. Built-in properties seeding (priority, type, description, owner, labels, dependencies)\n5. Remove table-level operations\n\n## Design Decisions\n- Property and Category are plain structs\n- DefineCategory creates Category and saves via Table.Set\n- Built-in properties seeded on first startup\n- Type-based defaults enforcement remains\n\n## Acceptance Criteria\n- [ ] Property struct defined\n- [ ] Category struct defined\n- [ ] DefineCategory method defined\n- [ ] Built-in properties specified\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:35.498784-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:28:31.013373-05:00","closed_at":"2026-02-04T20:28:31.013373-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.4","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:35.499941-05:00","created_by":"petardjukic"}],"comments":[{"id":17,"issue_id":"crumbs-y6u.4","author":"petardjukic","text":"tokens: 35000","created_at":"2026-02-05T01:28:30Z"}]}
{"id":"crumbs-y6u.5","title":"Update prd-metadata-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-metadata-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-metadata-interface.md (update)\n\n## Requirements\nUpdate prd-metadata-interface.md to define Metadata entity:\n1. Metadata struct: MetadataID, CrumbID, TableName, Content, PropertyID, CreatedAt\n2. Schema registration for extensible metadata tables (comments, attachments, logs)\n3. Remove table-level operations (use uniform Table interface)\n4. Define how metadata is queried and filtered\n\n## Design Decisions\n- Metadata is a plain struct\n- Schema registration defines metadata table structures\n- Uniform Table interface handles metadata CRUD\n\n## Acceptance Criteria\n- [ ] Metadata struct defined\n- [ ] Schema registration approach documented\n- [ ] Query and filter patterns documented\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:39.981939-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:34:21.195457-05:00","closed_at":"2026-02-04T20:34:21.195457-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.5","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:39.985173-05:00","created_by":"petardjukic"}],"comments":[{"id":18,"issue_id":"crumbs-y6u.5","author":"petardjukic","text":"tokens: 25000","created_at":"2026-02-05T01:34:20Z"}]}
{"id":"crumbs-y6u.6","title":"Update prd-stash-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-stash-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-stash-interface.md (update)\n\n## Requirements\nUpdate prd-stash-interface.md to define Stash entity and methods:\n1. Stash struct: StashID, TrailID, Name, StashType, Value, Version, CreatedAt\n2. Entity methods: SetValue(value), GetValue(), Increment(delta), Acquire(holder), Release(holder)\n3. History operations: GetHistory(), GetValueAtVersion(version)\n4. Stash types: resource, artifact, context, counter, lock\n5. Remove table-level operations\n\n## Design Decisions\n- Stash is a plain struct with methods\n- Versioning and history maintained by backend\n- Lock operations (Acquire/Release) use special stash type\n- Counter operations use Increment method\n\n## Acceptance Criteria\n- [ ] Stash struct defined\n- [ ] All stash types documented\n- [ ] Entity methods defined (SetValue, Increment, Acquire, Release, etc.)\n- [ ] History operations defined\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:45.467734-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:42:49.678621-05:00","closed_at":"2026-02-04T20:42:49.678621-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.6","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:45.469251-05:00","created_by":"petardjukic"}],"comments":[{"id":19,"issue_id":"crumbs-y6u.6","author":"petardjukic","text":"tokens: estimated 15000","created_at":"2026-02-05T01:42:49Z"}]}
{"id":"crumbs-y6u.7","title":"Update prd-sqlite-backend.md for ORM pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-sqlite-backend.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-sqlite-backend.md (update)\n\n## Requirements\nUpdate prd-sqlite-backend.md to describe ORM implementation:\n1. How backend implements uniform Table interface\n2. Entity hydration: table rows → entity objects (Crumb, Trail, etc.)\n3. Entity persistence: entity objects → table rows\n4. JSON ↔ SQLite synchronization\n5. Graph model for links table\n6. Table name routing (GetTable(\"crumbs\") → crumbs table)\n\n## Design Decisions\n- SQLite backend implements Cupboard interface\n- Each table name maps to SQLite table and entity type\n- Entity hydration uses reflection or manual mapping\n- JSON files remain source of truth\n- SQLite is query cache\n\n## Acceptance Criteria\n- [ ] Table interface implementation described\n- [ ] Entity hydration pattern documented\n- [ ] Entity persistence pattern documented\n- [ ] JSON ↔ SQLite sync updated\n- [ ] Table name routing documented\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:51.34812-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:46:47.476888-05:00","closed_at":"2026-02-04T20:46:47.476888-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.7","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:51.349651-05:00","created_by":"petardjukic"}],"comments":[{"id":20,"issue_id":"crumbs-y6u.7","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T01:46:46Z"}]}
{"id":"crumbs-y6u.8","title":"Update ARCHITECTURE.md for ORM pattern","description":"## Required Reading\n- docs/ARCHITECTURE.md (current architecture)\n- docs/product-requirements/prd-cupboard-core.md (updated PRD)\n- .claude/rules/architecture-format.md (architecture format rule)\n\n## Files to Create/Modify\n- docs/ARCHITECTURE.md (update)\n\n## Requirements\nUpdate ARCHITECTURE.md to reflect ORM pattern:\n1. Update System Overview with ORM pattern description\n2. Update Main Interface section with Cupboard.GetTable and Table interface\n3. Update interface examples to show entity objects and methods\n4. Update Design Decisions to include ORM rationale\n5. Update usage patterns throughout\n\n## Design Decisions\n- Document why ORM pattern was chosen\n- Explain entity objects vs active record\n- Clarify table interface uniformity benefits\n\n## Acceptance Criteria\n- [ ] System Overview updated\n- [ ] Main Interface section updated with new interfaces\n- [ ] Usage examples show ORM pattern\n- [ ] Design Decisions include ORM rationale\n- [ ] All required architecture sections present\n- [ ] File follows architecture-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:56.229493-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:58:38.087207-05:00","closed_at":"2026-02-04T20:58:38.087207-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.8","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:56.232186-05:00","created_by":"petardjukic"}],"comments":[{"id":25,"issue_id":"crumbs-y6u.8","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T01:58:37Z"}]}
