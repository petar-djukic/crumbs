{"id":"crumbs-gfu","title":"Interface Definition PRDs","description":"Break down prd-task-storage into focused interface PRDs. Each PRD defines one conceptual 'table' in the cupboard: its Go interface, operations, data structures, and acceptance criteria.\n\n## Scope\n\nSeven interface PRDs, each following prd-format:\n1. prd-cupboard-core - Cupboard lifecycle, config, backend selection\n2. prd-crumbs-interface - Crumbs table and CRUD operations\n3. prd-trails-interface - Trails table and lifecycle operations\n4. prd-properties-interface - Property definitions and categories\n5. prd-crumb-properties-interface - Type-specific property values\n6. prd-metadata-interface - Metadata tables (comments, attachments)\n7. prd-query-interface - FetchCrumbs, filtering, pagination\n\n## Design Decisions\n\n- Each interface = one conceptual 'table in the cupboard'\n- PRDs define Go interface contracts, not implementation details\n- Reference prd-task-storage for context; these PRDs expand with full interface definitions\n- Follow prd-format rule: Problem, Goals, Requirements, Non-Goals, Acceptance Criteria\n\n## Acceptance Criteria\n\n- [ ] All seven PRDs created in docs/product-requirements/\n- [ ] Each PRD follows prd-format\n- [ ] Each PRD defines Go interface with operation signatures\n- [ ] PRDs are traceable to prd-task-storage requirements","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-03T21:04:45.137607-05:00","created_by":"petardjukic","updated_at":"2026-02-03T21:04:45.137607-05:00"}
{"id":"crumbs-gfu.1","title":"PRD: Cupboard Core Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-cupboard-core.md\n\n## Required Sections (per prd-format)\n1. Problem - Why we need a cupboard lifecycle interface\n2. Goals - Define the core cupboard contract\n3. Requirements - Go interface definition, Config struct, OpenCupboard, CloseCupboard, backend selection, error conditions\n4. Non-Goals - Implementation details, specific backend behavior\n5. Acceptance Criteria - Interface defined, config schema, error handling\n\n## Scope\n- Config struct with backend selection, backend-specific parameters\n- OpenCupboard(config) returns Cupboard instance\n- CloseCupboard() releases resources, idempotent\n- Error handling for operations after close\n- Backend interface that all backends must implement\n\n## Design Decisions\n- Config uses functional options or struct with backend-specific embedded configs\n- Cupboard interface is the main contract; backends implement it\n- Reference prd-task-storage R8, R9\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-cupboard-core.md\n- [ ] Defines Config struct with all fields\n- [ ] Defines Cupboard interface with OpenCupboard, CloseCupboard\n- [ ] Defines Backend interface\n- [ ] Documents error conditions\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:00.164888-05:00","created_by":"petardjukic","updated_at":"2026-02-03T21:07:49.837711-05:00","closed_at":"2026-02-03T21:07:49.837711-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.1","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:00.167338-05:00","created_by":"petardjukic"}],"comments":[{"id":1,"issue_id":"crumbs-gfu.1","author":"petardjukic","text":"tokens: 45000, loc: 162+0","created_at":"2026-02-04T02:07:44Z"}]}
{"id":"crumbs-gfu.2","title":"PRD: Crumbs Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-crumbs-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Core entity storage for work items\n2. Goals - Define crumb CRUD operations\n3. Requirements - Crumb struct, DropCrumb, GetCrumb, DeleteCrumb, UUID v7 generation, timestamps\n4. Non-Goals - Properties, metadata, trails (separate interfaces)\n5. Acceptance Criteria - Interface defined, struct documented\n\n## Scope\n- Crumb struct: crumb_id, name, state, trail_id, created_at, updated_at\n- DropCrumb(name, trail_id?) - create crumb with UUID v7\n- GetCrumb(crumb_id) - retrieve by ID\n- DeleteCrumb(crumb_id) - remove crumb and associated data\n- State values: pending, ready, running, completed, failed\n- created_at derived from UUID v7 timestamp\n\n## Design Decisions\n- Crumb is the core entity; properties and metadata are separate tables\n- State is a string enum, not enforced by storage (agents define semantics)\n- Reference prd-task-storage R2\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-crumbs-interface.md\n- [ ] Defines Crumb struct with all fields and types\n- [ ] Defines DropCrumb, GetCrumb, DeleteCrumb signatures\n- [ ] Documents UUID v7 generation and timestamp derivation\n- [ ] Documents state values\n- [ ] Follows prd-format","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:07.136442-05:00","created_by":"petardjukic","updated_at":"2026-02-03T21:05:07.136442-05:00","dependencies":[{"issue_id":"crumbs-gfu.2","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:07.14021-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-gfu.3","title":"PRD: Trails Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-trails-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Support exploratory work sessions with backtracking\n2. Goals - Define trail lifecycle operations\n3. Requirements - Trail struct, StartTrail, GetTrail, GetTrailCrumbs, CompleteTrail, AbandonTrail\n4. Non-Goals - Crumb CRUD (separate interface), query filtering (query interface)\n5. Acceptance Criteria - Interface defined, lifecycle documented\n\n## Scope\n- Trail struct: trail_id, parent_crumb_id, state, created_at, completed_at\n- StartTrail(parent_crumb_id?) - create trail, optionally deviate from crumb\n- GetTrail(trail_id) - retrieve trail\n- GetTrailCrumbs(trail_id) - list crumbs on trail\n- CompleteTrail(trail_id) - mark completed, clear trail_id from crumbs (merge to permanent)\n- AbandonTrail(trail_id) - mark abandoned, delete/exclude crumbs (backtrack)\n- Trail states: active, completed, abandoned\n\n## Design Decisions\n- CompleteTrail clears trail_id (crumbs become permanent)\n- AbandonTrail deletes or marks crumbs; behavior may vary by backend\n- Reference prd-task-storage R3\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-trails-interface.md\n- [ ] Defines Trail struct with all fields\n- [ ] Defines all trail operations with signatures\n- [ ] Documents complete vs abandon semantics\n- [ ] Documents trail states\n- [ ] Follows prd-format","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:12.659552-05:00","created_by":"petardjukic","updated_at":"2026-02-03T21:05:12.659552-05:00","dependencies":[{"issue_id":"crumbs-gfu.3","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:12.661217-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-gfu.4","title":"PRD: Properties Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-properties-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Extensible property definitions without schema migrations\n2. Goals - Define property and category management\n3. Requirements - Property struct, Category struct, DefineProperty, GetProperty, ListProperties, DefineCategory\n4. Non-Goals - Setting property values on crumbs (crumb-properties interface)\n5. Acceptance Criteria - Interface defined, built-in properties listed\n\n## Scope\n- Property struct: property_id, name, description, value_type, created_at\n- Category struct: category_id, property_id, name, ordinal\n- value_type enum: categorical, text, integer, boolean, timestamp, list\n- DefineProperty(name, description, value_type) - create property definition\n- GetProperty(property_id) - retrieve definition\n- ListProperties() - list all definitions\n- DefineCategory(property_id, name, ordinal) - create category for categorical property\n- Built-in properties: priority, type, description, owner, labels, dependencies\n\n## Design Decisions\n- Properties are first-class entities with their own IDs\n- New properties defined at runtime without schema changes\n- Categories enable ordered enumeration for categorical properties\n- Reference prd-task-storage R4\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-properties-interface.md\n- [ ] Defines Property struct with all fields\n- [ ] Defines Category struct\n- [ ] Defines all property operations\n- [ ] Documents value_type enum\n- [ ] Lists built-in properties\n- [ ] Follows prd-format","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:19.061987-05:00","created_by":"petardjukic","updated_at":"2026-02-03T21:05:19.061987-05:00","dependencies":[{"issue_id":"crumbs-gfu.4","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:19.063767-05:00","created_by":"petardjukic"}]}
