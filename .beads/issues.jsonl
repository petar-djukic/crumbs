{"id":"crumbs-5wm","title":"CRUD Use Case and Property Enforcement","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:37:50.317729-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:55:45.777368-05:00","closed_at":"2026-02-04T11:55:45.777368-05:00","close_reason":"Closed"}
{"id":"crumbs-5wm.1","title":"PRD Update: Property Default Values","description":"## Required Reading\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-crumbs-interface.md\n\n## Files to Create/Modify\n- docs/product-requirements/prd-properties-interface.md (modify)\n\n## Requirements\nAdd type-based default values for properties:\n- When a property is defined, specify what the default value is for each type\n- categorical: null (or first category if categories exist)\n- text: \"\" (empty string)\n- integer: 0\n- boolean: false\n- timestamp: null\n- list: [] (empty list)\n\nAdd requirement that when a new property is defined, all existing crumbs receive that property with its default value.\n\n## Acceptance Criteria\n- [ ] Default values documented for each value type\n- [ ] R4 (Define) updated to specify backfill of existing crumbs\n- [ ] File saved","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:37:58.298176-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:46:16.700263-05:00","closed_at":"2026-02-04T11:46:16.700263-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.1","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:37:58.299689-05:00","created_by":"petardjukic"}],"comments":[{"id":8,"issue_id":"crumbs-5wm.1","author":"petardjukic","text":"tokens: 25000","created_at":"2026-02-04T16:46:16Z"}]}
{"id":"crumbs-5wm.2","title":"PRD Update: Crumb Property Auto-Initialization","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-properties-interface.md (after update)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-crumbs-interface.md (modify)\n\n## Requirements\nUpdate R3 (Add operation) to specify that when a crumb is created:\n- All defined properties are automatically initialized with their type-based default values\n- The crumb has a value for every property (no property is ever \"not set\" for a crumb)\n\nUpdate R11 (GetProperties) to reflect that it always returns all properties (never empty unless no properties are defined).\n\n## Acceptance Criteria\n- [ ] R3 updated to specify property auto-initialization on Add\n- [ ] R11 updated to reflect complete property coverage\n- [ ] File saved","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:38:04.962015-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:54:26.475047-05:00","closed_at":"2026-02-04T11:54:26.475047-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.2","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:38:04.964199-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.2","depends_on_id":"crumbs-5wm.1","type":"blocks","created_at":"2026-02-04T11:38:20.448159-05:00","created_by":"petardjukic"}],"comments":[{"id":9,"issue_id":"crumbs-5wm.2","author":"petardjukic","text":"tokens: 8000","created_at":"2026-02-04T16:54:26Z"}]}
{"id":"crumbs-5wm.3","title":"Use Case: CRUD Operations Demo","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-sqlite-backend.md\n- .claude/rules/use-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/uc-crud-operations.md (create)\n\n## Summary\nEnd-to-end use case demonstrating:\n1. Create SQLite database (OpenCupboard)\n2. Add crumbs with various states\n3. Change crumb states\n4. Archive crumbs\n5. Create new properties\n6. Add/Change/Delete property values\n7. Verify property enforcement (all crumbs have all properties)\n8. Delete database (Close + remove DataDir)\n\n## Format\nFollow use-case-format rule:\n- Summary\n- Actor and trigger\n- Flow (numbered steps)\n- Architecture touchpoints\n- Success/demo criteria\n- Out of scope\n\n## Acceptance Criteria\n- [ ] All required sections present per use-case-format\n- [ ] Flow covers all CRUD operations\n- [ ] Architecture touchpoints list interfaces used\n- [ ] Demo criteria are observable and checkable\n- [ ] File saved at docs/use-cases/uc-crud-operations.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:38:33.071323-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:55:29.96549-05:00","closed_at":"2026-02-04T11:55:29.96549-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:38:33.072994-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm.1","type":"blocks","created_at":"2026-02-04T11:38:37.002282-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm.2","type":"blocks","created_at":"2026-02-04T11:38:37.166628-05:00","created_by":"petardjukic"}],"comments":[{"id":10,"issue_id":"crumbs-5wm.3","author":"petardjukic","text":"tokens: 5000","created_at":"2026-02-04T16:55:29Z"}]}
{"id":"crumbs-gfu","title":"Interface Definition PRDs","description":"Define Cupboard interface PRDs using table accessor pattern. Each PRD specifies one table interface from prd-cupboard-core.\n\n## Scope (revised)\n\nSix PRDs total:\n1. prd-cupboard-core - Cupboard lifecycle, config, table accessors (DONE)\n2. prd-sqlite-backend - SQLite backend, JSON sync, graph model, LinkTable (DONE)\n3. prd-crumbs-interface - CrumbTable: Drop, Get, Delete, Fetch, property ops\n4. prd-trails-interface - TrailTable: Start, Get, GetCrumbs, Complete, Abandon\n5. prd-properties-interface - PropertyTable: Define, Get, List, DefineCategory\n6. prd-metadata-interface - MetadataTable: Register, Add, Get, Search\n\n## Design Decisions\n\n- Table accessor pattern: cupboard.Crumbs(), cupboard.Trails(), etc.\n- Graph model: links table for belongs_to (crumb→trail) and child_of (crumb→crumb)\n- Property values on CrumbTable (not separate interface)\n- FetchCrumbs on CrumbTable (not separate query interface)\n- LinkTable defined in prd-sqlite-backend (graph model)\n\n## Removed from original scope\n\n- prd-crumb-properties-interface (merged into CrumbTable)\n- prd-query-interface (FetchCrumbs merged into CrumbTable)\n\n## Acceptance Criteria\n\n- [ ] All six PRDs created in docs/product-requirements/\n- [ ] Each PRD follows prd-format\n- [ ] Each PRD defines Go interface matching prd-cupboard-core\n- [ ] PRDs traceable to prd-task-storage requirements","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-03T21:04:45.137607-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:22:30.764254-05:00","closed_at":"2026-02-04T11:22:30.764254-05:00","close_reason":"Closed","comments":[{"id":7,"issue_id":"crumbs-gfu","author":"petardjukic","text":"All 6 interface PRDs complete","created_at":"2026-02-04T16:22:30Z"}]}
{"id":"crumbs-gfu.1","title":"PRD: Cupboard Core Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-cupboard-core.md\n\n## Required Sections (per prd-format)\n1. Problem - Why we need a cupboard lifecycle interface\n2. Goals - Define the core cupboard contract\n3. Requirements - Go interface definition, Config struct, OpenCupboard, CloseCupboard, backend selection, error conditions\n4. Non-Goals - Implementation details, specific backend behavior\n5. Acceptance Criteria - Interface defined, config schema, error handling\n\n## Scope\n- Config struct with backend selection, backend-specific parameters\n- OpenCupboard(config) returns Cupboard instance\n- CloseCupboard() releases resources, idempotent\n- Error handling for operations after close\n- Backend interface that all backends must implement\n\n## Design Decisions\n- Config uses functional options or struct with backend-specific embedded configs\n- Cupboard interface is the main contract; backends implement it\n- Reference prd-task-storage R8, R9\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-cupboard-core.md\n- [ ] Defines Config struct with all fields\n- [ ] Defines Cupboard interface with OpenCupboard, CloseCupboard\n- [ ] Defines Backend interface\n- [ ] Documents error conditions\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:00.164888-05:00","created_by":"petardjukic","updated_at":"2026-02-03T21:07:49.837711-05:00","closed_at":"2026-02-03T21:07:49.837711-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.1","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:00.167338-05:00","created_by":"petardjukic"}],"comments":[{"id":1,"issue_id":"crumbs-gfu.1","author":"petardjukic","text":"tokens: 45000, loc: 162+0","created_at":"2026-02-04T02:07:44Z"}]}
{"id":"crumbs-gfu.2","title":"PRD: Crumbs Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-crumbs-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Core entity storage for work items\n2. Goals - Define CrumbTable interface\n3. Requirements - Crumb struct, Drop, Get, Delete, Fetch, property operations\n4. Non-Goals - Trail operations, property definitions (separate interfaces)\n5. Acceptance Criteria - Interface defined, struct documented\n\n## Scope (updated for table accessor pattern)\n- Crumb struct: crumb_id, name, state, created_at, updated_at (no trail_id - uses links)\n- CrumbTable interface from prd-cupboard-core:\n  - Drop(name) - create crumb with UUID v7\n  - Get(id) - retrieve by ID\n  - Delete(id) - remove crumb and associated data\n  - Fetch(filter) - query crumbs by properties\n  - SetProperty, GetProperty, GetProperties, ClearProperty - property values\n- State values: pending, ready, running, completed, failed\n- Filter struct for Fetch operation\n\n## Design Decisions\n- Trail membership via links table (belongs_to), not crumb field\n- Property operations on CrumbTable (not separate interface)\n- Fetch replaces separate query interface\n- Reference prd-cupboard-core R2.3\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-crumbs-interface.md\n- [ ] Defines Crumb struct (no trail_id field)\n- [ ] Defines CrumbTable interface matching prd-cupboard-core\n- [ ] Defines Filter struct for Fetch\n- [ ] Documents state values\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:07.136442-05:00","created_by":"petardjukic","updated_at":"2026-02-04T10:36:56.204119-05:00","closed_at":"2026-02-04T10:36:56.204119-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.2","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:07.14021-05:00","created_by":"petardjukic"}],"comments":[{"id":3,"issue_id":"crumbs-gfu.2","author":"petardjukic","text":"tokens: 18000","created_at":"2026-02-04T15:36:55Z"}]}
{"id":"crumbs-gfu.3","title":"PRD: Trails Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-trails-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Support exploratory work sessions with backtracking\n2. Goals - Define TrailTable interface\n3. Requirements - Trail struct, Start, Get, GetCrumbs, Complete, Abandon\n4. Non-Goals - Crumb CRUD (separate interface), link operations (prd-sqlite-backend)\n5. Acceptance Criteria - Interface defined, lifecycle documented\n\n## Scope (updated for table accessor pattern)\n- Trail struct: trail_id, parent_crumb_id, state, created_at, completed_at\n- TrailTable interface from prd-cupboard-core:\n  - Start(parentCrumbID?) - create trail, optionally deviate from crumb\n  - Get(id) - retrieve trail\n  - GetCrumbs(id) - list crumbs on trail (via belongs_to links)\n  - Complete(id) - mark completed, remove belongs_to links (crumbs become permanent)\n  - Abandon(id) - mark abandoned, delete crumbs and their links\n- Trail states: active, completed, abandoned\n\n## Design Decisions\n- Crumb membership via links table (belongs_to), queried by GetCrumbs\n- Complete removes belongs_to links (crumbs no longer belong to any trail)\n- Abandon deletes crumbs and all their links\n- Reference prd-cupboard-core R2.3, prd-sqlite-backend graph model\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-trails-interface.md\n- [ ] Defines Trail struct\n- [ ] Defines TrailTable interface matching prd-cupboard-core\n- [ ] Documents complete vs abandon semantics with links\n- [ ] Documents trail states\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:12.659552-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:13:21.786124-05:00","closed_at":"2026-02-04T11:13:21.786124-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.3","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:12.661217-05:00","created_by":"petardjukic"}],"comments":[{"id":4,"issue_id":"crumbs-gfu.3","author":"petardjukic","text":"tokens: ~15000","created_at":"2026-02-04T16:13:21Z"}]}
{"id":"crumbs-gfu.4","title":"PRD: Properties Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-properties-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Extensible property definitions without schema migrations\n2. Goals - Define PropertyTable interface\n3. Requirements - Property struct, Category struct, Define, Get, List, DefineCategory\n4. Non-Goals - Setting property values on crumbs (in CrumbTable)\n5. Acceptance Criteria - Interface defined, built-in properties listed\n\n## Scope (updated for table accessor pattern)\n- Property struct: property_id, name, description, value_type, created_at\n- Category struct: category_id, property_id, name, ordinal\n- PropertyTable interface from prd-cupboard-core:\n  - Define(name, description, valueType) - create property definition\n  - Get(id) - retrieve definition\n  - List() - list all definitions\n  - DefineCategory(propertyID, name, ordinal) - create category for categorical property\n- value_type enum: categorical, text, integer, boolean, timestamp, list\n- Built-in properties: priority, type, description, owner, labels, dependencies\n\n## Design Decisions\n- Property definitions only (not values - those are on CrumbTable)\n- Categories enable ordered enumeration for categorical properties\n- Built-in properties seeded on first startup (per prd-sqlite-backend R9)\n- Reference prd-cupboard-core R2.3\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-properties-interface.md\n- [ ] Defines Property struct\n- [ ] Defines Category struct\n- [ ] Defines PropertyTable interface matching prd-cupboard-core\n- [ ] Documents value_type enum\n- [ ] Lists built-in properties\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:19.061987-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:20:46.797976-05:00","closed_at":"2026-02-04T11:20:46.797976-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.4","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:19.063767-05:00","created_by":"petardjukic"}],"comments":[{"id":5,"issue_id":"crumbs-gfu.4","author":"petardjukic","text":"tokens: ~8000","created_at":"2026-02-04T16:20:46Z"}]}
{"id":"crumbs-gfu.5","title":"PRD: SQLite Backend","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-sqlite-backend.md\n\n## Required Sections (per prd-format)\n1. Problem - Why we need detailed SQLite backend specification\n2. Goals - Define JSON↔SQLite sync, schema, file layout\n3. Requirements - JSON file format, SQLite schema, sync operations, startup/shutdown, error handling\n4. Non-Goals - Other backends, Cupboard interface (defined elsewhere)\n5. Acceptance Criteria - Schema documented, sync behavior specified\n\n## Scope\n- JSON file format and directory layout (DataDir structure)\n- SQLite schema matching JSON structure\n- Startup: load JSON → SQLite\n- Write operations: update SQLite → persist to JSON\n- Shutdown: flush pending writes\n- Error handling: corrupt JSON, schema mismatch\n- Concurrency: single-writer, multiple-reader\n\n## Design Decisions\n- JSON is source of truth; SQLite is ephemeral query cache\n- modernc.org/sqlite (pure Go, no CGO)\n- One JSON file per table or single JSONL file\n- Reference prd-cupboard-core R7\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-sqlite-backend.md\n- [ ] JSON file format fully specified\n- [ ] SQLite schema documented\n- [ ] Sync lifecycle (startup, write, shutdown) specified\n- [ ] Error handling documented\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:17:26.922101-05:00","created_by":"petardjukic","updated_at":"2026-02-04T09:59:55.836462-05:00","closed_at":"2026-02-04T09:59:55.836462-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.5","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:17:26.92315-05:00","created_by":"petardjukic"}],"comments":[{"id":2,"issue_id":"crumbs-gfu.5","author":"petardjukic","text":"tokens: 25000, loc: 477+0","created_at":"2026-02-04T14:59:55Z"}]}
{"id":"crumbs-gfu.6","title":"PRD: Metadata Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-metadata-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Extensible metadata storage (comments, attachments, logs)\n2. Goals - Define MetadataTable interface\n3. Requirements - Metadata struct, Schema struct, Register, Add, Get, Search\n4. Non-Goals - Core crumb/trail operations (separate interfaces)\n5. Acceptance Criteria - Interface defined, built-in tables listed\n\n## Scope (from prd-cupboard-core table accessor pattern)\n- Metadata struct: metadata_id, table_name, crumb_id, property_id, content, created_at\n- Schema struct: defines fields for custom metadata tables\n- MetadataTable interface from prd-cupboard-core:\n  - Register(tableName, schema) - add new metadata table type\n  - Add(tableName, crumbID, content, propertyID?) - add metadata entry\n  - Get(tableName, crumbID) - retrieve metadata for crumb\n  - Search(tableName, filter) - search by crumb, property, or text\n- MetadataFilter struct for search\n- Built-in tables: comments, attachments\n\n## Design Decisions\n- Metadata tables are extensible at runtime\n- Schema defines structure but storage is flexible (content as text/JSON)\n- Search supports filtering by crumb_id, property_id, or text content\n- Reference prd-cupboard-core R2.3, prd-sqlite-backend R2.9\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-metadata-interface.md\n- [ ] Defines Metadata struct\n- [ ] Defines Schema struct\n- [ ] Defines MetadataTable interface matching prd-cupboard-core\n- [ ] Defines MetadataFilter for search\n- [ ] Lists built-in tables (comments, attachments)\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-04T10:13:31.44233-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:22:08.582849-05:00","closed_at":"2026-02-04T11:22:08.582849-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.6","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-04T10:13:31.443413-05:00","created_by":"petardjukic"}],"comments":[{"id":6,"issue_id":"crumbs-gfu.6","author":"petardjukic","text":"tokens: ~6000","created_at":"2026-02-04T16:22:08Z"}]}
{"id":"crumbs-r9j","title":"Stash Interface PRD","description":"## Summary\n\nDefine the Stash entity for sharing state between crumbs on a trail. Stashes provide shared resources, artifacts, context, and coordination primitives (counters, locks) with full change history.\n\n## Motivation\n\nCrumbs are individual work items. Trails group them. But there's no mechanism for crumbs to share runtime state. When multiple agents coordinate on work, they need:\n- Shared resources (files, URLs, connections)\n- Artifacts (outputs from one crumb as inputs to another)\n- Context (decisions, configuration)\n- Coordination primitives (locks, counters)\n\nStash is a new first-class entity that provides this shared state with versioning and history.\n\n## Deliverables\n\n1. PRD: Stash Interface - Stash struct, StashHistory, types, operations\n2. PRD update: Cupboard Core - Add Stashes() accessor\n3. PRD update: SQLite Backend - Add stashes.json, stash_history.json, schema\n\n## Design Summary\n\n- Stash scoped to trail (or global if trail_id is null)\n- Types: resource, artifact, context, counter, lock\n- All mutations create history entries with version, operation, changedBy\n- Interface includes GetHistory and GetValueAtVersion for auditing","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:31.561381-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:02:11.498943-05:00","closed_at":"2026-02-04T14:02:11.498943-05:00","close_reason":"Closed"}
{"id":"crumbs-r9j.1","title":"PRD: Stash Interface","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (interface pattern)\n- docs/product-requirements/prd-properties-interface.md (similar entity design)\n- docs/product-requirements/prd-crumbs-interface.md (operation patterns)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-stash-interface.md (create)\n\n## Required Sections (per prd-format rule)\n\n### Problem\n- Crumbs need to share state: resources, artifacts, context, coordination primitives\n- No current mechanism for trail-scoped or global shared state\n- Agents coordinating on work need blackboard-style communication\n\n### Goals\n1. Define Stash struct with all fields\n2. Define StashHistory struct for change tracking\n3. Define stash types and their semantics\n4. Specify CRUD operations\n5. Specify type-specific operations (counter increment, lock acquire/release)\n6. Specify history operations\n7. Document error conditions\n\n### Requirements\n\nR1: Stash Struct\n- StashID (UUID v7)\n- TrailID (optional, null for global)\n- Name (unique within scope)\n- StashType (resource | artifact | context | counter | lock)\n- Value (JSON blob)\n- Version (monotonically increasing)\n- CreatedAt, UpdatedAt\n\nR2: StashHistory Struct\n- HistoryID (UUID v7)\n- StashID (foreign key)\n- Version\n- Value (value after change)\n- Operation (create | set | increment | acquire | release)\n- ChangedBy (crumb ID, nullable)\n- CreatedAt\n\nR3: Stash Types\n- resource: URIs, paths, connections\n- artifact: outputs with producer, checksum\n- context: configuration, decisions\n- counter: atomic numeric state\n- lock: mutual exclusion\n\nR4-R8: Operations (Create, Get, GetByName, List, Delete)\nR9: Set operation (records history)\nR10: Counter operations (Increment)\nR11: Lock operations (Acquire, Release, TryAcquire)\nR12: History operations (GetHistory, GetValueAtVersion)\nR13: Error types\n\n### Non-Goals\n- Queue/channel type (future)\n- Cross-cupboard stashes\n- Stash replication\n\n## Acceptance Criteria\n- [ ] Stash struct defined with all fields\n- [ ] StashHistory struct defined\n- [ ] All stash types documented with value schemas\n- [ ] CRUD operations specified\n- [ ] Type-specific operations specified\n- [ ] History operations specified\n- [ ] Error types documented\n- [ ] File saved at docs/product-requirements/prd-stash-interface.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:46.438271-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:00:13.290671-05:00","closed_at":"2026-02-04T14:00:13.290671-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.1","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:54:46.43996-05:00","created_by":"petardjukic"}],"comments":[{"id":11,"issue_id":"crumbs-r9j.1","author":"petardjukic","text":"tokens: 12000","created_at":"2026-02-04T19:00:13Z"}]}
{"id":"crumbs-r9j.2","title":"PRD Update: Cupboard Core - Add Stashes accessor","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-stash-interface.md (after crumbs-r9j.1)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n- Add Stashes() StashTable to Cupboard interface (R2.2)\n- Add StashTable interface definition to R2.3\n- Update R2.4 to reference prd-stash-interface\n- Update Acceptance Criteria\n\n## Acceptance Criteria\n- [ ] Cupboard interface includes Stashes() accessor\n- [ ] StashTable interface listed in R2.3\n- [ ] Reference to prd-stash-interface added","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:52.914779-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:01:01.824984-05:00","closed_at":"2026-02-04T14:01:01.824984-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.2","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:54:52.917854-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-r9j.2","depends_on_id":"crumbs-r9j.1","type":"blocks","created_at":"2026-02-04T13:55:04.191426-05:00","created_by":"petardjukic"}],"comments":[{"id":12,"issue_id":"crumbs-r9j.2","author":"petardjukic","text":"tokens: 3000","created_at":"2026-02-04T19:01:01Z"}]}
{"id":"crumbs-r9j.3","title":"PRD Update: SQLite Backend - Stash storage","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/product-requirements/prd-stash-interface.md (after crumbs-r9j.1)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-sqlite-backend.md (modify)\n\n## Requirements\n\n### R1: Directory Layout\n- Add stashes.json to file list\n- Add stash_history.json to file list\n\n### R2: JSON File Format\n- Add stashes.json format specification\n- Add stash_history.json format specification\n\n### R3: SQLite Schema\n- Add stashes table (stash_id, trail_id, name, stash_type, value, version, created_at, updated_at)\n- Add stash_history table (history_id, stash_id, version, value, operation, changed_by, created_at)\n- Add indexes for common queries\n\n### R5: Write Operations\n- Add stash operations to affected JSON files table\n\n## Acceptance Criteria\n- [ ] stashes.json format specified\n- [ ] stash_history.json format specified\n- [ ] SQLite schema includes stashes and stash_history tables\n- [ ] Indexes defined for stash queries\n- [ ] Write operations table updated","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:55:00.129284-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:02:11.342691-05:00","closed_at":"2026-02-04T14:02:11.342691-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.3","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:55:00.131692-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-r9j.3","depends_on_id":"crumbs-r9j.1","type":"blocks","created_at":"2026-02-04T13:55:04.353483-05:00","created_by":"petardjukic"}],"comments":[{"id":13,"issue_id":"crumbs-r9j.3","author":"petardjukic","text":"tokens: 5000","created_at":"2026-02-04T19:02:11Z"}]}
