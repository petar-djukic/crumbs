{"id":"crumbs-03c","title":"Crumbs table benchmarks for rel01.0","description":"Add a use case and benchmarking suite for the cupboard crumbs table in rel01.0. This establishes baseline performance for core Table interface operations (Get, Set, Delete, Fetch) without property operations (which belong to rel02.0+).\n\n## Required Reading\n- docs/use-cases/rel01.0-uc002-sqlite-crud.yaml (Table interface being benchmarked)\n- docs/test-suites/test-rel02.1-uc002-table-benchmarks.yaml (existing benchmark suite for reference)\n- tests/integration/test003_table_benchmarks_test.go (existing benchmark Go code)\n- docs/road-map.yaml\n\n## Scope\nTwo child tasks:\n1. Create use case YAML, test suite YAML, and roadmap entry (documentation)\n2. Create Go benchmark test file (code)\n\n## Acceptance Criteria\n- rel01.0-uc005-crumbs-table-benchmarks use case exists with test suite\n- Go benchmarks run for Get, Set create/update, Delete, Fetch all, Fetch with state filter\n- go test -bench=. -benchmem ./tests/integration/... completes without error\n- road-map.yaml updated with uc005 in rel01.0","status":"closed","priority":1,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:12:59.048541-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:52:55.367566-05:00","closed_at":"2026-02-07T13:52:55.367566-05:00","close_reason":"Closed"}
{"id":"crumbs-03c.1","title":"Create use case, test suite, and roadmap entry for rel01.0-uc005-crumbs-table-benchmarks","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/use-cases/rel01.0-uc002-sqlite-crud.yaml (Table interface this benchmarks)\n- docs/test-suites/test-rel02.1-uc002-table-benchmarks.yaml (existing benchmark suite for reference)\n- docs/road-map.yaml (release schedule)\n- .claude/rules/use-case-format.md (use case format)\n- .claude/rules/test-case-format.md (test suite format)\n\n## Files to Create/Modify\n- docs/use-cases/rel01.0-uc005-crumbs-table-benchmarks.yaml (create)\n- docs/test-suites/test-rel01.0-uc005-crumbs-table-benchmarks.yaml (create)\n- docs/road-map.yaml (add uc005 to rel01.0 use_cases list)\n\n## Requirements\n- Use case: actor is a developer measuring Table performance; trigger is need to establish baseline performance for core crumbs Table operations; flow covers seeding crumbs at various scales, running Get/Set/Delete/Fetch benchmarks; touchpoints reference prd-cupboard-core R2 (Table interface) and prd-sqlite-backend\n- Success criteria: each benchmark completes without error and reports ns/op, B/op, allocs/op\n- Test suite: ~14 test cases, one per benchmark function (Get at 4 scales: 10/100/1000/10000; Set create at 2 scales: 10/1000; Set update at 2: 10/1000; Delete at 2: 10/1000; Fetch all at 2: 100/1000; Fetch state at 2: 100/1000)\n- Out of scope: property operations (rel02.0), limit/pagination, concurrent benchmarks\n- Roadmap: add entry with id rel01.0-uc005-crumbs-table-benchmarks, summary, status not_started\n\n## Acceptance Criteria\n- [ ] Use case YAML passes completeness checklist (id, title, summary, actor, trigger, flow, touchpoints, success_criteria, out_of_scope, test_suite)\n- [ ] Test suite YAML has correct id, traces to the use case, ~14 test cases with inputs/expected\n- [ ] road-map.yaml includes uc005 in rel01.0 use_cases\n- [ ] Files saved at correct paths","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:13:11.355933-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:34:03.283888-05:00","closed_at":"2026-02-07T13:34:03.283888-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-03c.1","depends_on_id":"crumbs-03c","type":"parent-child","created_at":"2026-02-07T13:13:11.359323-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-03c.2","title":"Create test_rel01_0_uc005_crumbs_table_benchmarks_test.go","description":"## Type\nCode\n\n## Required Reading\n- docs/use-cases/rel01.0-uc005-crumbs-table-benchmarks.yaml (use case, created in sibling issue)\n- docs/test-suites/test-rel01.0-uc005-crumbs-table-benchmarks.yaml (test suite, created in sibling issue)\n- tests/integration/test003_table_benchmarks_test.go (existing benchmarks for pattern reference; reuse BenchEnv, SeedCrumbs)\n- tests/integration/testutil.go (test helpers)\n- pkg/types/ (Crumb struct, Table interface, Config, state constants)\n- internal/sqlite/ (Backend implementation)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_0_uc005_crumbs_table_benchmarks_test.go (create)\n\n## Requirements\n- Implement Go benchmarks for core crumbs Table operations:\n  - Get: 10, 100, 1000, 10000 crumbs (random ID selection)\n  - Set create: 10, 1000 existing crumbs (empty ID triggers UUID v7 generation)\n  - Set update: 10, 1000 crumbs (random ID selection, update Name field)\n  - Delete: 10, 1000 crumbs (create-then-delete per iteration)\n  - Fetch all: 100, 1000 crumbs (empty filter)\n  - Fetch with state filter: 100, 1000 crumbs (State=draft filter)\n- Reuse BenchEnv and SeedCrumbs from test003 (they are in the same package)\n- Each benchmark function calls b.ReportAllocs() and b.ResetTimer() after setup\n- File header references test-rel01.0-uc005-crumbs-table-benchmarks.yaml and the use case\n- No property benchmarks (those stay in rel02.1-uc002)\n\n## Design Decisions\n- Use Go testing.B benchmarks (not CLI integration tests)\n- BenchEnv pattern with temp dir and attached SQLite backend (already defined in test003)\n- Random ID selection for Get/Update benchmarks to measure average latency\n- StopTimer/StartTimer for Delete benchmarks (exclude create cost from measurement)\n\n## Acceptance Criteria\n- [ ] File named test_rel01_0_uc005_crumbs_table_benchmarks_test.go\n- [ ] Header references correct test suite YAML and use case\n- [ ] All ~14 benchmark functions implemented\n- [ ] go test -bench=. -benchmem ./tests/integration/... runs without errors\n- [ ] Each benchmark reports ns/op, B/op, allocs/op\n- [ ] ~300-400 LOC","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:13:20.796406-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:40:35.309414-05:00","closed_at":"2026-02-07T13:40:35.309414-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-03c.2","depends_on_id":"crumbs-03c","type":"parent-child","created_at":"2026-02-07T13:13:20.798095-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-0al","title":"Add define-property CLI command for runtime property creation","description":"## Required Reading\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R1, R2, R3)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F7)\n- cmd/cupboard/set.go (existing generic set pattern)\n- internal/sqlite/table.go (properties table)\n\n## Files to Create/Modify\n- cmd/cupboard/property.go (add define-property command)\n- cmd/cupboard/main.go (register command if not already)\n\n## Requirements\n- cupboard define-property \u003cname\u003e \u003cvalue-type\u003e [--description \u003cdesc\u003e]: define a new property\n- Value types: categorical, text, integer, boolean, timestamp, list\n- Validate value type is recognized\n- Returns PropertyID on success\n- Property automatically backfills existing crumbs (via backend)\n\n## Design Decisions\n- Use subcommand rather than generic set for discoverability\n- Validate value-type before calling backend\n- Output JSON with PropertyID for scripting\n\n## Acceptance Criteria\n- [ ] define-property creates property with given name and type\n- [ ] Property appears in get-properties output for all crumbs\n- [ ] Invalid value-type returns error\n- [ ] JSON output includes PropertyID","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:42.195995-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:42.195995-05:00","dependencies":[{"issue_id":"crumbs-0al","depends_on_id":"crumbs-vlw","type":"blocks","created_at":"2026-02-08T22:53:43.693996-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-1gq","title":"Configuration System","description":"Implement the configuration system with Attach/Detach lifecycle:\n- Config struct with Backend, DataDir, and backend-specific configs\n- Cupboard.Attach(config) to initialize storage backend\n- Cupboard.Detach() to release resources\n- Use case demonstrating configuration workflow\n- CLI config file support\n\nThis epic covers the cupboard lifecycle management.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:42.837245-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:49:49.739496-05:00","closed_at":"2026-02-04T21:49:49.739496-05:00","close_reason":"Closed"}
{"id":"crumbs-1gq.1","title":"Create uc003-configuration.md use case","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated with Attach/Detach)\n- docs/use-cases/uc001-crud-operations.md (example use case)\n- .claude/rules/use-case-format.md (use case format rule)\n\n## Files to Create/Modify\n- docs/use-cases/uc003-configuration.md (create)\n\n## Requirements\nCreate use case demonstrating configuration and cupboard lifecycle:\n1. Summary: How applications initialize and configure storage backend\n2. Actor: Developer or application using Crumbs library\n3. Flow: Create Config → Attach to backend → Verify connection → Use tables → Detach\n4. Architecture touchpoints: Cupboard interface, Config struct, Attach/Detach methods\n5. Success criteria: Observable configuration loading and backend initialization\n6. Out of scope: Backend-specific features, multi-backend switching\n\n## Design Decisions\n- Use case demonstrates SQLite backend configuration\n- Show typed Config struct usage\n- Demonstrate error handling for invalid config\n\n## Acceptance Criteria\n- [ ] Summary states configuration workflow clearly\n- [ ] Actor and trigger defined\n- [ ] Flow shows end-to-end configuration (Config → Attach → Use → Detach)\n- [ ] Architecture touchpoints list Cupboard, Config, backends\n- [ ] Success/demo criteria are checkable\n- [ ] File follows use-case-format rule with numeric prefix uc003","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:18.646693-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:06:38.174518-05:00","closed_at":"2026-02-04T21:06:38.174518-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.1","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:18.649124-05:00","created_by":"petardjukic"}],"comments":[{"id":27,"issue_id":"crumbs-1gq.1","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T02:06:37Z"}]}
{"id":"crumbs-1gq.2","title":"Implement Config struct in pkg/types","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Config struct spec)\n- docs/ARCHITECTURE.md (system overview)\n\n## Files to Create/Modify\n- pkg/types/config.go (create)\n\n## Requirements\nImplement Config struct per prd-cupboard-core:\n1. Backend field (string): \"sqlite\", \"dolt\", \"dynamodb\"\n2. DataDir field (string): directory for local backends\n3. DoltConfig field (*DoltConfig): Dolt-specific settings\n4. DynamoDBConfig field (*DynamoDBConfig): DynamoDB-specific settings\n5. Backend-specific config structs (DoltConfig, DynamoDBConfig)\n6. Validation method: Validate() error\n\n## Design Decisions\n- Config is a plain struct (no methods except Validate)\n- Backend-specific configs use pointer types (nil = not configured)\n- Validation checks: Backend not empty, required configs not nil\n\n## Acceptance Criteria\n- [ ] Config struct defined with all fields\n- [ ] DoltConfig struct defined (DSN, Branch)\n- [ ] DynamoDBConfig struct defined (TableName, Region, Endpoint)\n- [ ] Validate() method checks Backend and required configs\n- [ ] File saved at pkg/types/config.go\n- [ ] Go code compiles","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:25.975145-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:50:09.822675-05:00","closed_at":"2026-02-04T20:50:09.822675-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.2","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:25.976722-05:00","created_by":"petardjukic"}],"comments":[{"id":21,"issue_id":"crumbs-1gq.2","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T01:50:09Z"}]}
{"id":"crumbs-1gq.3","title":"Implement Cupboard interface with Attach/Detach","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Cupboard interface spec)\n- pkg/types/config.go (Config struct)\n\n## Files to Create/Modify\n- pkg/types/cupboard.go (create)\n\n## Requirements\nImplement Cupboard interface per prd-cupboard-core:\n1. GetTable(name string) (Table, error) - returns table by name\n2. Attach(config Config) error - initialize backend\n3. Detach() error - release resources\n4. Define standard table names as constants: CrumbsTable, TrailsTable, PropertiesTable, etc.\n5. Define ErrCupboardClosed sentinel error\n6. Define ErrInvalidTableName sentinel error\n\n## Design Decisions\n- Cupboard is an interface (implementations in backend packages)\n- Standard table names are package-level constants\n- Attach validates config before initializing backend\n- Detach is idempotent (safe to call multiple times)\n\n## Acceptance Criteria\n- [ ] Cupboard interface defined with GetTable, Attach, Detach\n- [ ] Table name constants defined (CrumbsTable = \"crumbs\", etc.)\n- [ ] Sentinel errors defined (ErrCupboardClosed, ErrInvalidTableName)\n- [ ] File saved at pkg/types/cupboard.go\n- [ ] Go code compiles","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:31.849873-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:51:29.873868-05:00","closed_at":"2026-02-04T20:51:29.873868-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.3","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:31.851987-05:00","created_by":"petardjukic"}],"comments":[{"id":22,"issue_id":"crumbs-1gq.3","author":"petardjukic","text":"tokens: 8000","created_at":"2026-02-05T01:51:29Z"}]}
{"id":"crumbs-1gq.4","title":"Implement Table interface","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Table interface spec)\n\n## Files to Create/Modify\n- pkg/types/table.go (create)\n\n## Requirements\nImplement Table interface per prd-cupboard-core:\n1. Get(id string) (any, error) - retrieve entity by ID\n2. Set(id string, data any) (string, error) - create or update entity, return actual ID\n3. Delete(id string) error - delete entity\n4. Fetch(filter map[string]any) ([]any, error) - query multiple entities\n5. Define sentinel errors: ErrNotFound, ErrInvalidID, ErrInvalidData\n\n## Design Decisions\n- Table interface is uniform across all entity types\n- Get returns any (caller type-asserts to Crumb, Trail, etc.)\n- Set with empty/nil id creates new with auto-generated ID\n- Set returns actual ID (useful for creates)\n- Fetch accepts filter map for flexible queries\n\n## Acceptance Criteria\n- [ ] Table interface defined with Get, Set, Delete, Fetch\n- [ ] Sentinel errors defined\n- [ ] File saved at pkg/types/table.go\n- [ ] Go code compiles","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:37.16327-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:51:30.382662-05:00","closed_at":"2026-02-04T20:51:30.382662-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.4","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:37.165166-05:00","created_by":"petardjukic"}],"comments":[{"id":23,"issue_id":"crumbs-1gq.4","author":"petardjukic","text":"tokens: 5000","created_at":"2026-02-05T01:51:30Z"}]}
{"id":"crumbs-1gq.5","title":"Add config file support in CLI","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Config struct)\n- pkg/types/config.go (Config implementation)\n- pkg/types/cupboard.go (Cupboard interface)\n\n## Files to Create/Modify\n- cmd/crumbs/main.go (create)\n- cmd/crumbs/config.go (create)\n- .crumbs.yaml (create example config file in repo root)\n\n## Requirements\nImplement CLI config file support:\n1. Load config from .crumbs.yaml or ~/.crumbs/config.yaml\n2. Parse YAML into Config struct\n3. Support --config flag to specify custom config file location\n4. Initialize Cupboard via Attach in CLI startup\n5. Call Detach on CLI shutdown\n\n## Design Decisions\n- Use viper for config file parsing\n- Search order: --config flag, ./.crumbs.yaml, ~/.crumbs/config.yaml\n- Example config includes SQLite backend setup\n- CLI opens cupboard once at startup, closes on exit\n\n## Acceptance Criteria\n- [ ] Config file loading implemented\n- [ ] --config flag supported\n- [ ] Example .crumbs.yaml created with SQLite config\n- [ ] Cupboard initialized via Attach at CLI startup\n- [ ] Cupboard closed via Detach at CLI exit\n- [ ] CLI compiles and runs","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:06:43.451018-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:45:04.879769-05:00","closed_at":"2026-02-04T21:45:04.879769-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1gq.5","depends_on_id":"crumbs-1gq","type":"parent-child","created_at":"2026-02-04T20:06:43.454489-05:00","created_by":"petardjukic"}],"comments":[{"id":33,"issue_id":"crumbs-1gq.5","author":"petardjukic","text":"tokens: ~35000","created_at":"2026-02-05T02:45:04Z"}]}
{"id":"crumbs-1k7","title":"Implement rel02.0-uc001-property-enforcement integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml\n- tests/integration/testutil.go (test patterns)\n\n## Files to Create/Modify\n- tests/integration/test_rel02_0_uc001_property_enforcement_test.go (create)\n- cmd/cupboard/main.go (update version command)\n\n## Requirements\n- Implement all test cases from test-rel02.0-uc001-property-enforcement.yaml:\n  - S1: Built-in properties seeded (5 properties)\n  - S2: New crumbs have all properties with defaults\n  - S3-S4: SetProperty/GetProperty work\n  - S5: Property definition backfills crumbs\n  - S6: GetProperties returns all properties\n  - S7: ClearProperty resets to default\n  - S8: Crumbs after definition have new property\n  - S9: Invariant - no crumb has fewer properties\n  - S10-S11: Round-trip properties\n  - S12-S15: DefineCategory/GetCategories\n- Update version command to list rel02.0-uc001\n\n## Design Decisions\n- Follow existing table-driven test pattern\n- Use CLI commands for all operations\n- Verify via JSON output and JSONL file inspection\n\n## Acceptance Criteria\n- [ ] All 60+ test cases from YAML implemented\n- [ ] go test ./tests/integration -run TestPropertyEnforcement passes\n- [ ] cupboard version lists rel02.0-uc001-property-enforcement","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:07:41.038813-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:07:41.038813-05:00"}
{"id":"crumbs-1oe","title":"Validate uc001-crud-operations tracer bullet","description":"## Required Reading\n- docs/use-cases/uc001-crud-operations.md (the use case to validate)\n- docs/ARCHITECTURE.md § Usage Pattern\n- pkg/types/*.go (all entity types and interfaces)\n- internal/sqlite/*.go (backend implementation)\n\n## Files to Create/Modify\n- internal/sqlite/integration_test.go (create) - integration test for use case\n- Any fixes needed in existing code\n\n## Requirements\n- Run through uc001-crud-operations end-to-end programmatically\n- Steps: create cupboard, attach with config, create crumb via Table.Set, fetch crumb via Table.Get, update crumb via Table.Set, delete crumb via Table.Delete\n- Verify each step works as documented\n- Fix any gaps or bugs discovered\n\n## Design Decisions\n- Write as Go integration test\n- Use real SQLite backend with temp directory\n- Test covers the full lifecycle from ARCHITECTURE § Usage Pattern\n\n## Acceptance Criteria\n- [ ] Integration test runs full CRUD cycle\n- [ ] Cupboard.Attach initializes backend\n- [ ] Table.Set creates new crumb (empty ID)\n- [ ] Table.Get retrieves crumb by ID\n- [ ] Table.Set updates existing crumb\n- [ ] Table.Delete removes crumb\n- [ ] Table.Fetch queries with filter\n- [ ] Cupboard.Detach releases resources\n- [ ] All operations match documented behavior","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T11:10:44.690016-05:00","created_by":"petardjukic","updated_at":"2026-02-05T11:45:00.184564-05:00","closed_at":"2026-02-05T11:45:00.184564-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-1oe","depends_on_id":"crumbs-uoz","type":"parent-child","created_at":"2026-02-05T11:13:26.042599-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-1os","title":"Implement rel02.1-uc001 issue-tracking CLI commands","description":"## Required Reading\n- docs/specs/use-cases/rel02.1-uc001-issue-tracking-cli.yaml\n- docs/specs/test-suites/test-rel02.1-uc001-issue-tracking-cli.yaml\n- cmd/cupboard/crumb.go (existing crumb commands)\n- prd009-cupboard-cli.yaml (CLI requirements)\n\n## Files to Create/Modify\n- cmd/cupboard/issue.go (create - issue-tracking commands)\n- cmd/cupboard/main.go (register commands)\n\n## Requirements\n- cupboard create --type \u003ctype\u003e --title \u003ctitle\u003e --description \u003cdesc\u003e [--labels \u003clabels\u003e] [--json]: create crumb with properties\n- cupboard ready [--type \u003ctype\u003e] [--json]: list open crumbs (state=draft or ready)\n- cupboard show \u003cid\u003e: display crumb details (human-readable or JSON)\n- cupboard list [--json]: list all crumbs\n- cupboard update \u003cid\u003e --status \u003cstatus\u003e: update crumb state\n- cupboard close \u003cid\u003e: set crumb to pebble state\n- cupboard comments add \u003cid\u003e \u003ctext\u003e: add metadata comment\n- --json flag for machine-readable output\n- Validate inputs before calling library\n\n## Design Decisions\n- Issue commands wrap generic table operations with property setting\n- create sets type, description, labels properties\n- ready filters by state, optionally by type property\n- close calls crumb.Pebble() which requires taken state\n\n## Acceptance Criteria\n- [ ] All seven issue commands implemented\n- [ ] --json flag produces parseable output\n- [ ] Error messages are user-friendly\n- [ ] Commands match test suite expectations","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:11.59875-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:11.59875-05:00","dependencies":[{"issue_id":"crumbs-1os","depends_on_id":"crumbs-u67","type":"blocks","created_at":"2026-02-08T22:46:12.593598-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-1tx","title":"Add category CLI commands (define-category, get-categories)","description":"## Required Reading\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (S12-S15 test cases)\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R7, R8)\n- pkg/types/property.go (DefineCategory, GetCategories methods)\n- internal/sqlite/category.go (CategoryDefiner implementation)\n\n## Files to Create/Modify\n- cmd/cupboard/category.go (create - category CLI commands)\n- cmd/cupboard/main.go (register commands)\n\n## Requirements\n- cupboard define-category \u003cproperty-name\u003e \u003ccategory-name\u003e \u003cordinal\u003e: define a category\n- cupboard get-categories \u003cproperty-name\u003e [--json]: list categories for a property\n- Property name resolved to PropertyID via lookup\n- Validate property is categorical type (ErrInvalidValueType)\n- Validate category name is unique within property (ErrDuplicateName)\n- Categories ordered by ordinal ascending, then name ascending\n- Support negative ordinals\n\n## Design Decisions\n- Accept property name not PropertyID for user convenience\n- Output JSON for machine parsing, human-readable default\n- Error exit codes per existing CLI patterns\n\n## Acceptance Criteria\n- [ ] define-category creates category and returns JSON with CategoryID\n- [ ] get-categories lists categories in correct order\n- [ ] ErrInvalidValueType for non-categorical properties\n- [ ] ErrDuplicateName for duplicate category names","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:07:40.899278-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:07:40.899278-05:00"}
{"id":"crumbs-20e","title":"Implement property backfill on definition","description":"## Required Reading\n\n- docs/product-requirements/prd-properties-interface.md (R4.2-R4.5: backfill requirements)\n- docs/product-requirements/prd-crumbs-interface.md (R3.7: property initialization)\n- docs/use-cases/rel02.0-uc001-property-enforcement.md (use case flow and success criteria)\n- internal/sqlite/table.go (existing setProperty and initializeCrumbProperties)\n- internal/sqlite/backend.go (JSONL persistence patterns)\n\n## Files to Create/Modify\n\n- internal/sqlite/table.go (modify) - Add backfill logic to setProperty\n- internal/sqlite/table_test.go (create if needed) - Unit tests for backfill\n- internal/sqlite/integration_test.go (modify) - Add TestUC_PropertyEnforcement test\n\n## Requirements\n\n1. When Table.Set creates a new property (empty ID), backfill all existing crumbs with the property's type-based default value\n2. Backfill must be atomic with property creation: if backfill fails, property is not created\n3. Backfill must persist to both SQLite and JSONL (crumb_properties table/file)\n4. Use existing getPropertyDefaultValue function for default values\n5. Backfill must work correctly when no crumbs exist (no-op)\n\n## Design Decisions\n\n- Add backfill logic inside setProperty after the property is inserted into SQLite\n- Query all existing crumb IDs, then insert property values for each\n- Use a transaction to ensure atomicity (rollback if any backfill insert fails)\n- Follow existing JSONL persistence pattern from initializeCrumbProperties\n\n## Acceptance Criteria\n\n- [ ] Defining a new property initializes it on all existing crumbs with type-based default\n- [ ] Backfill uses correct default values per prd-properties-interface R3.5\n- [ ] If backfill fails mid-operation, the property is not created (atomic rollback)\n- [ ] Data is persisted to both crumb_properties SQLite table and crumb_properties.jsonl\n- [ ] Integration test validates the backfill behavior (create crumbs, define property, verify all have values)\n- [ ] Existing tests continue to pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T14:11:23.672083-05:00","created_by":"petardjukic","updated_at":"2026-02-05T14:21:36.900453-05:00","closed_at":"2026-02-05T14:21:36.900453-05:00","close_reason":"Closed","labels":["code"]}
{"id":"crumbs-3st","title":"Implement built-in property seeding on backend attach","description":"## Required Reading\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R9 built-in properties)\n- docs/specs/product-requirements/prd002-sqlite-backend.yaml (R9 seeding)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F1, F2)\n- internal/sqlite/backend.go (current implementation)\n- pkg/types/property.go (Property struct)\n\n## Files to Create/Modify\n- internal/sqlite/backend.go (add seeding logic in Attach)\n- internal/sqlite/backend_test.go (add tests for seeding)\n\n## Requirements\n- Seed five built-in properties on first startup when properties table is empty:\n  - priority (categorical) with categories: highest(0), high(1), medium(2), low(3), lowest(4)\n  - type (categorical) with categories: task(0), epic(1), bug(2), chore(3)\n  - description (text)\n  - owner (text)\n  - labels (list)\n- Seeding is idempotent: only runs when properties table is empty\n- Built-in categories are created with CategoryDefiner\n- Per R9.4: existing data is never modified by seeding\n\n## Design Decisions\n- Seeding runs during Attach after schema creation\n- Check if properties table has entries before seeding\n- Use Table.Set for properties and CategoryDefiner for categories\n\n## Acceptance Criteria\n- [ ] Fresh cupboard init produces 5 properties in properties.jsonl\n- [ ] Priority property has 5 categories in categories.jsonl\n- [ ] Type property has 4 categories in categories.jsonl\n- [ ] Second init does not duplicate properties\n- [ ] Unit tests verify seeding logic","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:10.375034-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:10.375034-05:00"}
{"id":"crumbs-3wg","title":"Implement test002 Go tests (JSONL git roundtrip)","description":"## Required Reading\n- docs/test-suites/test002-jsonl-git-roundtrip.yaml (23 test cases)\n- docs/use-cases/rel01.1-uc002-jsonl-git-roundtrip.md\n- docs/product-requirements/prd-sqlite-backend.md (R1, R4, R5)\n- docs/engineering/eng01-git-integration.md\n- tests/integration/testutil.go\n\n## Files to Create\n- tests/integration/test002_jsonl_git_roundtrip_test.go\n\n## Requirements\n- Implement all 23 test cases from test002-jsonl-git-roundtrip.yaml as table-driven Go tests\n- Use testutil.go for shared infrastructure (NewTestEnv, RunCupboard)\n- Test groups: JSONL file creation, content correctness, database deletion and rebuild, queries after rebuild, empty cupboard rebuild, git integration simulation, full roundtrip workflow\n- Initialize temp directory as git repo for git integration tests\n- Delete cupboard.db and verify data survives via JSONL reload\n\n## Design Decisions\n- Table-driven pattern per test-case-format.md\n- One TestXxx function per test group in the YAML\n- Use os.Remove for database deletion, then re-run cupboard commands to trigger rebuild\n\n## Acceptance Criteria\n- [ ] File named test002_jsonl_git_roundtrip_test.go\n- [ ] All 23 YAML test cases implemented as table rows\n- [ ] All tests pass\n- [ ] Traces to rel01.1-uc002-jsonl-git-roundtrip","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:13:46.330698-05:00","created_by":"petardjukic","updated_at":"2026-02-07T00:46:14.061809-05:00","closed_at":"2026-02-07T00:46:14.061809-05:00","close_reason":"Closed"}
{"id":"crumbs-40d","title":"Implement property backfill on property definition","description":"## Required Reading\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R4.2, R4.3 backfill)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F7, F8)\n- internal/sqlite/table.go (properties table Set implementation)\n- internal/sqlite/backend.go (transaction handling)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (modify properties Set to backfill crumbs)\n- internal/sqlite/backend_integration_test.go (add backfill tests)\n\n## Requirements\n- When Table.Set creates a new property (id empty), backfill all existing crumbs with the default value\n- Per R4.3: backfill is atomic with property creation (transaction)\n- If backfill fails, property creation fails and rolls back\n- Get default value based on property's ValueType (same logic as auto-init)\n- Update each crumb's Properties map and persist\n\n## Design Decisions\n- Backfill runs in same transaction as property creation\n- Fetch all crumbs, update each, persist each\n- Reuse default value logic from property_defaults.go\n\n## Acceptance Criteria\n- [ ] Creating a property backfills all existing crumbs\n- [ ] Crumbs created before property definition have the new property\n- [ ] Backfill uses correct default value per type\n- [ ] Rollback on partial failure\n- [ ] Integration tests verify backfill","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:41.231118-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:41.231118-05:00","dependencies":[{"issue_id":"crumbs-40d","depends_on_id":"crumbs-bfp","type":"blocks","created_at":"2026-02-08T22:53:42.919214-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-41d","title":"Add property CLI commands (set-property, get-property, clear-property, get-properties)","description":"## Required Reading\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (S3, S4, S6, S7 test cases)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F5, F6, F11)\n- cmd/cupboard/crumb.go (existing crumb subcommand pattern)\n- prd003-crumbs-interface.yaml (R5 property methods)\n\n## Files to Create/Modify\n- cmd/cupboard/property.go (create - property CLI commands)\n- cmd/cupboard/main.go (register commands)\n\n## Requirements\n- cupboard set-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e \u003cvalue\u003e: set property value on entity\n- cupboard get-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e: get single property value\n- cupboard get-properties \u003ctable\u003e \u003cid\u003e: get all properties as JSON\n- cupboard clear-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e: reset property to default\n- Property name resolved to PropertyID via lookup\n- Validate value matches property type (text, integer, list as JSON, etc.)\n- Error messages for invalid property names, type mismatches\n\n## Design Decisions\n- Commands work on crumbs table initially (trail/stash properties future)\n- Accept property name (human readable) not PropertyID\n- List values as JSON array for list type\n\n## Acceptance Criteria\n- [ ] set-property updates property and persists\n- [ ] get-property returns current value\n- [ ] get-properties returns all properties as JSON object\n- [ ] clear-property resets to default\n- [ ] Appropriate error messages for validation failures","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:07:40.758665-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:07:40.758665-05:00"}
{"id":"crumbs-4fc","title":"Rationalize scripts into magefiles (cobbler terminology)","description":"Move all bash scripts from scripts/ into magefiles/ as Go mage targets. Adopt cobbler terminology: measure (replaces make-work), stitch (replaces do-work), generate (orchestrates cycles). One concern per file. Split existing magefile.go into build.go, test.go, lint.go, stats.go. Update documentation, commands, and rules to reflect new structure and terminology.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T16:52:39.057307-05:00","created_by":"petardjukic","updated_at":"2026-02-08T17:15:27.3869-05:00","closed_at":"2026-02-08T17:15:27.3869-05:00","close_reason":"Closed","labels":["infrastructure","refactor"]}
{"id":"crumbs-4fc.1","title":"Split magefile.go into build.go, test.go, lint.go, stats.go","description":"## Required Reading\n- magefiles/magefile.go (current monolithic build file)\n- scripts/stats.sh (duplicate of Stats function)\n\n## Files to Create/Modify\n- magefiles/build.go (create) - Build, Clean, Install + constants (binaryName, binaryDir, cmdDir)\n- magefiles/test.go (create) - Test, TestUnit, TestIntegration\n- magefiles/lint.go (create) - Lint\n- magefiles/stats.go (create) - Stats, countLines, countWordsInGlob, countWordsInFile\n- magefiles/magefile.go (delete)\n- scripts/stats.sh (delete)\n\n## Requirements\n- Split magefile.go into four files, one per concern\n- All existing mage targets must continue to work identically\n- Package remains main (magefiles convention)\n- Shared constants go in build.go\n- stats.sh is redundant with the Go Stats function; remove it\n\n## Acceptance Criteria\n- [ ] mage build, mage clean, mage install all work\n- [ ] mage test, mage testUnit, mage testIntegration all work\n- [ ] mage lint works\n- [ ] mage stats produces identical JSON output\n- [ ] magefile.go deleted\n- [ ] scripts/stats.sh deleted","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T16:52:52.980612-05:00","created_by":"petardjukic","updated_at":"2026-02-08T17:02:31.915775-05:00","closed_at":"2026-02-08T17:02:31.915775-05:00","close_reason":"Closed","labels":["infrastructure"],"dependencies":[{"issue_id":"crumbs-4fc.1","depends_on_id":"crumbs-4fc","type":"parent-child","created_at":"2026-02-08T16:52:52.982313-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4fc.2","title":"Port make-work.sh to measure.go (cobbler: measure)","description":"## Required Reading\n- scripts/make-work.sh (395 lines, current implementation)\n- magefiles/build.go (for mage conventions after task 1)\n- .claude/rules/beads-workflow.md (bd CLI usage)\n- .claude/commands/make-work.md (make-work command definition)\n\n## Files to Create/Modify\n- magefiles/measure.go (create) - Measure mage target\n\n## Requirements\n- Implement mage measure in Go, replacing make-work.sh\n- Query existing issues via bd list --json\n- Build prompt with project context (VISION, ARCHITECTURE, road-map, specs, existing issues)\n- Invoke Claude CLI with assembled prompt\n- Capture proposed issues as JSON to docs/proposed-issues-TIMESTAMP.json\n- Auto-import into beads: create epics first, then tasks linked to parent epics\n- Support options via env vars or mage arguments: silence mode, issue limit, no-import mode, custom prompt text\n- Shell out to claude and bd commands as needed\n\n## Design Decisions\n- Use os/exec for claude and bd invocations\n- Use Go templates or string builders for prompt assembly (not string concatenation)\n- Parse Claude JSON output with encoding/json\n\n## Acceptance Criteria\n- [ ] mage measure produces issue proposals identical to make-work.sh\n- [ ] Import into bd works (epics first, then child tasks)\n- [ ] Proposed issues written to docs/proposed-issues-TIMESTAMP.json\n- [ ] scripts/make-work.sh deleted","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T16:53:05.368939-05:00","created_by":"petardjukic","updated_at":"2026-02-08T17:09:08.779033-05:00","closed_at":"2026-02-08T17:09:08.779033-05:00","close_reason":"Closed","labels":["infrastructure"],"dependencies":[{"issue_id":"crumbs-4fc.2","depends_on_id":"crumbs-4fc","type":"parent-child","created_at":"2026-02-08T16:53:05.37212-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-4fc.2","depends_on_id":"crumbs-4fc.1","type":"blocks","created_at":"2026-02-08T16:53:05.374221-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4fc.3","title":"Port do-work.sh to stitch.go (cobbler: stitch)","description":"## Required Reading\n- scripts/do-work.sh (288 lines, current implementation)\n- magefiles/build.go (for mage conventions after task 1)\n- .claude/rules/beads-workflow.md (bd CLI usage)\n- .claude/commands/do-work.md (do-work command definition)\n\n## Files to Create/Modify\n- magefiles/stitch.go (create) - Stitch mage target\n\n## Requirements\n- Implement mage stitch in Go, replacing do-work.sh\n- Recovery: detect and clean stale task branches, reset orphaned in_progress issues\n- Pick ready tasks from bd ready\n- Create git worktrees for isolated task execution (/tmp/PROJECT-worktrees/ISSUE_ID)\n- Task branch naming: BASE_BRANCH/task/ISSUE_ID\n- Invoke Claude in the worktree with task description\n- Merge branch back to base after completion\n- Close issue via bd and commit changes\n- Loop until no ready tasks remain\n- Support silence mode via env var\n\n## Design Decisions\n- Use os/exec for git, claude, and bd invocations\n- Parse bd output with encoding/json\n- Worktree directory under /tmp\n\n## Acceptance Criteria\n- [ ] mage stitch picks and executes tasks identically to do-work.sh\n- [ ] Git worktree lifecycle (create, work, merge, cleanup) works\n- [ ] Recovery cleans stale branches and orphaned issues\n- [ ] Issues closed via bd after successful completion\n- [ ] scripts/do-work.sh deleted","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T16:53:22.582807-05:00","created_by":"petardjukic","updated_at":"2026-02-08T17:11:05.786657-05:00","closed_at":"2026-02-08T17:11:05.786657-05:00","close_reason":"Closed","labels":["infrastructure"],"dependencies":[{"issue_id":"crumbs-4fc.3","depends_on_id":"crumbs-4fc","type":"parent-child","created_at":"2026-02-08T16:53:22.584539-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-4fc.3","depends_on_id":"crumbs-4fc.1","type":"blocks","created_at":"2026-02-08T16:53:22.58691-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4fc.4","title":"Port generation scripts to generate.go (cobbler: generate)","description":"## Required Reading\n- scripts/generate.sh (88 lines, orchestrates measure+stitch cycles)\n- scripts/open-generation.sh (80 lines, starts a generation session)\n- scripts/close-generation.sh (91 lines, finishes a generation session)\n- magefiles/measure.go (measure target, from task 2)\n- magefiles/stitch.go (stitch target, from task 3)\n\n## Files to Create/Modify\n- magefiles/generate.go (create) - Generate, OpenGeneration, CloseGeneration targets\n\n## Requirements\n### Generate\n- Implement mage generate in Go, replacing generate.sh\n- Run N cycles of Measure + Stitch\n- Configurable cycles and issue limit per cycle\n- Support silence mode\n\n### OpenGeneration\n- Implement mage openGeneration in Go, replacing open-generation.sh\n- Tag current main state as generation-YYYY-MM-DD-HH-MM\n- Create and checkout generation branch\n- Delete all Go source files, remove empty dirs\n- Remove build artifacts and go.sum\n- Reinitialize Go module\n- Commit clean state\n- Precondition: must be on main, no existing generation-* branches\n\n### CloseGeneration\n- Implement mage closeGeneration in Go, replacing close-generation.sh\n- Tag generation branch as generation-*-closed\n- Switch to main, delete Go code from main (preserve docs)\n- Reinitialize Go module on main, commit\n- Merge generation branch into main\n- Tag main as generation-*-merged\n- Delete generation branch\n- Precondition: must be on a generation-* branch\n\n## Acceptance Criteria\n- [ ] mage generate runs measure+stitch cycles\n- [ ] mage openGeneration reproduces open-generation.sh behavior\n- [ ] mage closeGeneration reproduces close-generation.sh behavior\n- [ ] All three scripts deleted","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T16:53:33.306985-05:00","created_by":"petardjukic","updated_at":"2026-02-08T17:12:27.095736-05:00","closed_at":"2026-02-08T17:12:27.095736-05:00","close_reason":"Closed","labels":["infrastructure"],"dependencies":[{"issue_id":"crumbs-4fc.4","depends_on_id":"crumbs-4fc","type":"parent-child","created_at":"2026-02-08T16:53:33.308413-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-4fc.4","depends_on_id":"crumbs-4fc.2","type":"blocks","created_at":"2026-02-08T16:53:33.310521-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-4fc.4","depends_on_id":"crumbs-4fc.3","type":"blocks","created_at":"2026-02-08T16:53:33.311815-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4fc.5","title":"Remove scripts/ directory","description":"## Required Reading\n- scripts/ (all files should be ported to magefiles/ by now)\n\n## Files to Create/Modify\n- scripts/ (delete entire directory)\n\n## Requirements\n- Verify all scripts have been ported to magefiles/\n- Delete the scripts/ directory entirely\n- Verify no broken references remain in the codebase\n\n## Acceptance Criteria\n- [ ] scripts/ directory deleted\n- [ ] No files reference scripts/ paths (except historical git commits)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T16:53:39.703678-05:00","created_by":"petardjukic","updated_at":"2026-02-08T17:13:03.835576-05:00","closed_at":"2026-02-08T17:13:03.835576-05:00","close_reason":"Closed","labels":["infrastructure"],"dependencies":[{"issue_id":"crumbs-4fc.5","depends_on_id":"crumbs-4fc","type":"parent-child","created_at":"2026-02-08T16:53:39.706097-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-4fc.5","depends_on_id":"crumbs-4fc.4","type":"blocks","created_at":"2026-02-08T16:53:39.709709-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4fc.6","title":"Update docs, commands, and rules for cobbler terminology","description":"## Required Reading\n- .claude/rules/beads-workflow.md (references ./scripts/stats.sh)\n- .claude/commands/make-work.md (make-work command)\n- .claude/commands/do-work.md (do-work command)\n- .claude/commands/do-work-code.md (do-work-code command)\n- .claude/commands/do-work-docs.md (do-work-docs command)\n- docs/ARCHITECTURE.md (may reference scripts)\n- docs/VISION.md (may reference scripts)\n\n## Files to Create/Modify\n- .claude/rules/beads-workflow.md (update) - Change ./scripts/stats.sh references to mage stats\n- .claude/commands/ (update) - Rename or update make-work/do-work commands to use cobbler terminology (measure/stitch)\n- Any docs referencing scripts/ or make-work/do-work terminology\n\n## Requirements\n- Update all references from scripts/stats.sh to mage stats\n- Update all references from scripts/make-work.sh to mage measure\n- Update all references from scripts/do-work.sh to mage stitch\n- Update all references from scripts/generate.sh to mage generate\n- Update all references from scripts/open-generation.sh to mage openGeneration\n- Update all references from scripts/close-generation.sh to mage closeGeneration\n- Update .claude/commands/ to reflect cobbler terminology where appropriate\n- Ensure beads-workflow.md uses mage stats instead of ./scripts/stats.sh\n\n## Acceptance Criteria\n- [ ] No references to scripts/ remain in .claude/ or docs/\n- [ ] beads-workflow.md references mage stats\n- [ ] Commands updated with cobbler terminology\n- [ ] All documentation consistent with new mage target names","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T16:53:48.639303-05:00","created_by":"petardjukic","updated_at":"2026-02-08T17:15:24.378107-05:00","closed_at":"2026-02-08T17:15:24.378107-05:00","close_reason":"Closed","labels":["documentation","infrastructure"],"dependencies":[{"issue_id":"crumbs-4fc.6","depends_on_id":"crumbs-4fc","type":"parent-child","created_at":"2026-02-08T16:53:48.641101-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-4fc.6","depends_on_id":"crumbs-4fc.5","type":"blocks","created_at":"2026-02-08T16:53:48.644497-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4gt","title":"Fix integration tests and remove dead backend code","description":"## Required Reading\n- tests/integration/testutil.go (broken --config flag)\n- cmd/cupboard/config.go (DoltConfig/DynamoDBConfig dead code)\n- cmd/cupboard/main.go (CLI flag definitions)\n- pkg/types/cupboard.go (Config struct)\n\n## Files to Modify\n- tests/integration/testutil.go - fix CLI flag usage\n- cmd/cupboard/config.go - remove Dolt/DynamoDB parsing\n- pkg/types/cupboard.go - remove DoltConfig/DynamoDBConfig structs if present\n\n## Requirements\n1. Update testutil.go to use --config-dir and --data-dir flags instead of --config\n2. Write config as config.yaml inside a directory, not .crumbs.yaml as a file path\n3. Remove DoltConfig and DynamoDBConfig parsing from config.go (lines 82-97)\n4. Remove DoltConfig and DynamoDBConfig structs from pkg/types if they exist\n5. Remove Dolt/DynamoDB references from writeDefaultConfig template\n\n## Acceptance Criteria\n- [ ] All 11 integration tests pass\n- [ ] Unit tests still pass\n- [ ] No DoltConfig or DynamoDBConfig references in code\n- [ ] go build ./... succeeds","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:38:08.628531-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:43:02.11222-05:00","closed_at":"2026-02-06T22:43:02.11222-05:00","close_reason":"Closed"}
{"id":"crumbs-4tk","title":"Restructure roadmap: trails and self-hosting","description":"Restructure the roadmap to support incremental self-hosting and trail-based workflows.\n\n## Goals\n1. Move self-hosting earlier (rel01.1) with flat crumbs only (no properties, no trails)\n2. Add trail-crumb lifecycle use case to rel03.0\n3. Add self-hosting-with-epics use case as rel03.1\n4. Update engineering guidelines for with/without trails workflows\n5. Update road-map.yaml with new use cases and new rel03.1 release\n\n## Context\n- rel03.0-uc001-trail-exploration already covers trail lifecycle (create, complete, abandon)\n- rel02.1-uc003-self-hosting (done) validates self-hosting WITH properties\n- New flat self-hosting validates minimum viable path without properties or trails\n- Trail-crumb lifecycle focuses on how trail state controls crumb lifecycle\n- Self-hosting-with-epics uses trails as epic equivalents\n\n## Acceptance Criteria\n- [ ] rel01.1-uc005-flat-self-hosting use case + test suite created\n- [ ] rel03.0-uc004-trail-crumb-lifecycle use case + test suite created\n- [ ] rel03.1-uc001-self-hosting-with-epics use case + test suite created\n- [ ] eng03-cupboard-cli.md updated with with/without trails sections\n- [ ] road-map.yaml updated with new use cases and rel03.1 release\n- [ ] SPECIFICATIONS.md regenerated","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T23:16:12.090565-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:59.629113-05:00","closed_at":"2026-02-08T09:27:59.629113-05:00","close_reason":"Closed"}
{"id":"crumbs-4tk.1","title":"Create use case: rel01.1-uc005-flat-self-hosting","description":"## Required Reading\n- docs/use-cases/rel02.1-uc003-self-hosting.yaml (existing self-hosting, reference for scope)\n- docs/engineering/eng03-cupboard-cli.md (CLI command reference)\n- docs/ARCHITECTURE.md § System Components\n- .claude/rules/use-case-format.md\n- .claude/rules/test-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/rel01.1-uc005-flat-self-hosting.yaml (create)\n- docs/test-suites/test-rel01.1-uc005-flat-self-hosting.yaml (create)\n- docs/road-map.yaml (add entry to rel01.1)\n\n## Requirements\n- Use case for self-hosting with flat crumbs only (no properties, no trails, no epics)\n- Validates cupboard can replace beads for simple issue tracking using core storage layer\n- Flow: create crumbs, list, update status, close, add comments — all via CLI\n- No dependency on property system (rel02.0) or trail system (rel03.0)\n- Only depends on rel01.0 features (Cupboard, Table, Crumb, CLI)\n- Follow use-case-format and test-case-format rules\n\n## Design Decisions\n- Goes in rel01.1 (minor release validating rel01.0 core storage)\n- Subset of rel02.1-uc003-self-hosting: same workflow but without properties\n- Scripts (do-work.sh, make-work.sh) use generic table commands and crumb commands only\n\n## Acceptance Criteria\n- [ ] Use case YAML created at docs/use-cases/rel01.1-uc005-flat-self-hosting.yaml\n- [ ] Test suite YAML created at docs/test-suites/test-rel01.1-uc005-flat-self-hosting.yaml\n- [ ] Use case added to rel01.1 in docs/road-map.yaml\n- [ ] All required sections present per use-case-format\n- [ ] Test suite traces back to use case\n- [ ] No dependency on properties or trails","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T23:16:33.104737-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:58.775755-05:00","closed_at":"2026-02-08T09:27:58.775755-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-4tk.1","depends_on_id":"crumbs-4tk","type":"parent-child","created_at":"2026-02-07T23:16:33.106681-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4tk.2","title":"Create use case: rel03.0-uc004-trail-crumb-lifecycle","description":"## Required Reading\n- docs/use-cases/rel03.0-uc001-trail-exploration.yaml (related trail use case)\n- docs/product-requirements/prd-trails-interface.yaml (trail entity spec)\n- docs/product-requirements/prd-links-interface.yaml (belongs_to links)\n- docs/ARCHITECTURE.md § System Components\n- .claude/rules/use-case-format.md\n- .claude/rules/test-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/rel03.0-uc004-trail-crumb-lifecycle.yaml (create)\n- docs/test-suites/test-rel03.0-uc004-trail-crumb-lifecycle.yaml (create)\n- docs/road-map.yaml (add entry to rel03.0)\n\n## Requirements\n- Use case for trail-crumb relationships and lifecycle control\n- Distinct from rel03.0-uc001-trail-exploration (which focuses on exploratory branching)\n- This use case focuses on:\n  - Trail as a container for crumbs (via belongs_to links)\n  - Trail completion makes crumbs permanent (removes links, crumbs stay)\n  - Trail abandonment cascades to crumbs (deletes crumbs atomically)\n  - Querying crumbs by trail membership\n  - State transitions: how trail state affects crumb accessibility\n- Follow use-case-format and test-case-format rules\n\n## Design Decisions\n- Goes in rel03.0 (Trails and Stashes) alongside trail-exploration\n- Complements uc001 (exploration) by focusing on lifecycle control semantics\n- Trail acts as parent/container; trail lifecycle drives crumb lifecycle\n\n## Acceptance Criteria\n- [ ] Use case YAML created at docs/use-cases/rel03.0-uc004-trail-crumb-lifecycle.yaml\n- [ ] Test suite YAML created at docs/test-suites/test-rel03.0-uc004-trail-crumb-lifecycle.yaml\n- [ ] Use case added to rel03.0 in docs/road-map.yaml\n- [ ] All required sections present per use-case-format\n- [ ] Test suite traces back to use case\n- [ ] Clear distinction from rel03.0-uc001-trail-exploration","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T23:16:41.665029-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:58.938778-05:00","closed_at":"2026-02-08T09:27:58.938778-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-4tk.2","depends_on_id":"crumbs-4tk","type":"parent-child","created_at":"2026-02-07T23:16:41.667411-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4tk.3","title":"Create use case: rel03.1-uc001-self-hosting-with-epics","description":"## Required Reading\n- docs/use-cases/rel02.1-uc003-self-hosting.yaml (existing self-hosting)\n- docs/use-cases/rel01.1-uc005-flat-self-hosting.yaml (flat self-hosting, once created)\n- docs/use-cases/rel03.0-uc001-trail-exploration.yaml (trail lifecycle)\n- docs/use-cases/rel03.0-uc004-trail-crumb-lifecycle.yaml (trail-crumb lifecycle, once created)\n- docs/engineering/eng03-cupboard-cli.md (CLI reference)\n- .claude/rules/use-case-format.md\n- .claude/rules/test-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/rel03.1-uc001-self-hosting-with-epics.yaml (create)\n- docs/test-suites/test-rel03.1-uc001-self-hosting-with-epics.yaml (create)\n- docs/road-map.yaml (create rel03.1 release and add entry)\n\n## Requirements\n- Use case for self-hosting using trails as epic equivalents\n- An agent creates a trail to group related tasks (like bd epics)\n- Crumbs belong to trails via belongs_to links\n- Trail lifecycle controls grouped work (complete trail = finalize tasks, abandon = discard)\n- Validates full-featured self-hosting replacing beads epics\n- Depends on trail lifecycle (rel03.0) and flat or property-based self-hosting\n- Follow use-case-format and test-case-format rules\n\n## Design Decisions\n- Goes in rel03.1 (new minor release validating rel03.0)\n- rel03.1 name: \"Post-Trails Validation\"\n- Depends on rel03.0 (trails) and rel01.1 or rel02.1 (self-hosting foundation)\n- Flow: create trail (epic), add crumbs (tasks), manage grouped work, complete/abandon trail\n\n## Acceptance Criteria\n- [ ] Use case YAML created at docs/use-cases/rel03.1-uc001-self-hosting-with-epics.yaml\n- [ ] Test suite YAML created at docs/test-suites/test-rel03.1-uc001-self-hosting-with-epics.yaml\n- [ ] rel03.1 release created in docs/road-map.yaml\n- [ ] All required sections present per use-case-format\n- [ ] Test suite traces back to use case\n- [ ] Trail-as-epic workflow clearly described in flow steps","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T23:16:50.508471-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:59.095375-05:00","closed_at":"2026-02-08T09:27:59.095375-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-4tk.3","depends_on_id":"crumbs-4tk","type":"parent-child","created_at":"2026-02-07T23:16:50.512115-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4tk.4","title":"Update eng03-cupboard-cli.md: with/without trails workflows","description":"## Required Reading\n- docs/engineering/eng03-cupboard-cli.md (current CLI guide)\n- docs/use-cases/rel01.1-uc005-flat-self-hosting.yaml (flat workflow, once created)\n- docs/use-cases/rel03.1-uc001-self-hosting-with-epics.yaml (epic workflow, once created)\n- docs/use-cases/rel03.0-uc001-trail-exploration.yaml (trail lifecycle)\n- .claude/rules/engineering-guideline-format.md\n- .claude/rules/documentation-standards.md\n\n## Files to Create/Modify\n- docs/engineering/eng03-cupboard-cli.md (modify)\n\n## Requirements\n- Add a section covering two workflow modes:\n  - Without trails: flat crumb tracking (create, update, close). Simple task lists. No epic grouping.\n  - With trails: trails as epic equivalents. Group related crumbs under a trail. Trail completion/abandonment controls crumb lifecycle.\n- Include concrete CLI examples for both modes\n- Explain when to use each mode\n- Follow engineering-guideline-format and documentation-standards\n\n## Acceptance Criteria\n- [ ] New section added to eng03-cupboard-cli.md\n- [ ] Without-trails workflow described with CLI examples\n- [ ] With-trails workflow described with CLI examples\n- [ ] Clear guidance on when to use each mode\n- [ ] Follows documentation-standards (active voice, no forbidden terms)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T23:16:57.498153-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:59.251031-05:00","closed_at":"2026-02-08T09:27:59.251031-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-4tk.4","depends_on_id":"crumbs-4tk","type":"parent-child","created_at":"2026-02-07T23:16:57.499717-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-4tk.5","title":"Update road-map.yaml and regenerate SPECIFICATIONS.md","description":"## Required Reading\n- docs/road-map.yaml (current roadmap)\n- docs/SPECIFICATIONS.md (current specifications)\n- .claude/rules/specification-format.md\n\n## Files to Create/Modify\n- docs/road-map.yaml (modify: add new use cases, create rel03.1)\n- docs/SPECIFICATIONS.md (regenerate from all sources)\n\n## Requirements\n- Add rel01.1-uc005-flat-self-hosting to rel01.1 in road-map.yaml\n- Add rel03.0-uc004-trail-crumb-lifecycle to rel03.0 in road-map.yaml\n- Create rel03.1 release (Post-Trails Validation) with rel03.1-uc001-self-hosting-with-epics\n- Regenerate SPECIFICATIONS.md to reflect all new use cases, test suites, and roadmap changes\n- Follow specification-format rule\n\n## Design Decisions\n- rel03.1 goes after rel03.0 and before rel99.0\n- rel03.1 description: \"Validate trail-based workflows with self-hosting. Requires trails (rel03.0).\"\n- rel03.1 done_when: \"cupboard tracks crumbs development with trails as epic equivalents\"\n\n## Acceptance Criteria\n- [ ] road-map.yaml has rel01.1-uc005 entry\n- [ ] road-map.yaml has rel03.0-uc004 entry\n- [ ] road-map.yaml has rel03.1 release with uc001\n- [ ] SPECIFICATIONS.md regenerated with all new artifacts\n- [ ] Roadmap Summary, Use Case Index, Test Suite Index, PRD-to-Use-Case Mapping all updated\n- [ ] Traceability diagram includes new use cases\n- [ ] Coverage Gaps section updated","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T23:17:07.746852-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:59.405759-05:00","closed_at":"2026-02-08T09:27:59.405759-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-4tk.5","depends_on_id":"crumbs-4tk","type":"parent-child","created_at":"2026-02-07T23:17:07.748375-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-566","title":"Rename and restructure cli_test.go to match test001 format","description":"## Required Reading\n- docs/test-suites/test001-self-hosting.yaml\n- .claude/rules/test-case-format.md (Implementation Layout section)\n- tests/integration/cli_test.go\n- tests/integration/testutil.go\n\n## Files to Modify\n- tests/integration/cli_test.go → tests/integration/test001_self_hosting_test.go (rename)\n\n## Requirements\n- Rename cli_test.go to test001_self_hosting_test.go per naming convention\n- Restructure into table-driven tests matching the 24 test cases in test001-self-hosting.yaml\n- Keep testutil.go as shared infrastructure (no changes)\n- Each YAML test case maps to one row in the Go test table\n- Tests that cover trails, links, archive (Test5-Test9) do NOT belong in test001; leave them in place for Task 2 to extract\n\n## Design Decisions\n- Use table-driven pattern from test-case-format.md example\n- Group test cases by operation (create, list, show, update, close, ready, comments)\n- Each group is one TestXxx function with a table\n\n## Acceptance Criteria\n- [ ] File named test001_self_hosting_test.go\n- [ ] Table-driven pattern with one row per YAML test case\n- [ ] All 24 test cases from test001-self-hosting.yaml represented\n- [ ] All tests pass (go test ./tests/integration/...)\n- [ ] Tests that don't belong to test001 (trails, links, archive) remain untouched for separate extraction","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:13:22.788062-05:00","created_by":"petardjukic","updated_at":"2026-02-07T00:39:33.012072-05:00","closed_at":"2026-02-07T00:39:33.012072-05:00","close_reason":"Closed"}
{"id":"crumbs-5f2","title":"Implement configuration directory structure (prd-configuration-directories)","description":"## Required Reading\n- docs/product-requirements/prd-configuration-directories.md (this PRD - full spec)\n- docs/product-requirements/prd-cupboard-core.md (Config struct, Attach)\n- docs/product-requirements/prd-sqlite-backend.md (current JSON handling)\n- docs/use-cases/uc003-configuration.md (validation use case)\n- internal/sqlite/json.go (current JSON persistence)\n\n## Files to Create/Modify\n- pkg/types/config.go (modify) - update Config struct per R8\n- internal/sqlite/jsonl.go (create) - JSONL read/write utilities\n- internal/sqlite/jsonl_test.go (create) - JSONL tests\n- internal/sqlite/backend.go (modify) - update Attach for JSONL, new startup sequence\n- internal/sqlite/table.go (modify) - update Set/Delete for JSONL persistence\n- cmd/cupboard/config.go (create) - CLI config loading with platform paths\n- cmd/cupboard/root.go (modify) - integrate config loading\n\n## Requirements\n\n### Phase 1: JSONL Format (R3, R4)\n- Implement JSONL reader: read file line by line, parse each line as JSON, skip empty lines\n- Implement JSONL writer: atomic write pattern (write .tmp, fsync, rename)\n- Update file extensions from .json to .jsonl\n- Handle malformed lines: log warning with file/line/error, continue\n\n### Phase 2: Directory Structure (R1, R2)\n- Implement platform-specific config directory paths (XDG, Application Support, AppData)\n- Implement platform-specific data directory paths\n- Override precedence: flag \u003e env \u003e config.yaml \u003e platform default\n- Create directories if they don't exist\n\n### Phase 3: Startup Sequence (R5)\n- Delete cupboard.db on attach (ephemeral cache)\n- Create empty JSONL files if missing\n- Load each JSONL into SQLite line by line\n- Log warnings for malformed lines, continue with valid records\n\n### Phase 4: Write Operations (R6)\n- Persist to JSONL immediately after SQLite commit\n- Rewrite entire file for updates/deletes (read-modify-write)\n- Append-only for stash_history.jsonl\n- Use atomic write pattern\n\n### Phase 5: CLI Config (R7)\n- Load config.yaml from config directory\n- Use defaults if config.yaml missing\n- Create config.yaml on first write (e.g., `crumbs config set`)\n\n## Design Decisions\n- JSONL files not pretty-printed (one record per line)\n- SQLite database is ephemeral, regenerated from JSONL on startup\n- Atomic writes prevent corruption on crash\n- Platform paths follow OS conventions\n\n## Acceptance Criteria\n- [ ] JSONL read/write utilities implemented with tests\n- [ ] Atomic write pattern implemented (tmp file, fsync, rename)\n- [ ] Backend startup loads JSONL files line by line\n- [ ] Malformed lines logged and skipped\n- [ ] Platform-specific config paths work on macOS (primary dev platform)\n- [ ] Config.yaml loading implemented with precedence rules\n- [ ] Set/Delete operations persist to JSONL\n- [ ] uc003-configuration use case passes\n- [ ] Existing tests continue to pass (with format migration)","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T11:12:03.988193-05:00","created_by":"petardjukic","updated_at":"2026-02-05T11:21:48.436598-05:00","closed_at":"2026-02-05T11:21:48.436598-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5f2","depends_on_id":"crumbs-uoz","type":"parent-child","created_at":"2026-02-05T11:13:25.595016-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-5wm","title":"CRUD Use Case and Property Enforcement","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:37:50.317729-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:55:45.777368-05:00","closed_at":"2026-02-04T11:55:45.777368-05:00","close_reason":"Closed"}
{"id":"crumbs-5wm.1","title":"PRD Update: Property Default Values","description":"## Required Reading\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-crumbs-interface.md\n\n## Files to Create/Modify\n- docs/product-requirements/prd-properties-interface.md (modify)\n\n## Requirements\nAdd type-based default values for properties:\n- When a property is defined, specify what the default value is for each type\n- categorical: null (or first category if categories exist)\n- text: \"\" (empty string)\n- integer: 0\n- boolean: false\n- timestamp: null\n- list: [] (empty list)\n\nAdd requirement that when a new property is defined, all existing crumbs receive that property with its default value.\n\n## Acceptance Criteria\n- [ ] Default values documented for each value type\n- [ ] R4 (Define) updated to specify backfill of existing crumbs\n- [ ] File saved","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:37:58.298176-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:46:16.700263-05:00","closed_at":"2026-02-04T11:46:16.700263-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.1","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:37:58.299689-05:00","created_by":"petardjukic"}],"comments":[{"id":8,"issue_id":"crumbs-5wm.1","author":"petardjukic","text":"tokens: 25000","created_at":"2026-02-04T16:46:16Z"}]}
{"id":"crumbs-5wm.2","title":"PRD Update: Crumb Property Auto-Initialization","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-properties-interface.md (after update)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-crumbs-interface.md (modify)\n\n## Requirements\nUpdate R3 (Add operation) to specify that when a crumb is created:\n- All defined properties are automatically initialized with their type-based default values\n- The crumb has a value for every property (no property is ever \"not set\" for a crumb)\n\nUpdate R11 (GetProperties) to reflect that it always returns all properties (never empty unless no properties are defined).\n\n## Acceptance Criteria\n- [ ] R3 updated to specify property auto-initialization on Add\n- [ ] R11 updated to reflect complete property coverage\n- [ ] File saved","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:38:04.962015-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:54:26.475047-05:00","closed_at":"2026-02-04T11:54:26.475047-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.2","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:38:04.964199-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.2","depends_on_id":"crumbs-5wm.1","type":"blocks","created_at":"2026-02-04T11:38:20.448159-05:00","created_by":"petardjukic"}],"comments":[{"id":9,"issue_id":"crumbs-5wm.2","author":"petardjukic","text":"tokens: 8000","created_at":"2026-02-04T16:54:26Z"}]}
{"id":"crumbs-5wm.3","title":"Use Case: CRUD Operations Demo","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-sqlite-backend.md\n- .claude/rules/use-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/uc-crud-operations.md (create)\n\n## Summary\nEnd-to-end use case demonstrating:\n1. Create SQLite database (OpenCupboard)\n2. Add crumbs with various states\n3. Change crumb states\n4. Archive crumbs\n5. Create new properties\n6. Add/Change/Delete property values\n7. Verify property enforcement (all crumbs have all properties)\n8. Delete database (Close + remove DataDir)\n\n## Format\nFollow use-case-format rule:\n- Summary\n- Actor and trigger\n- Flow (numbered steps)\n- Architecture touchpoints\n- Success/demo criteria\n- Out of scope\n\n## Acceptance Criteria\n- [ ] All required sections present per use-case-format\n- [ ] Flow covers all CRUD operations\n- [ ] Architecture touchpoints list interfaces used\n- [ ] Demo criteria are observable and checkable\n- [ ] File saved at docs/use-cases/uc-crud-operations.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T11:38:33.071323-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:55:29.96549-05:00","closed_at":"2026-02-04T11:55:29.96549-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm","type":"parent-child","created_at":"2026-02-04T11:38:33.072994-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm.1","type":"blocks","created_at":"2026-02-04T11:38:37.002282-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-5wm.3","depends_on_id":"crumbs-5wm.2","type":"blocks","created_at":"2026-02-04T11:38:37.166628-05:00","created_by":"petardjukic"}],"comments":[{"id":10,"issue_id":"crumbs-5wm.3","author":"petardjukic","text":"tokens: 5000","created_at":"2026-02-04T16:55:29Z"}]}
{"id":"crumbs-5z8","title":"Implement rel01.1-uc005-flat-self-hosting integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel01.1-uc005-flat-self-hosting.yaml\n- docs/specs/test-suites/test-rel01.1-uc005-flat-self-hosting.yaml\n- tests/integration/test_rel01_1_uc004_generic_table_cli_test.go (similar patterns)\n- eng01-git-integration.md (JSONL persistence context)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_1_uc005_flat_self_hosting_test.go (create)\n- cmd/cupboard/main.go (update version command)\n\n## Requirements\n- Implement integration tests for flat self-hosting workflow\n- Test create crumb with name and state via generic set command\n- Test list with state filter (State=draft, State=taken, State=pebble)\n- Test full workflow: draft -\u003e taken -\u003e pebble state transitions\n- Test JSONL persistence survives database deletion\n- Test do-work cycle (create, list draft, claim, close)\n- Test make-work cycle (list existing, create new)\n- Update version command to list rel01.1-uc005\n\n## Design Decisions\n- Use generic table commands only (set, get, list, delete) - no property or issue-tracking commands\n- Simulate script workflows via test steps\n- Follow existing table-driven test patterns\n\n## Acceptance Criteria\n- [ ] All test cases from test-rel01.1-uc005-flat-self-hosting.yaml implemented\n- [ ] go test ./tests/integration -run TestFlatSelfHosting passes\n- [ ] cupboard version lists rel01.1-uc005-flat-self-hosting","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:07:39.963749-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:07:39.963749-05:00"}
{"id":"crumbs-5zn","title":"Convert smaller PRDs to YAML format","description":"## Required Reading\n- .claude/rules/prd-format.md (YAML schema with field definitions and numbering rules)\n- Each PRD being converted (read before transforming)\n\n## Files to Create\n- docs/product-requirements/prd-cupboard-core.yaml (from prd-cupboard-core.md)\n- docs/product-requirements/prd-configuration-directories.yaml (from prd-configuration-directories.md)\n- docs/product-requirements/prd-trails-interface.yaml (from prd-trails-interface.md)\n- docs/product-requirements/prd-metadata-interface.yaml (from prd-metadata-interface.md)\n\n## Files to Delete\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-configuration-directories.md\n- docs/product-requirements/prd-trails-interface.md\n- docs/product-requirements/prd-metadata-interface.md\n\n## Requirements\n- Convert each markdown PRD into YAML per the prd-format rule\n- Map existing markdown sections to YAML fields: id, title, problem, goals (G-numbered), requirements (R-grouped with R.N items), non_goals, acceptance_criteria\n- Preserve all requirement content; do not drop or summarize requirements\n- Use detail field for requirements that contain tables or code blocks\n- Update cross-references in other files that point to these PRDs with .md extension (ARCHITECTURE.md, use cases, test suites, engineering guidelines, Go source comments)\n- Delete the old .md files after creating the .yaml replacements\n\n## Acceptance Criteria\n- [ ] All 4 YAML files pass the prd-format completeness checklist\n- [ ] Goals numbered G1, G2, ...\n- [ ] Requirements grouped as R1, R2, ... with items R1.1, R1.2, ...\n- [ ] No content lost from original markdown PRDs\n- [ ] Old .md files deleted\n- [ ] All cross-references updated to .yaml extension\n- [ ] YAML files parse without errors (valid YAML)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:26:04.574396-05:00","created_by":"petardjukic","updated_at":"2026-02-07T01:52:00.390307-05:00","closed_at":"2026-02-07T01:52:00.390307-05:00","close_reason":"Closed"}
{"id":"crumbs-6ar","title":"Implement built-in property seeding on backend attach","description":"## Required Reading\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R9 built-in properties)\n- docs/specs/product-requirements/prd002-sqlite-backend.yaml (R9 seeding)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F1, F2)\n- internal/sqlite/backend.go (current implementation)\n- pkg/types/property.go (Property struct)\n\n## Files to Create/Modify\n- internal/sqlite/backend.go (add seeding logic in Attach)\n- internal/sqlite/seeding.go (create - seeding implementation)\n- internal/sqlite/seeding_test.go (create - unit tests)\n\n## Requirements\n- Seed five built-in properties on first startup when properties table is empty:\n  - priority (categorical) with categories: highest(0), high(1), medium(2), low(3), lowest(4)\n  - type (categorical) with categories: task(0), epic(1), bug(2), chore(3)\n  - description (text)\n  - owner (text)\n  - labels (list)\n- Seeding is idempotent: only runs when properties table is empty\n- Built-in categories are created via CategoryDefiner interface\n- Per R9.4: existing data is never modified by seeding\n\n## Design Decisions\n- Seeding runs during Attach after schema creation\n- Check if properties table has entries before seeding\n- Use Table.Set for properties and CategoryDefiner for categories\n- Keep seeding logic in separate file for clarity\n\n## Acceptance Criteria\n- [ ] Fresh cupboard init produces 5 properties in properties.jsonl\n- [ ] Priority property has 5 categories in categories.jsonl\n- [ ] Type property has 4 categories in categories.jsonl\n- [ ] Second init does not duplicate properties\n- [ ] Unit tests verify seeding logic","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:40.934819-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:40.934819-05:00","dependencies":[{"issue_id":"crumbs-6ar","depends_on_id":"crumbs-7k7","type":"blocks","created_at":"2026-02-08T22:53:42.47636-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-6dd","title":"Write test suite for rel00.0-uc004-jsonl-git-roundtrip","description":"## Required Reading\n- docs/use-cases/rel00.0-uc004-jsonl-git-roundtrip.md (must be written first, see crumbs-el0)\n- docs/engineering/eng01-git-integration.md\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/test-suites/test001-self-hosting.yaml (example format)\n- .claude/rules/test-case-format.md\n\n## Files to Create\n- docs/test-suites/test002-jsonl-git-roundtrip.yaml\n\n## Requirements\n- Test cases covering: create crumbs, verify JSONL written, delete cupboard.db, re-attach, verify data intact\n- Test cases for JSONL content correctness (records match what was created)\n- Test cases for empty cupboard rebuild (no JSONL files, fresh start)\n- Each test case has concrete inputs (CLI commands) and expected outputs (exit codes, state checks, file checks)\n- traces field references rel00.0-uc004-jsonl-git-roundtrip\n\n## Dependencies\n- crumbs-el0 (use case must be written first to know exact flow steps)\n\n## Acceptance Criteria\n- [ ] Test suite follows test-case-format rule\n- [ ] traces references rel00.0-uc004-jsonl-git-roundtrip\n- [ ] Each test case has name, inputs, and expected outputs\n- [ ] Covers: JSONL write, DB removal, rebuild from JSONL, empty start\n- [ ] File saved as test002-jsonl-git-roundtrip.yaml in docs/test-suites/","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:36:15.680054-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:49:32.641124-05:00","closed_at":"2026-02-06T23:49:32.641124-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-6ry","title":"Implement property backfill on property definition","description":"## Required Reading\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R4.2, R4.3 backfill)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F7, F8)\n- internal/sqlite/table.go (properties table Set implementation)\n- internal/sqlite/backend.go (transaction handling)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (modify properties Set to backfill crumbs)\n- internal/sqlite/backend_integration_test.go (add tests)\n\n## Requirements\n- When Table.Set creates a new property, backfill all existing crumbs with the default value\n- Per R4.3: backfill is atomic with property creation (transaction)\n- If backfill fails, property creation fails and rolls back\n- Get default value based on property's ValueType (same logic as auto-init)\n- Update each crumb's Properties map and persist\n\n## Design Decisions\n- Backfill runs in same transaction as property creation\n- Fetch all crumbs, update each, persist each\n- Consider batch update for performance with many crumbs\n\n## Acceptance Criteria\n- [ ] Creating a property backfills all existing crumbs\n- [ ] Crumbs created before property definition have the new property\n- [ ] Backfill uses correct default value per type\n- [ ] Rollback on partial failure\n- [ ] Integration tests verify backfill","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:10.665804-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:10.665804-05:00","dependencies":[{"issue_id":"crumbs-6ry","depends_on_id":"crumbs-bxk","type":"blocks","created_at":"2026-02-08T22:46:11.943022-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-6zl","title":"Rename remaining testNNN integration tests to test-[use-case-id] convention","description":"Three Go integration test files still use the old testNNN naming convention. Rename them to match the test-[use-case-id] convention established in crumbs-euj. Update file headers to reference the correct test suite YAML and use case files.\n\n## Files to rename\n- test001_self_hosting_test.go → test_rel02_1_uc003_self_hosting_test.go\n- test002_jsonl_git_roundtrip_test.go → test_rel01_1_uc002_jsonl_git_roundtrip_test.go\n- test003_table_benchmarks_test.go → test_rel02_1_uc002_table_benchmarks_test.go\n\n## Acceptance Criteria\n- All three files renamed with git mv\n- File headers reference correct test suite YAML and use case\n- go test ./tests/integration/... passes\n- No testNNN naming remains in tests/integration/","status":"closed","priority":1,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:53:45.631779-05:00","created_by":"petardjukic","updated_at":"2026-02-07T15:37:10.865666-05:00","closed_at":"2026-02-07T15:37:10.865666-05:00","close_reason":"Closed"}
{"id":"crumbs-6zl.1","title":"Rename test001_self_hosting_test.go to test_rel02_1_uc003_self_hosting_test.go","description":"## Type\nCode\n\n## Required Reading\n- tests/integration/test001_self_hosting_test.go (current file)\n- docs/test-suites/test-rel02.1-uc003-self-hosting.yaml (test suite YAML)\n- docs/use-cases/rel02.1-uc003-self-hosting.yaml (use case)\n- .claude/rules/test-case-format.md (naming convention)\n\n## Files to Create/Modify\n- tests/integration/test001_self_hosting_test.go → rename to tests/integration/test_rel02_1_uc003_self_hosting_test.go\n\n## Requirements\n- Rename file with git mv to preserve history\n- Update file header comment to reference test-rel02.1-uc003-self-hosting.yaml and rel02.1-uc003-self-hosting\n\n## Acceptance Criteria\n- [ ] File renamed to test_rel02_1_uc003_self_hosting_test.go\n- [ ] Header references correct test suite YAML and use case\n- [ ] go test ./tests/integration/... passes","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:53:54.223047-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:55:20.915491-05:00","closed_at":"2026-02-07T13:55:20.915491-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-6zl.1","depends_on_id":"crumbs-6zl","type":"parent-child","created_at":"2026-02-07T13:53:54.224096-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-6zl.2","title":"Rename test002_jsonl_git_roundtrip_test.go to test_rel01_1_uc002_jsonl_git_roundtrip_test.go","description":"## Type\nCode\n\n## Required Reading\n- tests/integration/test002_jsonl_git_roundtrip_test.go (current file)\n- docs/test-suites/test-rel01.1-uc002-jsonl-git-roundtrip.yaml (test suite YAML)\n- docs/use-cases/rel01.1-uc002-jsonl-git-roundtrip.yaml (use case)\n- .claude/rules/test-case-format.md (naming convention)\n\n## Files to Create/Modify\n- tests/integration/test002_jsonl_git_roundtrip_test.go → rename to tests/integration/test_rel01_1_uc002_jsonl_git_roundtrip_test.go\n\n## Requirements\n- Rename file with git mv to preserve history\n- Update file header comment to reference test-rel01.1-uc002-jsonl-git-roundtrip.yaml and rel01.1-uc002-jsonl-git-roundtrip\n\n## Acceptance Criteria\n- [ ] File renamed to test_rel01_1_uc002_jsonl_git_roundtrip_test.go\n- [ ] Header references correct test suite YAML and use case\n- [ ] go test ./tests/integration/... passes","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:53:57.292732-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:56:42.626789-05:00","closed_at":"2026-02-07T13:56:42.626789-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-6zl.2","depends_on_id":"crumbs-6zl","type":"parent-child","created_at":"2026-02-07T13:53:57.294978-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-6zl.3","title":"Rename test003_table_benchmarks_test.go to test_rel02_1_uc002_table_benchmarks_test.go","description":"## Type\nCode\n\n## Required Reading\n- tests/integration/test003_table_benchmarks_test.go (current file)\n- docs/test-suites/test-rel02.1-uc002-table-benchmarks.yaml (test suite YAML)\n- docs/use-cases/rel02.1-uc002-table-benchmarks.yaml (use case)\n- .claude/rules/test-case-format.md (naming convention)\n\n## Files to Create/Modify\n- tests/integration/test003_table_benchmarks_test.go → rename to tests/integration/test_rel02_1_uc002_table_benchmarks_test.go\n\n## Requirements\n- Rename file with git mv to preserve history\n- Update file header comment to reference test-rel02.1-uc002-table-benchmarks.yaml and rel02.1-uc002-table-benchmarks\n\n## Acceptance Criteria\n- [ ] File renamed to test_rel02_1_uc002_table_benchmarks_test.go\n- [ ] Header references correct test suite YAML and use case\n- [ ] go test ./tests/integration/... passes","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:54:00.283124-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:57:36.079613-05:00","closed_at":"2026-02-07T13:57:36.079613-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-6zl.3","depends_on_id":"crumbs-6zl","type":"parent-child","created_at":"2026-02-07T13:54:00.285822-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-770","title":"Write test suite for rel00.0-uc005-table-benchmarks","description":"## Required Reading\n- docs/use-cases/rel00.0-uc005-table-benchmarks.md (must be written first, see crumbs-cqg)\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/test-suites/test001-self-hosting.yaml (example format)\n- .claude/rules/test-case-format.md\n\n## Files to Create\n- docs/test-suites/test003-table-benchmarks.yaml\n\n## Requirements\n- Test cases for each benchmarked operation: Get, Set, Delete, Fetch, SetProperty, GetProperty\n- Test cases at different scales (10, 100, 1000, 10000 crumbs)\n- Each test case defines inputs (Go benchmark command, data size) and expected outputs (benchmark completes, no errors, timing reported)\n- traces field references rel00.0-uc005-table-benchmarks\n\n## Dependencies\n- crumbs-cqg (use case must be written first to know exact benchmark operations)\n\n## Acceptance Criteria\n- [ ] Test suite follows test-case-format rule\n- [ ] traces references rel00.0-uc005-table-benchmarks\n- [ ] Each test case has name, inputs, and expected outputs\n- [ ] Covers all Table operations at multiple scales\n- [ ] File saved as test003-table-benchmarks.yaml in docs/test-suites/","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:36:20.125809-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:51:00.788247-05:00","closed_at":"2026-02-06T23:51:00.788247-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-7k7","title":"Implement rel01.1-uc005-flat-self-hosting integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel01.1-uc005-flat-self-hosting.yaml\n- docs/specs/test-suites/test-rel01.1-uc005-flat-self-hosting.yaml\n- tests/integration/test_rel01_1_uc004_generic_table_cli_test.go (similar patterns)\n- eng01-git-integration.md (JSONL persistence context)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_1_uc005_flat_self_hosting_test.go (create)\n- cmd/cupboard/main.go (update version command)\n\n## Requirements\n- Implement integration tests for flat self-hosting workflow (28 test cases)\n- Test create crumb with name and state via generic set command\n- Test list with state filter (State=draft, State=taken, State=pebble)\n- Test full workflow: draft -\u003e taken -\u003e pebble state transitions\n- Test JSONL persistence survives database deletion\n- Test do-work cycle (create, list draft, claim, close)\n- Test make-work cycle (list existing, create new)\n\n## Design Decisions\n- Use generic table commands only (set, get, list, delete) - no property or issue-tracking commands\n- Follow existing table-driven test patterns\n- Simulate script workflows via test steps\n\n## Acceptance Criteria\n- [ ] All test cases from test-rel01.1-uc005-flat-self-hosting.yaml implemented\n- [ ] go test ./tests/integration -run TestFlatSelfHosting passes\n- [ ] cupboard version lists rel01.1-uc005-flat-self-hosting","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:40.787731-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:40.787731-05:00","dependencies":[{"issue_id":"crumbs-7k7","depends_on_id":"crumbs-ddq","type":"blocks","created_at":"2026-02-08T22:53:42.335256-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-7nk","title":"Implement rel01.1-uc001-go-install integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel01.1-uc001-go-install.yaml\n- docs/specs/test-suites/test-rel01.1-uc001-go-install.yaml\n- tests/integration/testutil.go (test patterns)\n- tests/integration/test_rel01_1_uc004_generic_table_cli_test.go (example test structure)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_1_uc001_go_install_test.go (create)\n- cmd/cupboard/main.go (update version command to include uc001)\n\n## Requirements\n- Implement integration tests validating the go install workflow\n- Test init creates data directory with all JSONL files (crumbs.jsonl, trails.jsonl, properties.jsonl, links.jsonl, stashes.jsonl, metadata.jsonl)\n- Test set and list round-trip a crumb\n- Test init is idempotent\n- Test version command works standalone\n- Update version command output to list rel01.1-uc001\n\n## Design Decisions\n- Use existing TestEnv pattern from testutil.go\n- Table-driven tests per test-case-format rule\n- Tests run against locally-built binary (not go install from proxy)\n\n## Acceptance Criteria\n- [ ] All test cases from test-rel01.1-uc001-go-install.yaml implemented\n- [ ] go test ./tests/integration -run TestGoInstall passes\n- [ ] cupboard version lists rel01.1-uc001-go-install","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:07:39.816904-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:07:39.816904-05:00"}
{"id":"crumbs-7q2","title":"Implement ClearProperty reset to type-based default","description":"## Required Reading\n- docs/specs/product-requirements/prd003-crumbs-interface.yaml (R5.5 ClearProperty)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F11)\n- pkg/types/crumb.go (current ClearProperty implementation)\n- internal/sqlite/table.go (crumbs Set validation)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (handle nil property values on Set)\n- internal/sqlite/backend_integration_test.go (add tests)\n\n## Requirements\n- Per R5.5: ClearProperty sets value to nil in memory\n- Per R5.7: Table.Set resolves nil to type-based default during persistence\n- When persisting crumb with nil property values, replace with defaults:\n  - text: \"\"\n  - integer: 0\n  - boolean: false\n  - list: []\n  - categorical: null or first category\n  - timestamp: null\n- This ensures no crumb ever has a truly \"unset\" property\n\n## Design Decisions\n- Nil-to-default conversion happens in Set, not in ClearProperty\n- Lookup property definitions to get ValueType for default\n- Entity method remains simple; backend handles enforcement\n\n## Acceptance Criteria\n- [ ] ClearProperty followed by Set produces default value in JSONL\n- [ ] Get after clear returns default, not nil\n- [ ] Integration tests for each value type","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:10.810204-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:10.810204-05:00","dependencies":[{"issue_id":"crumbs-7q2","depends_on_id":"crumbs-bxk","type":"blocks","created_at":"2026-02-08T22:46:12.05912-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-817","title":"Write PRD for cupboard CLI interface","description":"## Required Reading\n- .claude/rules/prd-format.md (YAML schema)\n- docs/product-requirements/prd-cupboard-core.md (Table interface that CLI exposes)\n- docs/product-requirements/prd-crumbs-interface.md (crumb-specific operations)\n- docs/product-requirements/prd-configuration-directories.md (config/flag handling)\n- docs/engineering/eng02-beads-migration.md (planned issue-tracking commands)\n- docs/ARCHITECTURE.md § System Components (CLI component)\n- cmd/cupboard/*.go (current implementation: main.go, config.go, get.go, set.go, delete.go, list.go, crumb.go, crumb_add.go, crumb_get.go, crumb_list.go, crumb_delete.go)\n\n## Files to Create\n- docs/product-requirements/prd-cupboard-cli.yaml\n\n## Requirements (per prd-format rule)\n- id: prd-cupboard-cli\n- problem: CLI design is scattered across prd-cupboard-core, prd-configuration-directories, prd-crumbs-interface, and eng02-beads-migration. No single document specifies the full command set, output formats, error handling, or naming conventions. Agents building the CLI must read four documents and infer the CLI contract.\n- goals: consolidate CLI specification into one PRD; define all commands, flags, output formats, exit codes, and error messages\n- requirements groups:\n  - R1: Command structure (root commands, subcommand groups, naming convention for generic vs entity-specific)\n  - R2: Generic table commands (get, set, delete, list) with arguments, flags, and output\n  - R3: Crumb commands (crumb add, crumb get, crumb list, crumb delete) with entity-specific flags\n  - R4: Issue-tracking commands (ready, create, show, update, close, comments add) per eng02-beads-migration\n  - R5: Global flags (--config-dir, --data-dir, --json, --help, --version)\n  - R6: Output formats (human-readable tables, JSON mode, error output to stderr)\n  - R7: Exit codes and error messages (0 success, 1 user error, 2 system error)\n  - R8: Init command (cupboard init, directory creation, default config)\n- non_goals: GUI, TUI, shell completion, plugin system, remote backends\n- acceptance_criteria: every implemented and planned command has a specification; output format defined for each command; exit codes enumerated\n\n## Acceptance Criteria\n- [ ] YAML file passes prd-format completeness checklist\n- [ ] All currently implemented commands documented (init, version, get, set, delete, list, crumb add/get/list/delete)\n- [ ] All planned issue-tracking commands documented (ready, create, show, update, close, comments add)\n- [ ] Output format specified for each command (human-readable and JSON)\n- [ ] Exit codes and error handling defined\n- [ ] File saved as docs/product-requirements/prd-cupboard-cli.yaml","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:29:02.756889-05:00","created_by":"petardjukic","updated_at":"2026-02-07T02:03:23.711951-05:00","closed_at":"2026-02-07T02:03:23.711951-05:00","close_reason":"Closed"}
{"id":"crumbs-8j7","title":"Add class diagrams to ARCHITECTURE.md","description":"## Required Reading\n- docs/ARCHITECTURE.md (current content, existing component diagram)\n- .claude/rules/documentation-standards.md (figure format: puml source in docs/plantuml/, PNG in docs/images/, named figure caption)\n- pkg/types/cupboard.go (Cupboard interface, Config, SQLiteConfig)\n- pkg/types/table.go (Table interface)\n- pkg/types/crumb.go (Crumb struct, states, methods)\n- pkg/types/trail.go (Trail struct, states, methods)\n- pkg/types/property.go (Property, Category structs)\n- pkg/types/stash.go (Stash, StashHistoryEntry structs, methods)\n- pkg/types/metadata.go (Metadata, Schema structs)\n- pkg/types/link.go (Link struct, link types)\n- internal/sqlite/backend.go (Backend struct, implements Cupboard)\n- internal/sqlite/table.go (Table impl, implements Table)\n\n## Files to Create\n- docs/plantuml/cupboard-interfaces.puml (Cupboard, Table, Config, Backend class diagram)\n- docs/plantuml/entity-types.puml (Crumb, Trail, Property, Category, Stash, StashHistoryEntry, Metadata, Link with relationships)\n- docs/plantuml/graph-model.puml (Link entity connecting Crumb, Trail, Stash via four link types)\n- docs/images/cupboard-interfaces.png (generated from puml)\n- docs/images/entity-types.png (generated from puml)\n- docs/images/graph-model.png (generated from puml)\n\n## Files to Modify\n- docs/ARCHITECTURE.md (embed three diagrams in existing sections)\n\n## Requirements\n- Create docs/plantuml/ and docs/images/ directories\n- Diagram 1 (cupboard-interfaces.puml): Cupboard interface with GetTable/Attach/Detach methods, Table interface with Get/Set/Delete/Fetch methods, Config and SQLiteConfig structs with fields, Backend (internal/sqlite) implementing Cupboard, table impl implementing Table. Embed in § Main Interface after the Cupboard and Table code blocks.\n- Diagram 2 (entity-types.puml): All seven entity structs (Crumb, Trail, Property, Category, Stash, StashHistoryEntry, Metadata, Link) with fields and methods. Show relationships: Category→Property (many-to-one via PropertyID), Metadata→Crumb (many-to-one via CrumbID), StashHistoryEntry→Stash (many-to-one). Embed in § Entity Types after the entity table.\n- Diagram 3 (graph-model.puml): Link entity as the central node with four typed edges: belongs_to (Crumb→Trail), child_of (Crumb→Crumb), branches_from (Trail→Crumb), scoped_to (Stash→Trail). Embed in § Lifecycle of entities after the relationship semantics table.\n- Use PlantUML class diagram syntax (!theme plain, white background)\n- Reference each diagram per documentation-standards figure format\n- Read the actual Go source files to ensure diagrams match the implemented types exactly (field names, method signatures, constants)\n\n## Design Decisions\n- Embed diagrams inline in existing ARCHITECTURE sections rather than creating a new section\n- Use PlantUML class diagrams (not component or sequence)\n- Keep diagrams focused: one concern per diagram rather than one massive diagram\n- Show only public fields and methods (not internal helper methods)\n\n## Acceptance Criteria\n- [ ] docs/plantuml/ directory created with 3 .puml files\n- [ ] docs/images/ directory created with 3 .png files\n- [ ] ARCHITECTURE.md references all 3 diagrams using documentation-standards figure format\n- [ ] Diagram 1 shows Cupboard interface, Table interface, Config, Backend implementation\n- [ ] Diagram 2 shows all entity structs with fields, methods, and relationships\n- [ ] Diagram 3 shows Link entity with four typed edges between entities\n- [ ] All types and fields in diagrams match the actual Go source code\n- [ ] PlantUML files use !theme plain and white background","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:32:45.182239-05:00","created_by":"petardjukic","updated_at":"2026-02-07T02:08:10.426896-05:00","closed_at":"2026-02-07T02:08:10.426896-05:00","close_reason":"Closed"}
{"id":"crumbs-8xl","title":"Implement test003 Go benchmarks (table performance)","description":"## Required Reading\n- docs/test-suites/test003-table-benchmarks.yaml (23 test cases)\n- docs/use-cases/rel02.1-uc002-table-benchmarks.md\n- docs/product-requirements/prd-cupboard-core.md (R3 Table interface)\n- docs/product-requirements/prd-sqlite-backend.md\n- tests/integration/testutil.go\n\n## Files to Create\n- tests/integration/test003_table_benchmarks_test.go\n\n## Requirements\n- Implement Go benchmark functions matching the 23 test cases in the YAML spec\n- Use testing.B for benchmarks at various data scales (10, 100, 1000, 10000 crumbs)\n- Benchmark groups: Get, Set (create), Set (update), Delete, Fetch (all, state filter, properties filter, limit), Property operations (SetProperty, GetProperty)\n- Each benchmark pre-populates the specified number of crumbs before measuring\n- Report ns/op, B/op, and allocs/op\n\n## Design Decisions\n- Use BenchmarkXxx functions with b.Run subtests for data scales\n- Pre-populate crumbs in b.StopTimer/b.StartTimer blocks\n- Use testutil.go NewTestEnv for isolated benchmark environments\n\n## Acceptance Criteria\n- [ ] File named test003_table_benchmarks_test.go\n- [ ] Benchmark functions match YAML spec test cases\n- [ ] go test -bench=. ./tests/integration/ runs without error\n- [ ] Reports ns/op and allocs/op for each benchmark\n- [ ] Traces to rel02.1-uc002-table-benchmarks","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:13:57.304359-05:00","created_by":"petardjukic","updated_at":"2026-02-07T01:42:09.770874-05:00","closed_at":"2026-02-07T01:42:09.770874-05:00","close_reason":"Closed"}
{"id":"crumbs-8xt","title":"Property auto-initialization on crumb creation","description":"## Required Reading\n- docs/product-requirements/prd-properties-interface.md (R3.7, R4.9 - enforcement rules)\n- docs/product-requirements/prd-crumbs-interface.md (R3.7 - property initialization)\n- docs/ARCHITECTURE.md § Properties Model\n- pkg/types/property.go, pkg/types/crumb.go\n- internal/sqlite/table.go (Set implementation)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (modify) - add property initialization logic to Set for crumbs\n- internal/sqlite/table_test.go (create or modify) - test property auto-init\n\n## Requirements\n- When Table.Set creates a new Crumb (empty ID), initialize all defined properties with type-based defaults\n- Query properties table to get all defined properties\n- For each property, set the crumb's property value to the type's default:\n  - categorical: first category or empty string\n  - text: empty string\n  - integer: 0\n  - boolean: false\n  - timestamp: zero time\n  - list: empty list\n- This is Phase 2 requirement per prd-properties-interface R3.7\n\n## Design Decisions\n- Initialize properties in the SQLite backend's Set method for crumbs table\n- Use a helper function to get default value for property type\n- Initialization happens atomically with crumb creation\n\n## Acceptance Criteria\n- [ ] Creating a new crumb auto-initializes all defined properties\n- [ ] Each property type gets correct default value\n- [ ] Test verifies: define property, create crumb, crumb has property with default\n- [ ] Existing code continues to work (no regressions)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T11:10:36.358706-05:00","created_by":"petardjukic","updated_at":"2026-02-05T11:38:17.608556-05:00","closed_at":"2026-02-05T11:38:17.608556-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-8xt","depends_on_id":"crumbs-uoz","type":"parent-child","created_at":"2026-02-05T11:13:25.895276-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-9ep","title":"Fill specification and implementation gaps for orphaned code","description":"Deep analysis of the codebase revealed six areas where implemented code does not correspond to existing PRDs or use cases. This epic creates the missing specifications and tracks the implementation fixes.\n\n## Gap Summary\n\n1. **Link entity has no dedicated PRD** — 4 link types, full CRUD, filtering, UNIQUE constraints, and graph model implemented without a dedicated interface specification. Requirements scattered across prd-sqlite-backend, prd-trails-interface, prd-stash-interface.\n\n2. **Crumb property hydration missing on Get** — Properties initialized on crumb creation but NOT loaded when fetching existing crumbs. getCrumb() only scans crumb_id, name, state, created_at, updated_at. The Properties map is empty on reads.\n\n3. **Category CRUD not implemented** — Category type, SQLite table, and JSONL persistence exist, but DefineCategory() and GetCategories() entity methods (prd-properties-interface R7-R8) are not implemented. No interface to create or list categories.\n\n4. **Sync strategy config validated but not implemented** — SyncOnClose, SyncBatch constants and SQLiteConfig validation exist in pkg/types/config.go (~80 LOC), but backend ignores sync strategy entirely. All writes go immediately to JSONL.\n\n5. **Stash history written but not readable** — StashHistoryEntry type, stash_history SQLite table, and appendStashHistoryJSONL persist history on mutations, but no API exists to query history.\n\n6. **Trail state machine incomplete** — PRD defines 5 states (draft, pending, active, completed, abandoned); code has 3 (active, completed, abandoned). No SetState method, no cascade on Complete/Abandon.\n\n## Approach\n\nPrefer appending to existing PRDs and use cases over creating new documents. Only create new PRDs where no existing document can host the requirements (Gap 1: links interface).","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T16:56:30.497022-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:11.976617-05:00","closed_at":"2026-02-08T09:28:11.976617-05:00","close_reason":"Closed"}
{"id":"crumbs-9ep.1","title":"Create prd-links-interface for Link entity","description":"## Type: Documentation\n\n## Required Reading\n- pkg/types/link.go (Link struct, 4 link type constants)\n- internal/sqlite/table.go (link CRUD: getLink, setLink, fetchLinks, buildLinkQuery)\n- internal/sqlite/schema.sql (links table, UNIQUE constraint, indexes)\n- internal/sqlite/jsonl.go (saveLinkToJSONL, deleteLinkFromJSONL, loadLinksJSONL)\n- prd-sqlite-backend R2.7 (JSONL format), R10 (graph audit), R14.6 (hydration)\n- prd-trails-interface R7 (belongs_to), R9 (branches_from)\n- prd-stash-interface R13 (scoped_to)\n- prd-crumbs-interface R9.2 (trail_id filter via belongs_to)\n\n## Files to Create\n- docs/product-requirements/prd-links-interface.yaml (create)\n\n## Requirements\nThis is the only entity without a dedicated PRD. Create prd-links-interface.yaml per prd-format rule:\n\n- R1: Link struct (LinkID UUID v7, LinkType string, FromID string, ToID string, CreatedAt time)\n- R2: Valid link types and semantics (belongs_to: crumb→trail, child_of: crumb→crumb, branches_from: trail→crumb, scoped_to: stash→trail)\n- R3: CRUD via Table interface (Get, Set, Delete, Fetch) — document existing behavior\n- R4: Filter keys (LinkType, FromID, ToID) and AND semantics\n- R5: Uniqueness constraint (UNIQUE on link_type + from_id + to_id)\n- R6: Cardinality rules (one belongs_to per crumb, one branches_from per trail, one scoped_to per stash) — consolidate rules currently scattered across trails and stash PRDs\n- R7: Error handling (ErrNotFound, ErrInvalidID, ErrCupboardDetached)\n- R8: Graph audit functions (ValidateDAG, ValidateReferences per prd-sqlite-backend R10) — move here as the authoritative location\n\nGoals: Centralize link requirements. Non-goals: Changing the Link implementation.\n\n## Design Decisions\n- Consolidate scattered link requirements from 4 other PRDs into one authoritative source\n- Other PRDs should reference prd-links-interface for link behavior instead of duplicating\n- Document what IS implemented, not aspirational features\n\n## Acceptance Criteria\n- [ ] prd-links-interface.yaml created with all required sections per prd-format\n- [ ] All 8 requirement groups (R1-R8) present and specific\n- [ ] Requirements match actual implementation in code\n- [ ] id matches filename","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T16:56:50.257193-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:10.915054-05:00","closed_at":"2026-02-08T09:28:10.915054-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-9ep.1","depends_on_id":"crumbs-9ep","type":"parent-child","created_at":"2026-02-07T16:56:50.259118-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-9ep.2","title":"Fix crumb property hydration on Get and update rel02.0-uc001","description":"## Type: Code + Documentation (append to existing use case)\n\n## Required Reading\n- internal/sqlite/table.go lines 213-340 (getCrumb, hydrateCrumb — Properties map never populated)\n- internal/sqlite/table.go lines 1108-1173 (initializeCrumbProperties — only runs on creation)\n- pkg/types/crumb.go (SetProperty, GetProperty, GetProperties, ClearProperty methods)\n- prd-crumbs-interface R5 (property methods), R1.6 (Properties map), R6 (retrieving crumbs)\n- docs/use-cases/rel02.0-uc001-property-enforcement.yaml (existing use case to append to)\n- docs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (existing test suite to append to)\n\n## Files to Modify\n- internal/sqlite/table.go (fix getCrumb and hydrateCrumb to load crumb_properties)\n- internal/sqlite/table.go (fix fetchCrumbs/hydrateCrumbRow similarly)\n- docs/use-cases/rel02.0-uc001-property-enforcement.yaml (append flow steps and success criteria)\n- docs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (append test cases)\n\n## Requirements\n1. getCrumb must query crumb_properties table and populate Crumb.Properties map\n2. hydrateCrumb and hydrateCrumbRow must include properties in returned Crumb\n3. fetchCrumbs must also populate Properties for each returned crumb\n4. After fix, GetProperty/SetProperty/ClearProperty must work on fetched crumbs\n\n## Append to rel02.0-uc001-property-enforcement\nAdd flow steps:\n- F_new: \"Retrieve crumb by ID and verify Properties map contains all defined properties with current values\"\n- F_new: \"SetProperty on a fetched crumb, save, re-fetch, verify updated value persists\"\n\nAdd success criteria:\n- S_new: Table.Get returns crumb with Properties map containing all defined properties\n- S_new: Properties survive round-trip (create → get → verify → modify → get → verify)\n\nAdd test cases to test suite:\n- \"Get crumb returns populated Properties map\"\n- \"Fetched crumb properties match values set at creation\"\n- \"SetProperty on fetched crumb persists through round-trip\"\n\n## Acceptance Criteria\n- [ ] getCrumb populates Crumb.Properties from crumb_properties table\n- [ ] fetchCrumbs populates Properties for each crumb\n- [ ] GetProperty works on crumbs returned by Table.Get\n- [ ] Use case and test suite updated with new criteria\n- [ ] Existing tests still pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T16:57:05.539074-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:11.12023-05:00","closed_at":"2026-02-08T09:28:11.12023-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-9ep.2","depends_on_id":"crumbs-9ep","type":"parent-child","created_at":"2026-02-07T16:57:05.541543-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-9ep.3","title":"Implement DefineCategory and GetCategories, append to rel02.0-uc001","description":"## Type: Code + Documentation (append to existing use case and PRD)\n\n## Required Reading\n- pkg/types/property.go (Category struct — exists but no methods)\n- prd-properties-interface R7 (DefineCategory entity method spec)\n- prd-properties-interface R8 (GetCategories entity method spec)\n- internal/sqlite/table.go (setProperty, getProperty — no category operations)\n- internal/sqlite/schema.sql lines 42-48 (categories table — exists)\n- internal/sqlite/jsonl.go (loadCategoriesJSONL — exists, no save/write for categories)\n- docs/use-cases/rel02.0-uc001-property-enforcement.yaml (append category management)\n- docs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (append test cases)\n\n## Files to Modify\n- pkg/types/property.go (add DefineCategory, GetCategories methods or interfaces)\n- internal/sqlite/table.go (implement category operations in properties table accessor)\n- internal/sqlite/jsonl.go (add saveCategoryToJSONL)\n- docs/use-cases/rel02.0-uc001-property-enforcement.yaml (append flow steps)\n- docs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (append test cases)\n\n## Requirements\n1. Implement DefineCategory per prd-properties-interface R7:\n   - Entity method on Property or Table-level operation\n   - Validate ValueType is \"categorical\" (ErrInvalidValueType)\n   - Validate name non-empty, unique within property\n   - Create Category with UUID v7, PropertyID, name, ordinal\n   - Persist to SQLite and categories.jsonl\n2. Implement GetCategories per prd-properties-interface R8:\n   - Return categories ordered by ordinal ascending, then name\n   - Return empty slice if none defined\n3. JSONL persistence for categories (saveCategoryToJSONL)\n\n## Append to rel02.0-uc001-property-enforcement\nAdd flow steps:\n- F_new: \"Define categories for a categorical property (e.g., priority: highest, high, medium, low, lowest)\"\n- F_new: \"Retrieve categories and verify ordering by ordinal\"\n\nAdd success criteria:\n- S_new: DefineCategory creates category accessible via GetCategories\n- S_new: GetCategories returns categories ordered by ordinal\n\n## Design Decisions\n- Category operations could be entity methods on Property (needing Cupboard ref) or accessed through the Table interface as a sub-operation of the properties table\n- Prefer the approach that aligns with prd-properties-interface R7 (entity method with Cupboard reference)\n\n## Acceptance Criteria\n- [ ] DefineCategory creates category with validation per R7\n- [ ] GetCategories returns ordered categories per R8\n- [ ] Categories persisted to SQLite and JSONL\n- [ ] Use case and test suite updated\n- [ ] Existing tests still pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T17:02:41.857414-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:11.281234-05:00","closed_at":"2026-02-08T09:28:11.281234-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-9ep.3","depends_on_id":"crumbs-9ep","type":"parent-child","created_at":"2026-02-07T17:02:41.859355-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-9ep.4","title":"Implement sync strategy dispatch in SQLite backend","description":"## Type: Code + Documentation (append to existing use case)\n\n## Required Reading\n- pkg/types/config.go (SyncOnClose, SyncBatch constants; SQLiteConfig validation; GetBatchSize, GetBatchInterval helpers)\n- prd-sqlite-backend R16 (sync strategies: immediate, on_close, batch)\n- internal/sqlite/backend.go (Attach — does not pass config to table ops)\n- internal/sqlite/table.go (all Set/Delete methods — always call JSONL persist immediately)\n- internal/sqlite/jsonl.go (all save/delete/append functions — always write immediately)\n- docs/use-cases/rel01.1-uc002-jsonl-git-roundtrip.yaml (currently only tests immediate sync)\n- docs/test-suites/test-rel01.1-uc002-jsonl-git-roundtrip.yaml\n\n## Files to Modify\n- internal/sqlite/backend.go (store sync strategy; add batch queue and flush logic)\n- internal/sqlite/table.go (check sync strategy before JSONL persist calls)\n- internal/sqlite/jsonl.go (add batch buffer, flush-on-close, flush-on-threshold)\n- docs/use-cases/rel01.1-uc002-jsonl-git-roundtrip.yaml (append sync strategy flow steps)\n- docs/test-suites/test-rel01.1-uc002-jsonl-git-roundtrip.yaml (append test cases)\n\n## Requirements\n1. \"immediate\" (default): current behavior, write to JSONL after every SQLite commit (per R16.2)\n2. \"on_close\": defer JSONL writes until Detach; SQLite is write cache (per R16.3)\n3. \"batch\": queue writes, flush when BatchSize reached or BatchInterval elapsed (per R16.4-R16.6)\n4. Atomic write semantics (temp, fsync, rename) apply regardless of strategy (per R16.7)\n5. Config already validated in pkg/types/config.go — backend must honor the strategy\n\n## Append to rel01.1-uc002-jsonl-git-roundtrip\nAdd flow steps:\n- F_new: \"Attach with SyncOnClose, create crumbs, verify JSONL empty, Detach, verify JSONL populated\"\n- F_new: \"Attach with SyncBatch (BatchSize=5), create 4 crumbs (no flush), create 5th (triggers flush)\"\n\nAdd success criteria:\n- S_new: on_close defers all JSONL writes until Detach\n- S_new: batch flushes at BatchSize threshold\n- S_new: immediate (default) persists every write\n\n## Acceptance Criteria\n- [ ] Backend reads SyncStrategy from config and dispatches accordingly\n- [ ] on_close defers writes and flushes on Detach\n- [ ] batch flushes at size threshold and interval\n- [ ] immediate behavior unchanged (default)\n- [ ] Atomic write semantics preserved for all strategies\n- [ ] Use case and test suite updated\n- [ ] Existing tests still pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T17:03:01.263852-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:11.441261-05:00","closed_at":"2026-02-08T09:28:11.441261-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-9ep.4","depends_on_id":"crumbs-9ep","type":"parent-child","created_at":"2026-02-07T17:03:01.26519-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-9ep.5","title":"Expose stash history reads, append to rel03.0-uc003","description":"## Type: Code + Documentation (append to existing use case)\n\n## Required Reading\n- pkg/types/stash.go lines 166-186 (StashHistoryEntry struct, operation constants)\n- prd-stash-interface R7 (history tracking — backend-managed, R7.4 says access is backend concern)\n- internal/sqlite/jsonl.go (appendStashHistoryJSONL — write-only)\n- internal/sqlite/jsonl.go (loadStashHistoryJSONL — loads on startup into SQLite)\n- internal/sqlite/schema.sql lines 85-95 (stash_history table with indexes)\n- internal/sqlite/table.go (setStash — does NOT write history entries currently)\n- docs/use-cases/rel03.0-uc003-stash-operations.yaml (append history read criteria)\n- docs/test-suites/test-rel03.0-uc003-stash-operations.yaml (append test cases)\n\n## Files to Modify\n- internal/sqlite/table.go (add history writing in setStash; add history query method)\n- prd-stash-interface (append: R7.6 or new requirement for read access via Fetch filter or dedicated method)\n- docs/use-cases/rel03.0-uc003-stash-operations.yaml (append flow steps)\n- docs/test-suites/test-rel03.0-uc003-stash-operations.yaml (append test cases)\n\n## Requirements\n1. Write path: setStash must create StashHistoryEntry on each mutation (create, set, increment, acquire, release) and persist via appendStashHistoryJSONL\n2. Read path: expose stash history through one of:\n   a. Filter parameter on stashes Fetch (e.g., \"history\": true or \"stash_id\": id returns history)\n   b. Dedicated GetHistory method on Backend or Table\n   c. New \"stash_history\" standard table name\n   Option (a) or (b) preferred per prd-stash-interface R7.4 flexibility\n3. History entries must include: HistoryID, StashID, Version, Value, Operation, ChangedBy, CreatedAt\n\n## Append to prd-stash-interface\nAdd requirement:\n- R7.6: Backend must provide a mechanism to query stash history entries by stash ID, ordered by version ascending\n\n## Append to rel03.0-uc003-stash-operations\nAdd flow steps:\n- F_new: \"Query stash history after multiple mutations and verify all operations recorded\"\n- F_new: \"Verify history entries have correct version, operation, and value snapshots\"\n\nAdd success criteria:\n- S_new: History entry created for each stash mutation (create, set, increment, acquire, release)\n- S_new: History entries queryable by stash ID, ordered by version\n\n## Acceptance Criteria\n- [ ] setStash writes history entries on each mutation\n- [ ] History readable through chosen mechanism\n- [ ] History entries match expected operations, versions, and values\n- [ ] PRD, use case, and test suite updated\n- [ ] Existing tests still pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T17:03:18.356079-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:11.603728-05:00","closed_at":"2026-02-08T09:28:11.603728-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-9ep.5","depends_on_id":"crumbs-9ep","type":"parent-child","created_at":"2026-02-07T17:03:18.357997-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-9ep.6","title":"Complete trail state machine and cascade operations","description":"## Type: Code + Documentation (append to existing use case)\n\n## Required Reading\n- pkg/types/trail.go (only 3 states: active, completed, abandoned; PRD requires 5)\n- prd-trails-interface R2 (5 states: draft, pending, active, completed, abandoned)\n- prd-trails-interface R5 (Complete cascade: remove belongs_to links)\n- prd-trails-interface R6 (Abandon cascade: delete crumbs, properties, metadata, links)\n- prd-sqlite-backend R5.6-R5.8 (cascade behavior on trail state change)\n- internal/sqlite/table.go lines 352-388 (setTrail — no state validation, no cascade)\n- docs/use-cases/rel03.0-uc001-trail-exploration.yaml (already covers full lifecycle)\n- docs/test-suites/test-rel03.0-uc001-trail-exploration.yaml (already has test cases)\n\n## Files to Modify\n- pkg/types/trail.go (add TrailStateDraft, TrailStatePending constants; add SetState method)\n- internal/sqlite/table.go (setTrail: validate initial state=draft on creation; detect Complete/Abandon state transitions and cascade)\n\n## Requirements\n1. Add missing state constants: TrailStateDraft = \"draft\", TrailStatePending = \"pending\"\n2. Add Trail.SetState() method mirroring Crumb.SetState() with validation:\n   - Valid states: draft, pending, active, completed, abandoned\n   - draft → pending, active allowed\n   - pending → active allowed\n   - active → completed, abandoned allowed (via Complete/Abandon methods)\n   - completed, abandoned are terminal\n3. On creation (setTrail with empty ID): set State to \"draft\" if empty, set CreatedAt\n4. On setTrail detecting State changed to \"completed\":\n   - Remove all belongs_to links where to_id = trail_id (crumbs become permanent)\n5. On setTrail detecting State changed to \"abandoned\":\n   - Find all crumbs with belongs_to link to this trail\n   - Delete each crumb and its associated data (properties, metadata, links)\n   - All cascades atomic within transaction\n6. Update Complete() and Abandon() to also accept \"pending\" state (not just \"active\") if PRD allows — check prd-trails-interface R5.4 and R6.4\n\n## Append to rel03.0-uc001-trail-exploration\nVerify existing flow steps and success criteria cover:\n- Trail creation in draft state\n- State transitions draft → active\n- Complete cascade (links removed, crumbs survive)\n- Abandon cascade (crumbs deleted atomically)\nIf any of these are missing, add them.\n\n## Acceptance Criteria\n- [ ] TrailStateDraft and TrailStatePending constants defined\n- [ ] Trail.SetState() validates transitions\n- [ ] New trails created with State=\"draft\" by default\n- [ ] Complete cascade removes belongs_to links\n- [ ] Abandon cascade deletes crumbs and associated data atomically\n- [ ] Use case and test suite cover full lifecycle\n- [ ] Existing tests still pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T17:03:35.917845-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:11.762993-05:00","closed_at":"2026-02-08T09:28:11.762993-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-9ep.6","depends_on_id":"crumbs-9ep","type":"parent-child","created_at":"2026-02-07T17:03:35.920579-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-ag8","title":"Technical Debt","description":"Address technical debt and improve development infrastructure.\n\nIssues:\n1. Convert bash validation script to Go integration tests\n2. Add Makefile for common operations\n3. Add golangci-lint configuration","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T22:16:31.544349-05:00","created_by":"petardjukic","updated_at":"2026-02-05T14:25:39.402126-05:00","closed_at":"2026-02-05T14:25:39.402126-05:00","close_reason":"Closed"}
{"id":"crumbs-ag8.1","title":"Convert validation script to Go integration tests","description":"## Type\nCode\n\n## Required Reading\n- scripts/validate-self-hosting.sh (current implementation)\n- docs/use-cases/uc002-self-hosting.md (test scenarios)\n- cmd/cupboard/ (CLI structure)\n\n## Files to Create/Modify\n- tests/integration/cli_test.go (create) - Integration tests using exec.Command\n- tests/integration/testutil.go (create) - Test helpers (temp dir, config, exec wrapper)\n- scripts/validate-self-hosting.sh (delete after migration)\n\n## Requirements\n1. Create test harness that builds cupboard binary once via TestMain\n2. Each test uses isolated temp directory with config file\n3. Execute CLI via exec.Command, capture stdout/stderr\n4. Parse JSON output and assert with standard Go testing\n5. Cover all 11 tests from current script:\n   - Cupboard initialization\n   - Crumb CRUD and state transitions\n   - Query with filters\n   - Trail creation, completion, abandonment\n   - Link crumbs to trails\n   - Crumb archival\n   - JSON persistence verification\n   - Full workflow summary\n\n## Design Decisions\n- Use testing.T subtests for organization\n- Helper function runCupboard(t, args...) returns stdout, stderr, exit code\n- Temp directory per test with t.TempDir()\n- Parse JSON with encoding/json into typed structs\n\n## Acceptance Criteria\n- [ ] go test ./tests/integration/... runs all CLI tests\n- [ ] Tests pass on clean checkout\n- [ ] Tests isolated (no shared state between tests)\n- [ ] Coverage matches current bash script (11 test scenarios)\n- [ ] Can run with -v for verbose output","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T22:16:48.284254-05:00","created_by":"petardjukic","updated_at":"2026-02-05T10:45:16.944953-05:00","closed_at":"2026-02-05T10:45:16.944953-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-ag8.1","depends_on_id":"crumbs-ag8","type":"parent-child","created_at":"2026-02-04T22:16:48.285203-05:00","created_by":"petardjukic"}],"comments":[{"id":36,"issue_id":"crumbs-ag8.1","author":"petardjukic","text":"tokens: 42000","created_at":"2026-02-05T15:45:14Z"}]}
{"id":"crumbs-ag8.2","title":"Add Makefile","description":"## Type\nCode\n\n## Required Reading\n- cmd/cupboard/ (build target)\n- tests/integration/ (test target, after issue 1)\n- scripts/ (existing scripts)\n\n## Files to Create/Modify\n- Makefile (create)\n\n## Requirements\n1. build target: compile cupboard binary to bin/\n2. test target: run all tests (unit + integration)\n3. test-unit target: run only unit tests\n4. test-integration target: run only integration tests\n5. lint target: run golangci-lint\n6. clean target: remove build artifacts\n7. install target: install to GOPATH/bin\n8. help target: show available targets\n\n## Design Decisions\n- Use standard Make conventions\n- Binary output to bin/ directory\n- Support VERBOSE=1 for detailed output\n\n## Acceptance Criteria\n- [ ] make build creates bin/cupboard\n- [ ] make test runs all tests\n- [ ] make lint runs linter\n- [ ] make clean removes bin/\n- [ ] make help shows targets","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T22:16:55.947132-05:00","created_by":"petardjukic","updated_at":"2026-02-05T10:48:20.933959-05:00","closed_at":"2026-02-05T10:48:20.933959-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-ag8.2","depends_on_id":"crumbs-ag8","type":"parent-child","created_at":"2026-02-04T22:16:55.948163-05:00","created_by":"petardjukic"}],"comments":[{"id":37,"issue_id":"crumbs-ag8.2","author":"petardjukic","text":"tokens: 35000","created_at":"2026-02-05T15:48:20Z"}]}
{"id":"crumbs-ag8.3","title":"Add golangci-lint configuration","description":"## Type\nCode\n\n## Required Reading\n- pkg/types/*.go (code style reference)\n- internal/sqlite/*.go (code style reference)\n- cmd/cupboard/*.go (code style reference)\n\n## Files to Create/Modify\n- .golangci.yml (create) - Linter configuration\n\n## Requirements\n1. Enable useful linters: errcheck, govet, staticcheck, unused, gosimple\n2. Enable style linters: gofmt, goimports, misspell\n3. Configure reasonable timeouts\n4. Exclude generated files if any\n5. Set appropriate line length (120 chars)\n\n## Design Decisions\n- Start with sensible defaults, not overly strict\n- Can tighten rules over time\n- Match existing code style\n\n## Acceptance Criteria\n- [ ] golangci-lint run passes on current codebase\n- [ ] Config file documents enabled linters\n- [ ] No false positives on existing code","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T22:17:04.386673-05:00","created_by":"petardjukic","updated_at":"2026-02-05T10:59:40.246317-05:00","closed_at":"2026-02-05T10:59:40.246317-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-ag8.3","depends_on_id":"crumbs-ag8","type":"parent-child","created_at":"2026-02-04T22:17:04.387583-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-ag8.4","title":"PRD: Configuration Directory Structure","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Config, DataDir)\n- docs/product-requirements/prd-sqlite-backend.md (JSON file layout)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-configuration-directories.md (create)\n\n## Required Sections (per prd-format rule)\n1. Problem - Current config mixed with data, JSON arrays inefficient for streaming\n2. Goals - Separate CLI config from backend data, switch to JSONL, define directory structure\n3. Requirements - CLI config directory, data directory, JSONL file format per table\n4. Non-Goals - Migration tooling, backwards compatibility\n5. Acceptance Criteria - PRD complete with numbered requirements\n\n## Design Context\n- Cupboard CLI has a configuration directory (configurable)\n- SQLite backend has a separate data directory for JSONL files\n- Each table has its own .jsonl file\n- JSONL: one JSON object per line (not JSON arrays)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T08:55:24.294851-05:00","created_by":"petardjukic","updated_at":"2026-02-05T08:57:01.776449-05:00","closed_at":"2026-02-05T08:57:01.776449-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-ag8.4","depends_on_id":"crumbs-ag8","type":"parent-child","created_at":"2026-02-05T08:55:24.297578-05:00","created_by":"petardjukic"}],"comments":[{"id":35,"issue_id":"crumbs-ag8.4","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T13:57:01Z"}]}
{"id":"crumbs-akv","title":"Align rel01.0 integration tests with test-[use-case-id] convention","description":"Rename and create Go integration test files for release 01.0 to match the test-[use-case-id] naming convention established in crumbs-euj. The YAML test suites were renamed but the Go files still use the old testNNN convention. Also create missing test suite YAML for uc003 and missing Go test files for uc002, uc003, and uc004.\n\n## Required Reading\n- .claude/rules/test-case-format.md (naming convention)\n- docs/test-suites/test-rel01.0-uc*.yaml (all rel01.0 test suites)\n- docs/use-cases/rel01.0-uc*.yaml (all rel01.0 use cases)\n- tests/integration/ (existing test files)\n\n## Scope\nRelease 01.0 only. Five child tasks:\n1. Create test suite YAML for uc003 (documentation)\n2. Rename and split test004 Go file for uc001 (code)\n3. Create Go test file for uc003 (code)\n4. Create Go test file for uc002 (code)\n5. Create Go test file for uc004 (code)\n\n## Acceptance Criteria\n- Every rel01.0 use case has its own test suite YAML\n- Every rel01.0 test suite YAML has a matching Go test file using test_[use_case_id]_test.go naming\n- go test ./tests/integration/... passes\n- No old testNNN naming remains for rel01.0 tests","status":"closed","priority":1,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:10:42.653071-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:52:55.492062-05:00","closed_at":"2026-02-07T13:52:55.492062-05:00","close_reason":"Closed"}
{"id":"crumbs-akv.1","title":"Create test suite YAML for rel01.0-uc003-crud-operations","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/use-cases/rel01.0-uc003-crud-operations.yaml (use case definition, success criteria)\n- docs/test-suites/test-rel01.0-uc001-cupboard-lifecycle.yaml (currently contains uc003 test cases mixed in)\n- .claude/rules/test-case-format.md (test suite format)\n\n## Files to Create/Modify\n- docs/test-suites/test-rel01.0-uc003-crud-operations.yaml (create)\n- docs/use-cases/rel01.0-uc003-crud-operations.yaml (update test_suite field from test-rel01.0-uc001-cupboard-lifecycle to test-rel01.0-uc003-crud-operations)\n\n## Requirements\n- Extract crumb state-machine and archival test cases from the uc001 suite into a dedicated uc003 suite\n- Test cases must cover: state transitions (draft→ready→taken→pebble, draft→dust), state-based filtering, crumb archival\n- Follow test-case-format rule (id, title, traces, preconditions, test_cases with inputs/expected)\n- Update uc003 use case's test_suite field to reference its own suite\n- Remove uc003 from the traces field in test-rel01.0-uc001-cupboard-lifecycle.yaml\n\n## Acceptance Criteria\n- [ ] test-rel01.0-uc003-crud-operations.yaml exists with correct id, title, traces\n- [ ] traces field lists rel01.0-uc003-crud-operations\n- [ ] Every uc003 success criterion (S1-S8) maps to at least one test case\n- [ ] uc003 use case test_suite field updated\n- [ ] uc001 test suite traces field no longer includes uc003","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:10:53.530218-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:15:16.40959-05:00","closed_at":"2026-02-07T13:15:16.40959-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-akv.1","depends_on_id":"crumbs-akv","type":"parent-child","created_at":"2026-02-07T13:10:53.532031-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-akv.2","title":"Rename test004 to test_rel01_0_uc001_cupboard_lifecycle_test.go and split out non-uc001 tests","description":"## Type\nCode\n\n## Required Reading\n- tests/integration/test004_cupboard_lifecycle_test.go (current file)\n- docs/test-suites/test-rel01.0-uc001-cupboard-lifecycle.yaml (uc001 test cases)\n- docs/use-cases/rel01.0-uc001-cupboard-lifecycle.yaml (uc001 definition)\n- .claude/rules/test-case-format.md (naming convention)\n\n## Files to Create/Modify\n- tests/integration/test004_cupboard_lifecycle_test.go → rename to tests/integration/test_rel01_0_uc001_cupboard_lifecycle_test.go\n- Remove tests that belong to uc003 (they move to a separate file in a sibling issue)\n\n## Requirements\n- Rename file to match test_[use_case_id]_test.go convention (replace hyphens with underscores, replace dots with underscores)\n- Update file header comment to reference test-rel01.0-uc001-cupboard-lifecycle.yaml (not test004)\n- Update file header to reference only rel01.0-uc001-cupboard-lifecycle (remove uc003 reference)\n- Keep uc001-specific tests: TestLifecycleInitialize, TestTrailCreation, TestTrailLifecycle, TestCrumbTrailLinking, TestTrailPersistence, TestFullLifecycleWorkflow\n- Remove uc003-specific tests: TestCrumbStateTransitions, TestCrumbArchival (these belong in uc003 file)\n- TestCrumbPersistence, TestCrumbDelete, TestErrorConditions may belong in uc002; evaluate and remove if so\n\n## Design Decisions\n- git mv for rename to preserve history\n\n## Acceptance Criteria\n- [ ] File renamed to test_rel01_0_uc001_cupboard_lifecycle_test.go\n- [ ] Header references correct test suite YAML and use case\n- [ ] Only uc001 tests remain in this file\n- [ ] go test ./tests/integration/... passes","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:11:01.878824-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:18:53.217557-05:00","closed_at":"2026-02-07T13:18:53.217557-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-akv.2","depends_on_id":"crumbs-akv","type":"parent-child","created_at":"2026-02-07T13:11:01.880788-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-akv.3","title":"Create test_rel01_0_uc003_crud_operations_test.go","description":"## Type\nCode\n\n## Required Reading\n- docs/use-cases/rel01.0-uc003-crud-operations.yaml (use case with success criteria)\n- docs/test-suites/test-rel01.0-uc003-crud-operations.yaml (test suite YAML, created in sibling issue)\n- tests/integration/test004_cupboard_lifecycle_test.go (source for extracted tests)\n- tests/integration/testutil.go (test helpers)\n- .claude/rules/test-case-format.md (naming and table-driven test convention)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_0_uc003_crud_operations_test.go (create)\n\n## Requirements\n- Implement table-driven Go tests for all uc003 test cases\n- Cover: crumb state transitions (draft→ready→taken→pebble, draft→dust), invalid transitions, state-based filtering, crumb archival via dust state\n- Extract and adapt TestCrumbStateTransitions and TestCrumbArchival from the old test004 file\n- Add new tests for any uc003 success criteria not covered by test004\n\n## Design Decisions\n- Table-driven tests per test-case-format convention\n- Reuse TestEnv and helpers from testutil.go\n\n## Acceptance Criteria\n- [ ] File named test_rel01_0_uc003_crud_operations_test.go\n- [ ] Header references test-rel01.0-uc003-crud-operations.yaml and rel01.0-uc003-crud-operations\n- [ ] All test cases from the uc003 test suite YAML are implemented\n- [ ] go test ./tests/integration/... passes","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:11:07.512561-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:25:17.806119-05:00","closed_at":"2026-02-07T13:25:17.806119-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-akv.3","depends_on_id":"crumbs-akv","type":"parent-child","created_at":"2026-02-07T13:11:07.514873-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-akv.4","title":"Create test_rel01_0_uc002_sqlite_crud_test.go","description":"## Type\nCode\n\n## Required Reading\n- docs/use-cases/rel01.0-uc002-sqlite-crud.yaml (use case with success criteria S1-S10)\n- docs/test-suites/test-rel01.0-uc002-sqlite-crud.yaml (30+ test cases)\n- tests/integration/testutil.go (test helpers, TestEnv)\n- .claude/rules/test-case-format.md (naming and table-driven test convention)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_0_uc002_sqlite_crud_test.go (create)\n\n## Requirements\n- Implement Go tests for all test cases in test-rel01.0-uc002-sqlite-crud.yaml\n- Covers: UUID v7 generation (S1), Get with field fidelity (S2), Set/update (S3), Fetch with empty filter (S4), Fetch with filter (S5), Delete (S6), error handling for nonexistent IDs (S7), cross-table operations (S8), JSONL persistence (S9), post-detach errors (S10)\n- Group related test cases into table-driven test functions by success criterion\n\n## Design Decisions\n- Table-driven tests per test-case-format convention\n- Reuse TestEnv and helpers from testutil.go\n- One test function per success criterion group (e.g. TestUC002_Set, TestUC002_Get, TestUC002_Fetch, etc.)\n\n## Acceptance Criteria\n- [ ] File named test_rel01_0_uc002_sqlite_crud_test.go\n- [ ] Header references test-rel01.0-uc002-sqlite-crud.yaml and rel01.0-uc002-sqlite-crud\n- [ ] All 30+ test cases from the YAML are implemented\n- [ ] go test ./tests/integration/... passes\n\n## Note\nThis is the largest issue (~500-700 LOC). Split into two issues if needed.","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:11:13.859867-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:29:12.395406-05:00","closed_at":"2026-02-07T13:29:12.395406-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-akv.4","depends_on_id":"crumbs-akv","type":"parent-child","created_at":"2026-02-07T13:11:13.862194-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-akv.5","title":"Create test_rel01_0_uc004_scaffolding_validation_test.go","description":"## Type\nCode\n\n## Required Reading\n- docs/use-cases/rel01.0-uc004-scaffolding-validation.yaml (use case with success criteria S1-S4)\n- docs/test-suites/test-rel01.0-uc004-scaffolding-validation.yaml (25+ test cases)\n- tests/integration/testutil.go (test helpers)\n- pkg/types/ (entity structs and interface definitions)\n- internal/sqlite/ (backend implementation)\n- .claude/rules/test-case-format.md (naming and table-driven test convention)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_0_uc004_scaffolding_validation_test.go (create)\n- docs/road-map.yaml (update uc004 status to done when tests pass)\n\n## Requirements\n- Implement Go tests for all test cases in test-rel01.0-uc004-scaffolding-validation.yaml\n- Compile-time checks: entity struct fields (Crumb, Trail, Property, Category, Stash, Metadata, Link), interface satisfaction (sqlite.Backend implements types.Cupboard), table constants\n- CLI checks: cupboard version prints version and lists use cases, version works without backend\n- GetTable checks: probe all 6 standard tables, verify unknown table returns error\n\n## Design Decisions\n- Table-driven tests per test-case-format convention\n- Compile-time assertions use var _ Type = (*Impl)(nil) pattern\n- CLI probes use TestEnv from testutil.go\n\n## Acceptance Criteria\n- [ ] File named test_rel01_0_uc004_scaffolding_validation_test.go\n- [ ] Header references test-rel01.0-uc004-scaffolding-validation.yaml and rel01.0-uc004-scaffolding-validation\n- [ ] All test cases from the YAML are implemented\n- [ ] go test ./tests/integration/... passes\n- [ ] uc004 status updated to done in road-map.yaml","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T13:11:20.964278-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:32:18.249771-05:00","closed_at":"2026-02-07T13:32:18.249771-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-akv.5","depends_on_id":"crumbs-akv","type":"parent-child","created_at":"2026-02-07T13:11:20.965976-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh","title":"Reconcile code with PRD specifications","description":"Deep analysis of specifications versus code revealed 12 inconsistencies where the implementation diverges from PRD requirements. This epic tracks the repairs.\n\n## Inconsistency Summary\n\n### HIGH (functional gaps)\n1. Crumb filter keys use Go struct names instead of PRD-specified keys (prd-crumbs-interface R9)\n2. Metadata filter keys use Go struct names instead of PRD-specified keys (prd-metadata-interface R7)\n3. ClearProperty deletes entry instead of resetting to type-based default (prd-crumbs-interface R5.5)\n4. Built-in property seeding not implemented (prd-properties-interface R9, prd-sqlite-backend R9)\n5. Graph audit functions not implemented (prd-sqlite-backend R10, prd-links-interface R8)\n6. Schema registration not implemented (prd-metadata-interface R9)\n7. Issue-tracking CLI commands not implemented (prd-cupboard-cli R5)\n\n### MEDIUM (missing types, stale docs)\n8. Three error types missing from code (prd-metadata-interface R10)\n9. Config validation errors not documented in any PRD\n10. Stash struct has undocumented fields (LastOperation, ChangedBy)\n\n### LOW (stale references, folded into other tasks)\n11. ARCHITECTURE.md implementation status says \"release 01.0\" but 01.0 is done\n12. Version command lists only 4 rel01.0 use cases\n\n## Approach\n\n10 tasks: 7 code tasks, 3 documentation tasks. Code tasks target 200-600 LOC each. Tasks are independent except Task 10 (issue-tracking CLI) depends on Task 4 (property seeding).","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:49:57.099226-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:55.115372-05:00","closed_at":"2026-02-08T09:27:55.115372-05:00","close_reason":"Closed"}
{"id":"crumbs-bbh.1","title":"Fix Crumb Fetch filter keys to match prd-crumbs-interface R9","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.yaml (R9: Filter Map, R10: Querying Crumbs)\n- docs/product-requirements/prd-links-interface.yaml (R4: Filter Keys — for trail_id/parent_id join patterns)\n- internal/sqlite/table.go (current buildCrumbQuery, crumbFieldToColumn, fetchCrumbs)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (modify buildCrumbQuery, crumbFieldToColumn)\n- internal/sqlite/table_test.go or tests/integration/ (add filter tests)\n\n## Requirements\n- Implement PRD-specified filter keys: \"states\" ([]string → SQL IN clause), \"trail_id\" (string → join links table for belongs_to), \"parent_id\" (string → join links table for child_of), \"properties\" (map[string]any → join crumb_properties), \"limit\" (int), \"offset\" (int)\n- Keep backward compatibility with existing Go struct-name keys (CrumbID, Name, State, etc.)\n- Results ordered by CreatedAt descending (newest first) per R9.6\n- Unknown keys ignored per R9.5\n\n## Design Decisions\n- Use SQL JOINs for trail_id and parent_id filters rather than in-memory filtering\n- Pagination via LIMIT/OFFSET SQL clauses\n- Multi-state filter via WHERE state IN (?, ?, ...)\n\n## Acceptance Criteria\n- [ ] Fetch with \"states\": [\"draft\", \"ready\"] returns only crumbs in those states\n- [ ] Fetch with \"trail_id\" returns only crumbs belonging to that trail\n- [ ] Fetch with \"limit\" and \"offset\" paginates correctly\n- [ ] Existing struct-name keys still work\n- [ ] Results ordered by CreatedAt descending\n- [ ] Tests pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:50:09.325508-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:53.892567-05:00","closed_at":"2026-02-08T09:27:53.892567-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.1","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:50:09.328707-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh.10","title":"Implement issue-tracking CLI commands per prd-cupboard-cli R5","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-cli.yaml (R5: Issue-Tracking Commands, R7: Output Formats, R8: Exit Codes, R9: Error Messages)\n- docs/use-cases/rel02.1-uc001-issue-tracking-cli.yaml (use case this enables)\n- cmd/cupboard/main.go (existing command structure)\n- cmd/cupboard/crumb.go, crumb_add.go, crumb_get.go (existing crumb subcommands)\n\n## Files to Create/Modify\n- cmd/cupboard/ready.go (create — cupboard ready command)\n- cmd/cupboard/create_cmd.go (create — cupboard create command)\n- cmd/cupboard/show.go (create — cupboard show command)\n- cmd/cupboard/update.go (create — cupboard update command)\n- cmd/cupboard/close.go (create — cupboard close command)\n- cmd/cupboard/comments.go (create — cupboard comments add command)\n- cmd/cupboard/main.go (register new commands)\n\n## Requirements\nPer prd-cupboard-cli R5:\n- cupboard ready [-n] [--type] [--json]: list crumbs in \"ready\" state; -n limits count; --type filters by type property\n- cupboard create --type --title [--description] [--json]: create crumb with issue fields (sets name, type property)\n- cupboard show \u003cid\u003e [--json]: display crumb with all properties and metadata\n- cupboard update \u003cid\u003e [--status] [--title] [--json]: modify crumb fields and state\n- cupboard close \u003cid\u003e [--json]: transition crumb to pebble state\n- cupboard comments add \u003cid\u003e \u003ctext\u003e: add comment metadata entry\n- All commands support --json flag for JSON output\n- Exit codes per R8: 0 success, 1 user error, 2 system error\n\n## Design Decisions\n- Build on top of existing Cupboard/Table interface\n- Reuse JSON output helpers from existing commands\n- Depends on built-in property seeding (Task 4) for type/priority properties\n\n## Acceptance Criteria\n- [ ] All 6 commands implemented and registered\n- [ ] --json flag produces valid JSON output\n- [ ] Exit codes follow R8 convention\n- [ ] Error messages follow R9 pattern\n- [ ] Commands work end-to-end with SQLite backend\n- [ ] Tests pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:51:40.459331-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:54.802235-05:00","closed_at":"2026-02-08T09:27:54.802235-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.10","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:51:40.462802-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh.11","title":"Align paths and config loading with prd-configuration-directories","description":"## Required Reading\n- docs/product-requirements/prd-configuration-directories.yaml (R1-R2: CWD-local defaults, R7: shutdown, R8: CLI loading)\n- internal/paths/paths.go (current platform-specific path resolution)\n- cmd/cupboard/config.go (current config loading with env var support)\n- internal/sqlite/backend.go (Detach — does not delete cupboard.db)\n\n## Files to Create/Modify\n- internal/paths/paths.go (rewrite: CWD-local defaults, remove Windows, remove env var)\n- internal/paths/paths_test.go (update tests)\n- cmd/cupboard/config.go (remove CRUMBS_CONFIG_DIR env var, update defaults)\n- cmd/cupboard/main.go (remove --config-dir env var binding if present)\n- internal/sqlite/backend.go (Detach must delete cupboard.db per R7.1)\n\n## Requirements\n- Default config dir: $(CWD)/.crumbs (R1.2)\n- Config override: --config-dir flag only, no env var (R1.3)\n- Default data dir: $(CWD)/.crumbs-db (R2.2)\n- Data override: --data-dir \u003e config.yaml data_dir \u003e CWD default (R2.3)\n- data_dir not in default config.yaml; CLI writes it once resolved (R1.7)\n- Startup: if cupboard.db exists, warn and delete before recreating (R5.1)\n- Shutdown: Detach deletes cupboard.db after flushing writes (R7.1-R7.2)\n- Remove Windows-specific paths and logic\n- Remove CRUMBS_CONFIG_DIR environment variable support\n\n## Acceptance Criteria\n- [ ] DefaultConfigDir returns $(CWD)/.crumbs\n- [ ] DefaultDataDir returns $(CWD)/.crumbs-db\n- [ ] No env var override for config dir\n- [ ] Detach deletes cupboard.db\n- [ ] Stale cupboard.db on startup triggers warning + delete\n- [ ] Tests pass on Linux and macOS","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T09:18:15.772931-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:54.958599-05:00","closed_at":"2026-02-08T09:27:54.958599-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.11","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T09:18:15.778532-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh.2","title":"Fix Metadata Fetch filter keys to match prd-metadata-interface R7","description":"## Required Reading\n- docs/product-requirements/prd-metadata-interface.yaml (R7: Filter Map, R8: Querying Metadata)\n- internal/sqlite/table.go (current buildMetadataQuery, metadataFieldToColumn, fetchMetadata)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (modify buildMetadataQuery, metadataFieldToColumn)\n- internal/sqlite/table_test.go or tests/integration/ (add filter tests)\n\n## Requirements\n- Implement PRD-specified filter keys: \"schema\" (string → maps to table_name column), \"crumb_id\" (string), \"property_id\" (string), \"content_contains\" (string → SQL LIKE %value%), \"limit\" (int), \"offset\" (int)\n- Keep backward compatibility with existing Go struct-name keys (MetadataID, TableName, CrumbID, etc.)\n- Results ordered by CreatedAt ascending (oldest first) per R7.6\n- Unknown keys ignored per R7.5, multiple keys ANDed per R7.4\n\n## Design Decisions\n- \"content_contains\" uses SQL LIKE with wildcards on both sides\n- Pagination via LIMIT/OFFSET SQL clauses\n\n## Acceptance Criteria\n- [ ] Fetch with \"schema\": \"comments\" returns only comment metadata\n- [ ] Fetch with \"content_contains\": \"keyword\" returns matching entries\n- [ ] Fetch with \"limit\" and \"offset\" paginates correctly\n- [ ] Results ordered by CreatedAt ascending\n- [ ] Tests pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:50:13.782794-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:54.054175-05:00","closed_at":"2026-02-08T09:27:54.054175-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.2","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:50:13.784521-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh.3","title":"Fix ClearProperty to reset to type-based default per prd-crumbs-interface R5.5","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.yaml (R5.5: ClearProperty resets to default, not delete)\n- docs/product-requirements/prd-properties-interface.yaml (R3.5: default values per type)\n- pkg/types/crumb.go (current ClearProperty implementation, line 123-133)\n- internal/sqlite/table.go (setCrumb and property handling)\n\n## Files to Create/Modify\n- pkg/types/crumb.go (modify ClearProperty)\n- internal/sqlite/table.go (provide property definition lookup on Set if needed)\n- pkg/types/crumb_test.go (update tests)\n\n## Requirements\n- ClearProperty must set the property value to its type-based default, not delete the entry\n- Default values per prd-properties-interface R3.5: categorical (null or first category), text (\"\"), integer (0), boolean (false), timestamp (null), list ([])\n- Properties map must still contain the entry after ClearProperty\n- ClearProperty needs access to property definitions to determine the default value\n- Current approach options: (A) pass default value as parameter, (B) use a callback/interface for lookup, (C) defer reset to Table.Set which has backend access\n\n## Design Decisions\n- Prefer approach that keeps ClearProperty as an entity method without requiring backend reference\n- Table.Set can reinitialize defaults if ClearProperty marks the entry as \"needs reset\" (e.g., sets to a sentinel value)\n\n## Acceptance Criteria\n- [ ] ClearProperty sets value to type-based default, not nil\n- [ ] Properties map still contains the property after ClearProperty\n- [ ] Idempotent: calling twice returns same result\n- [ ] ErrPropertyNotFound if property not in map\n- [ ] UpdatedAt updated\n- [ ] Tests pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:50:22.615167-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:24:53.100393-05:00","closed_at":"2026-02-08T09:24:53.100393-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.3","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:50:22.617253-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh.4","title":"Implement built-in property seeding on first startup","description":"## Required Reading\n- docs/product-requirements/prd-properties-interface.yaml (R9: Built-in Properties, R3.5: defaults)\n- docs/product-requirements/prd-sqlite-backend.yaml (R9: Built-in Properties seeding)\n- docs/product-requirements/prd-cupboard-cli.yaml (R10.4: init seeds built-in properties)\n- internal/sqlite/backend.go (Attach method, startup sequence)\n- internal/sqlite/table.go (setProperty, setCrumb property initialization)\n\n## Files to Create/Modify\n- internal/sqlite/backend.go (add seeding logic to Attach)\n- internal/sqlite/backend_test.go (add seeding tests)\n\n## Requirements\n- On first startup (empty properties.jsonl), seed five built-in properties:\n  1. priority (categorical) with categories: highest (0), high (1), medium (2), low (3), lowest (4)\n  2. type (categorical) with categories: task (0), epic (1), bug (2), chore (3)\n  3. description (text)\n  4. owner (text)\n  5. labels (list)\n- Seed only when properties storage is empty (R9.4)\n- Built-ins can be extended but not deleted or renamed (R9.5)\n- Persist seeded properties and categories to JSONL\n\n## Design Decisions\n- Check properties.jsonl emptiness or property count == 0 in SQLite after load\n- Use Table.Set for property creation to reuse existing validation and persistence\n- Use DefineCategory for category creation\n\n## Acceptance Criteria\n- [ ] After fresh Attach, Fetch on properties table returns 5 built-in properties\n- [ ] Priority has 5 categories in correct order\n- [ ] Type has 4 categories in correct order\n- [ ] Description, owner are text type; labels is list type\n- [ ] Re-Attach on existing data does NOT re-seed\n- [ ] Properties persisted to JSONL\n- [ ] Tests pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:50:40.114446-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:54.21201-05:00","closed_at":"2026-02-08T09:27:54.21201-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.4","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:50:40.116219-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh.5","title":"Add missing error types and document config validation errors","description":"## Required Reading\n- docs/product-requirements/prd-metadata-interface.yaml (R10: Error Types)\n- docs/product-requirements/prd-cupboard-core.yaml (R7: Standard Error Types, R1: Configuration)\n- pkg/types/table.go (current error definitions)\n- pkg/types/config.go (config validation errors)\n\n## Files to Create/Modify\n- pkg/types/table.go (add ErrSchemaNotFound, ErrInvalidContent, ErrInvalidFilter)\n- docs/product-requirements/prd-cupboard-core.yaml (add R1.4 or extend R7 to document config errors)\n\n## Requirements\n- Add three missing sentinel errors to table.go: ErrSchemaNotFound, ErrInvalidContent, ErrInvalidFilter\n- Document five existing config errors in prd-cupboard-core: ErrBackendEmpty, ErrBackendUnknown, ErrSyncStrategyUnknown, ErrBatchSizeInvalid, ErrBatchIntervalInvalid\n- All errors must be checkable with errors.Is\n\n## Acceptance Criteria\n- [ ] ErrSchemaNotFound, ErrInvalidContent, ErrInvalidFilter defined in table.go\n- [ ] Config validation errors documented in prd-cupboard-core R1 or R7\n- [ ] All errors use errors.New() pattern\n- [ ] Tests compile","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:50:46.178213-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:19:11.863506-05:00","closed_at":"2026-02-08T09:19:11.863506-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.5","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:50:46.179837-05:00","created_by":"petardjukic"}],"comments":[{"id":38,"issue_id":"crumbs-bbh.5","author":"petardjukic","text":"tokens: 0","created_at":"2026-02-08T14:19:11Z"}]}
{"id":"crumbs-bbh.6","title":"Implement schema registration for metadata table","description":"## Required Reading\n- docs/product-requirements/prd-metadata-interface.yaml (R2: Schema Struct, R3: Built-in Schemas, R9: Schema Registration)\n- internal/sqlite/backend.go (Attach, initialization)\n- internal/sqlite/table.go (setMetadata, metadata validation)\n\n## Files to Create/Modify\n- internal/sqlite/backend.go (add schema registry, register built-ins on Attach)\n- internal/sqlite/table.go (validate TableName on metadata Set)\n- internal/sqlite/backend_test.go (schema tests)\n\n## Requirements\n- Maintain in-memory schema registry on the backend\n- Register built-in schemas (comments, attachments) during Attach\n- Table.Set for metadata must validate TableName against registry (return ErrSchemaNotFound if not registered)\n- Schema registration validates: SchemaName non-empty, valid format (lowercase/numbers/underscores), unique (ErrDuplicateName)\n- Schemas cannot be unregistered once registered (R9.6)\n- Expose RegisterSchema method on backend or via a schemas table\n\n## Design Decisions\n- In-memory map[string]Schema on the backend struct\n- Built-in schemas hard-coded; custom schemas persisted to a schemas table or config\n- Schema validation runs in setMetadata before persistence\n\n## Acceptance Criteria\n- [ ] Built-in schemas (comments, attachments) available after Attach\n- [ ] Metadata Set with unregistered TableName returns ErrSchemaNotFound\n- [ ] Duplicate schema registration returns ErrDuplicateName\n- [ ] Invalid schema names rejected (ErrInvalidName)\n- [ ] Tests pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:50:54.298029-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:54.454687-05:00","closed_at":"2026-02-08T09:27:54.454687-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.6","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:50:54.300535-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh.7","title":"Implement graph audit functions per prd-sqlite-backend R10","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.yaml (R10: Graph Audit)\n- docs/product-requirements/prd-links-interface.yaml (R8: Graph Audit Functions)\n- internal/sqlite/backend.go (Attach startup sequence)\n- internal/sqlite/table.go (link operations, trail cascade)\n\n## Files to Create/Modify\n- internal/sqlite/audit.go (create — audit function implementations)\n- internal/sqlite/audit_test.go (create — tests)\n- internal/sqlite/backend.go (call audit on startup)\n\n## Requirements\n- Implement six audit functions:\n  1. ValidateDAG: detect cycles in child_of links using DFS or topological sort; return error with crumb_ids if cycle found\n  2. ValidateReferences: check all link from_id/to_id reference existing entities of correct type (belongs_to: crumbs→trails, child_of: crumbs→crumbs, branches_from: trails→crumbs, scoped_to: stashes→trails)\n  3. ValidateBelongsTo: each crumb has at most one belongs_to link\n  4. ValidateBranchesFrom: each trail has at most one branches_from link\n  5. ValidateScopedTo: each stash has at most one scoped_to link\n  6. ValidateTrailCrumbs: abandoned trails have no crumbs\n- Run all audits during Attach startup (R10.4); error halts Attach\n- Expose as methods on the backend (callable separately)\n\n## Design Decisions\n- Separate audit.go file for clean separation\n- DFS-based cycle detection for ValidateDAG\n- SQL queries for cardinality checks (GROUP BY + HAVING COUNT \u003e 1)\n- All audit functions return descriptive errors listing offending IDs\n\n## Acceptance Criteria\n- [ ] All 6 audit functions implemented\n- [ ] Cycles detected and reported with involved IDs\n- [ ] Dangling references detected\n- [ ] Cardinality violations detected\n- [ ] Audit runs during Attach; bad graph halts startup\n- [ ] Tests cover each audit function with valid and invalid graphs","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:51:16.610267-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:27:54.641503-05:00","closed_at":"2026-02-08T09:27:54.641503-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.7","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:51:16.61235-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bbh.8","title":"Add LastOperation and ChangedBy fields to prd-stash-interface R1","description":"## Required Reading\n- docs/product-requirements/prd-stash-interface.yaml (R1: Stash Struct, R7: History Tracking)\n- pkg/types/stash.go (current Stash struct with LastOperation, ChangedBy fields)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-stash-interface.yaml (update R1.1 fields list)\n\n## Requirements\n- Add LastOperation (string) and ChangedBy (*string) to the R1.1 field list\n- LastOperation tracks the most recent mutation operation (one of: create, set, increment, acquire, release)\n- ChangedBy tracks who performed the last mutation (optional, pointer type)\n- These fields support the history tracking mechanism in R7\n- Update any field tables or descriptions in R1 that enumerate Stash fields\n\n## Acceptance Criteria\n- [ ] R1.1 lists LastOperation and ChangedBy with types and descriptions\n- [ ] Fields linked to R7 history tracking\n- [ ] PRD remains valid YAML","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:51:22.325142-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:19:41.749752-05:00","closed_at":"2026-02-08T09:19:41.749752-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.8","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:51:22.327547-05:00","created_by":"petardjukic"}],"comments":[{"id":39,"issue_id":"crumbs-bbh.8","author":"petardjukic","text":"tokens: 0","created_at":"2026-02-08T14:19:41Z"}]}
{"id":"crumbs-bbh.9","title":"Update stale ARCHITECTURE.md status and version command output","description":"## Required Reading\n- docs/ARCHITECTURE.md (§ Implementation Status, line 479)\n- docs/road-map.yaml (current release statuses)\n- cmd/cupboard/main.go (versionCmd, lines 77-90)\n\n## Files to Create/Modify\n- docs/ARCHITECTURE.md (update Implementation Status section)\n- cmd/cupboard/main.go (update version command use case list)\n\n## Requirements\n- ARCHITECTURE.md line 479 says \"We are currently in release 01.0\" but roadmap shows 01.0 is done\n- Update to reflect actual progress: 01.0 done, 01.1 partially done, 02.1 partially done, 03.0 partially done\n- Version command lists only rel01.0 use cases (uc001-uc004); should list all completed use cases\n- Add completed use cases from rel01.1, rel02.1, rel03.0\n\n## Acceptance Criteria\n- [ ] ARCHITECTURE.md Implementation Status reflects current roadmap state\n- [ ] Version command lists all completed use cases\n- [ ] No stale release references","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T08:51:29.110252-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:22:06.76799-05:00","closed_at":"2026-02-08T09:22:06.76799-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-bbh.9","depends_on_id":"crumbs-bbh","type":"parent-child","created_at":"2026-02-08T08:51:29.112887-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bfp","title":"Implement property auto-initialization on crumb creation","description":"## Required Reading\n- docs/specs/product-requirements/prd003-crumbs-interface.yaml (R3.7 auto-init)\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R3.5, R3.6 defaults)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F3, F4)\n- internal/sqlite/table.go (crumbs table Set implementation)\n- pkg/types/crumb.go (Crumb struct)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (modify crumbs Set to auto-init properties)\n- internal/sqlite/property_defaults.go (create - default value logic)\n- internal/sqlite/backend_integration_test.go (add tests)\n\n## Requirements\n- When Table.Set creates a new crumb (empty ID), initialize all defined properties with type-based defaults:\n  - categorical: null (or first category by ordinal if categories exist)\n  - text: \"\" (empty string)\n  - integer: 0\n  - boolean: false\n  - timestamp: null\n  - list: [] (empty array)\n- Fetch all property definitions before creating crumb\n- Populate crumb.Properties map with default values\n- Per R3.6: every crumb always has a value for every defined property\n\n## Design Decisions\n- Auto-init happens in the backend's Set method for crumbs table\n- Query properties table once per crumb creation\n- Consider caching property definitions for performance\n\n## Acceptance Criteria\n- [ ] New crumb via Table.Set has all 5 built-in properties in Properties map\n- [ ] Properties have correct default values per type\n- [ ] Properties included in JSONL output\n- [ ] Integration tests verify auto-initialization","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:41.083603-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:41.083603-05:00","dependencies":[{"issue_id":"crumbs-bfp","depends_on_id":"crumbs-6ar","type":"blocks","created_at":"2026-02-08T22:53:42.755193-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-bxk","title":"Implement property auto-initialization on crumb creation","description":"## Required Reading\n- docs/specs/product-requirements/prd003-crumbs-interface.yaml (R3.7 auto-init)\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R3.5, R3.6 defaults)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F3, F4)\n- internal/sqlite/table.go (crumbs table Set implementation)\n- pkg/types/crumb.go (Crumb struct)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (modify crumbs Set to auto-init properties)\n- internal/sqlite/backend_integration_test.go (add tests)\n\n## Requirements\n- When Table.Set creates a new crumb (empty ID), initialize all defined properties with type-based defaults:\n  - categorical: null (or first category by ordinal if categories exist)\n  - text: \"\" (empty string)\n  - integer: 0\n  - boolean: false\n  - timestamp: null\n  - list: [] (empty array)\n- Fetch all property definitions before creating crumb\n- Populate crumb.Properties map with default values\n- Per R3.6: every crumb always has a value for every defined property\n\n## Design Decisions\n- Auto-init happens in the backend's Set method for crumbs table\n- Query properties table once per crumb creation\n- Consider caching property definitions for performance\n\n## Acceptance Criteria\n- [ ] New crumb via Table.Set has all 5 built-in properties in Properties map\n- [ ] Properties have correct default values per type\n- [ ] Properties included in JSONL output\n- [ ] Integration tests verify auto-initialization","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:10.52067-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:10.52067-05:00","dependencies":[{"issue_id":"crumbs-bxk","depends_on_id":"crumbs-3st","type":"blocks","created_at":"2026-02-08T22:46:11.828268-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-c0p","title":"Convert use cases from markdown to YAML format","description":"All 14 use case files in docs/use-cases/ are markdown (.md) written under an old format. The current use-case-format rule (.claude/rules/use-case-format.md) requires YAML with numbered fields (F1, T1, S1, etc.), a test_suite reference, and specific top-level structure (id, title, summary, actor, trigger, flow, touchpoints, success_criteria, out_of_scope, test_suite). This epic converts all use cases to the new format, grouped by release.","status":"closed","priority":1,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:17:53.67217-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:45:45.014135-05:00","closed_at":"2026-02-07T13:45:45.014135-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-c0p.1","title":"Convert rel01.0 use cases to YAML (4 files)","description":"## Required Reading\n- .claude/rules/use-case-format.md (target YAML format)\n- docs/use-cases/rel01.0-uc001-cupboard-lifecycle.md\n- docs/use-cases/rel01.0-uc002-sqlite-crud.md\n- docs/use-cases/rel01.0-uc003-crud-operations.md\n- docs/use-cases/rel01.0-uc004-scaffolding-validation.md\n- docs/test-suites/test004-cupboard-lifecycle.yaml (traces to uc001 and uc003)\n- docs/test-suites/test005-scaffolding-validation.yaml (traces to uc004)\n\n## Files to Create/Modify\n- Create docs/use-cases/rel01.0-uc001-cupboard-lifecycle.yaml\n- Create docs/use-cases/rel01.0-uc002-sqlite-crud.yaml\n- Create docs/use-cases/rel01.0-uc003-crud-operations.yaml\n- Create docs/use-cases/rel01.0-uc004-scaffolding-validation.yaml\n- Delete the 4 corresponding .md files\n\n## Requirements\n- Map each markdown use case to the YAML structure per use-case-format rule\n- Add numbered prefixes: F1/F2 for flow, T1/T2 for touchpoints, S1/S2 for success_criteria\n- Set test_suite field: uc001 -\u003e test004-cupboard-lifecycle, uc002 -\u003e TBD (no test suite exists), uc003 -\u003e test004-cupboard-lifecycle, uc004 -\u003e test005-scaffolding-validation\n- Preserve all content from the old markdown (no information lost)\n- Follow documentation-standards for writing style\n\n## Acceptance Criteria\n- [ ] All 4 YAML files pass the use-case-format completeness checklist\n- [ ] Old .md files deleted\n- [ ] Content preserved (no information lost in conversion)\n- [ ] Each YAML file has all required top-level fields: id, title, summary, actor, trigger, flow, touchpoints, success_criteria, out_of_scope, test_suite","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:18:10.698592-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:34:20.54833-05:00","closed_at":"2026-02-07T12:34:20.54833-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-c0p.1","depends_on_id":"crumbs-c0p","type":"parent-child","created_at":"2026-02-07T12:18:10.70185-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-c0p.2","title":"Convert rel01.1 use cases to YAML (2 files)","description":"## Required Reading\n- .claude/rules/use-case-format.md (target YAML format)\n- docs/use-cases/rel01.1-uc001-go-install.md\n- docs/use-cases/rel01.1-uc002-jsonl-git-roundtrip.md\n- docs/test-suites/test002-jsonl-git-roundtrip.yaml (traces to uc002)\n\n## Files to Create/Modify\n- Create docs/use-cases/rel01.1-uc001-go-install.yaml\n- Create docs/use-cases/rel01.1-uc002-jsonl-git-roundtrip.yaml\n- Delete the 2 corresponding .md files\n\n## Requirements\n- Map each markdown use case to the YAML structure per use-case-format rule\n- Add numbered prefixes: F1/F2 for flow, T1/T2 for touchpoints, S1/S2 for success_criteria\n- Set test_suite field: uc001 -\u003e TBD (no test suite exists), uc002 -\u003e test002-jsonl-git-roundtrip\n- Preserve all content from the old markdown (no information lost)\n- Follow documentation-standards for writing style\n\n## Acceptance Criteria\n- [ ] Both YAML files pass the use-case-format completeness checklist\n- [ ] Old .md files deleted\n- [ ] Content preserved (no information lost in conversion)\n- [ ] Each YAML file has all required top-level fields: id, title, summary, actor, trigger, flow, touchpoints, success_criteria, out_of_scope, test_suite","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:18:17.276817-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:36:19.973021-05:00","closed_at":"2026-02-07T12:36:19.973021-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-c0p.2","depends_on_id":"crumbs-c0p","type":"parent-child","created_at":"2026-02-07T12:18:17.278602-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-c0p.3","title":"Convert rel02.0 use cases to YAML (2 files)","description":"## Required Reading\n- .claude/rules/use-case-format.md (target YAML format)\n- docs/use-cases/rel02.0-uc001-property-enforcement.md\n- docs/use-cases/rel02.0-uc002-regeneration-compatibility.md\n\n## Files to Create/Modify\n- Create docs/use-cases/rel02.0-uc001-property-enforcement.yaml\n- Create docs/use-cases/rel02.0-uc002-regeneration-compatibility.yaml\n- Delete the 2 corresponding .md files\n\n## Requirements\n- Map each markdown use case to the YAML structure per use-case-format rule\n- Add numbered prefixes: F1/F2 for flow, T1/T2 for touchpoints, S1/S2 for success_criteria\n- Set test_suite field: TBD for both (no test suites exist yet)\n- Preserve all content from the old markdown (no information lost)\n- Follow documentation-standards for writing style\n\n## Acceptance Criteria\n- [ ] Both YAML files pass the use-case-format completeness checklist\n- [ ] Old .md files deleted\n- [ ] Content preserved (no information lost in conversion)\n- [ ] Each YAML file has all required top-level fields: id, title, summary, actor, trigger, flow, touchpoints, success_criteria, out_of_scope, test_suite","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:18:23.324159-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:41:32.616498-05:00","closed_at":"2026-02-07T12:41:32.616498-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-c0p.3","depends_on_id":"crumbs-c0p","type":"parent-child","created_at":"2026-02-07T12:18:23.327286-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-c0p.4","title":"Convert rel02.1 use cases to YAML (3 files)","description":"## Required Reading\n- .claude/rules/use-case-format.md (target YAML format)\n- docs/use-cases/rel02.1-uc001-issue-tracking-cli.md\n- docs/use-cases/rel02.1-uc002-table-benchmarks.md\n- docs/use-cases/rel02.1-uc003-self-hosting.md\n- docs/test-suites/test001-self-hosting.yaml (traces to uc003)\n- docs/test-suites/test003-table-benchmarks.yaml (traces to uc002)\n\n## Files to Create/Modify\n- Create docs/use-cases/rel02.1-uc001-issue-tracking-cli.yaml\n- Create docs/use-cases/rel02.1-uc002-table-benchmarks.yaml\n- Create docs/use-cases/rel02.1-uc003-self-hosting.yaml\n- Delete the 3 corresponding .md files\n\n## Requirements\n- Map each markdown use case to the YAML structure per use-case-format rule\n- Add numbered prefixes: F1/F2 for flow, T1/T2 for touchpoints, S1/S2 for success_criteria\n- Set test_suite field: uc001 -\u003e TBD (no test suite), uc002 -\u003e test003-table-benchmarks, uc003 -\u003e test001-self-hosting\n- Preserve all content from the old markdown (no information lost)\n- Follow documentation-standards for writing style\n\n## Acceptance Criteria\n- [ ] All 3 YAML files pass the use-case-format completeness checklist\n- [ ] Old .md files deleted\n- [ ] Content preserved (no information lost in conversion)\n- [ ] Each YAML file has all required top-level fields: id, title, summary, actor, trigger, flow, touchpoints, success_criteria, out_of_scope, test_suite","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:18:30.335212-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:45:03.188962-05:00","closed_at":"2026-02-07T12:45:03.188962-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-c0p.4","depends_on_id":"crumbs-c0p","type":"parent-child","created_at":"2026-02-07T12:18:30.337308-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-c0p.5","title":"Convert rel03.0 and rel99.0 use cases to YAML (3 files)","description":"## Required Reading\n- .claude/rules/use-case-format.md (target YAML format)\n- docs/use-cases/rel03.0-uc001-trail-exploration.md\n- docs/use-cases/rel99.0-uc001-blazes-templates.md\n- docs/use-cases/rel99.0-uc002-docker-bootstrap.md\n\n## Files to Create/Modify\n- Create docs/use-cases/rel03.0-uc001-trail-exploration.yaml\n- Create docs/use-cases/rel99.0-uc001-blazes-templates.yaml\n- Create docs/use-cases/rel99.0-uc002-docker-bootstrap.yaml\n- Delete the 3 corresponding .md files\n\n## Requirements\n- Map each markdown use case to the YAML structure per use-case-format rule\n- Add numbered prefixes: F1/F2 for flow, T1/T2 for touchpoints, S1/S2 for success_criteria\n- Set test_suite field: TBD for all three (no test suites exist yet)\n- Preserve all content from the old markdown (no information lost)\n- Follow documentation-standards for writing style\n\n## Acceptance Criteria\n- [ ] All 3 YAML files pass the use-case-format completeness checklist\n- [ ] Old .md files deleted\n- [ ] Content preserved (no information lost in conversion)\n- [ ] Each YAML file has all required top-level fields: id, title, summary, actor, trigger, flow, touchpoints, success_criteria, out_of_scope, test_suite","status":"closed","priority":3,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:18:37.055728-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:54:27.43712-05:00","closed_at":"2026-02-07T12:54:27.43712-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-c0p.5","depends_on_id":"crumbs-c0p","type":"parent-child","created_at":"2026-02-07T12:18:37.05795-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-cqg","title":"Write use case rel00.0-uc005-table-benchmarks","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (Table interface)\n- docs/product-requirements/prd-crumbs-interface.md (Crumb operations)\n- docs/product-requirements/prd-sqlite-backend.md (SQLite and JSONL persistence)\n- docs/ARCHITECTURE.md § System Components\n- .claude/rules/use-case-format.md\n\n## Files to Create\n- docs/use-cases/rel00.0-uc005-table-benchmarks.md\n\n## Requirements\n- The tracer bullet: run Go benchmarks against the crumbs Table with varying data sizes and measure operation latency\n- Benchmark operations: Get, Set, Delete, Fetch (with filters), SetProperty, GetProperty\n- Measure at different scales (10, 100, 1000, 10000 crumbs)\n- Include JSONL write performance (since every write syncs to JSONL)\n- Establish baseline numbers that future releases must not regress\n- Cite PRD requirements for each operation benchmarked\n- Define success criteria as observable benchmark output (go test -bench)\n\n## Design Decisions\n- This is a cross-release milestone: performance matters for self-hosting viability\n- Benchmarks live in Go test files using testing.B, not a separate tool\n- Focus on Table interface operations, not CLI overhead\n- JSONL sync cost is part of the measurement (real-world performance)\n\n## Acceptance Criteria\n- [ ] Use case follows use-case-format rule\n- [ ] Flow steps map to real Go benchmark functions\n- [ ] Architecture touchpoints cite Table interface and SQLite backend PRDs\n- [ ] Success criteria define measurable latency targets or baseline establishment\n- [ ] File saved as rel00.0-uc005-table-benchmarks.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:35:19.704122-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:48:07.70268-05:00","closed_at":"2026-02-06T23:48:07.70268-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-cuc","title":"Implement rel02.0-uc001-property-enforcement integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml\n- tests/integration/testutil.go (test patterns)\n\n## Files to Create/Modify\n- tests/integration/test_rel02_0_uc001_property_enforcement_test.go (create)\n- cmd/cupboard/main.go (update version command)\n\n## Requirements\n- Implement all test cases from test-rel02.0-uc001-property-enforcement.yaml:\n  - S1: Built-in properties seeded (5 properties)\n  - S2: New crumbs have all properties with defaults\n  - S3-S4: SetProperty/GetProperty work\n  - S5: Property definition backfills crumbs\n  - S6: GetProperties returns all properties\n  - S7: ClearProperty resets to default\n  - S8: Crumbs after definition have new property\n  - S9: Invariant - no crumb has fewer properties\n  - S10-S11: Round-trip properties\n  - S12-S15: DefineCategory/GetCategories\n\n## Design Decisions\n- Follow existing table-driven test pattern\n- Use CLI commands for all operations\n- Verify via JSON output and JSONL file inspection\n\n## Acceptance Criteria\n- [ ] All test cases from YAML implemented\n- [ ] go test ./tests/integration -run TestPropertyEnforcement passes\n- [ ] cupboard version lists rel02.0-uc001-property-enforcement","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:42.044311-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:42.044311-05:00","dependencies":[{"issue_id":"crumbs-cuc","depends_on_id":"crumbs-ozv","type":"blocks","created_at":"2026-02-08T22:53:43.479881-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-cz4","title":"Implement ClearProperty reset to type-based default","description":"## Required Reading\n- docs/specs/product-requirements/prd003-crumbs-interface.yaml (R5.5 ClearProperty)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F11)\n- pkg/types/crumb.go (current ClearProperty implementation)\n- internal/sqlite/table.go (crumbs Set validation)\n\n## Files to Create/Modify\n- internal/sqlite/table.go (handle nil property values on Set)\n- internal/sqlite/backend_integration_test.go (add tests)\n\n## Requirements\n- Per R5.5: ClearProperty sets value to nil in memory\n- Per R5.7: Table.Set resolves nil to type-based default during persistence\n- When persisting crumb with nil property values, replace with defaults:\n  - text: \"\"\n  - integer: 0\n  - boolean: false\n  - list: []\n  - categorical: null or first category\n  - timestamp: null\n- This ensures no crumb ever has a truly \"unset\" property\n\n## Design Decisions\n- Nil-to-default conversion happens in Set, not in ClearProperty\n- Lookup property definitions to get ValueType for default\n- Entity method remains simple; backend handles enforcement\n\n## Acceptance Criteria\n- [ ] ClearProperty followed by Set produces default value in JSONL\n- [ ] Get after clear returns default, not nil\n- [ ] Integration tests for each value type","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:41.379818-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:41.379818-05:00","dependencies":[{"issue_id":"crumbs-cz4","depends_on_id":"crumbs-40d","type":"blocks","created_at":"2026-02-08T22:53:43.059222-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-ddq","title":"Implement rel01.1-uc001-go-install integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel01.1-uc001-go-install.yaml\n- docs/specs/test-suites/test-rel01.1-uc001-go-install.yaml\n- tests/integration/testutil.go (test patterns)\n- tests/integration/test_rel01_1_uc004_generic_table_cli_test.go (example structure)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_1_uc001_go_install_test.go (create)\n- cmd/cupboard/main.go (update version command to include uc001)\n\n## Requirements\n- Implement integration tests validating the go install workflow using local binary\n- Test cupboard init creates data directory with all JSONL files (crumbs.jsonl, trails.jsonl, properties.jsonl, links.jsonl, stashes.jsonl, metadata.jsonl)\n- Test cupboard set and list round-trip a crumb\n- Test init is idempotent (running twice succeeds)\n- Test version command works standalone (no source checkout required)\n- Note: Tests run against locally-built binary, not actual go install from proxy\n\n## Design Decisions\n- Use existing TestEnv pattern from testutil.go\n- Table-driven tests per test-case-format rule\n- Skip actual go install tests (require network); focus on binary behavior tests\n\n## Acceptance Criteria\n- [ ] All test cases from test-rel01.1-uc001-go-install.yaml implemented (19 cases)\n- [ ] go test ./tests/integration -run TestGoInstall passes\n- [ ] cupboard version lists rel01.1-uc001-go-install","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:40.638809-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:40.638809-05:00"}
{"id":"crumbs-dhj","title":"Convert larger PRDs to YAML format","description":"## Required Reading\n- .claude/rules/prd-format.md (YAML schema with field definitions and numbering rules)\n- Each PRD being converted (read before transforming)\n\n## Files to Create\n- docs/product-requirements/prd-properties-interface.yaml (from prd-properties-interface.md)\n- docs/product-requirements/prd-crumbs-interface.yaml (from prd-crumbs-interface.md)\n- docs/product-requirements/prd-stash-interface.yaml (from prd-stash-interface.md)\n- docs/product-requirements/prd-sqlite-backend.yaml (from prd-sqlite-backend.md)\n\n## Files to Delete\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-stash-interface.md\n- docs/product-requirements/prd-sqlite-backend.md\n\n## Requirements\n- Convert each markdown PRD into YAML per the prd-format rule\n- Map existing markdown sections to YAML fields: id, title, problem, goals (G-numbered), requirements (R-grouped with R.N items), non_goals, acceptance_criteria\n- Preserve all requirement content; do not drop or summarize requirements\n- Use detail field for requirements that contain tables, code blocks, or extended structured data (especially prd-sqlite-backend which has extensive tables and schemas)\n- Update cross-references in other files that point to these PRDs with .md extension (ARCHITECTURE.md, use cases, test suites, engineering guidelines, Go source comments)\n- Delete the old .md files after creating the .yaml replacements\n\n## Design Decisions\n- prd-sqlite-backend (666 lines) has many tables and code blocks; use detail fields liberally for these requirements\n- Quote YAML strings that contain colons or special characters\n\n## Acceptance Criteria\n- [ ] All 4 YAML files pass the prd-format completeness checklist\n- [ ] Goals numbered G1, G2, ...\n- [ ] Requirements grouped as R1, R2, ... with items R1.1, R1.2, ...\n- [ ] No content lost from original markdown PRDs\n- [ ] Old .md files deleted\n- [ ] All cross-references updated to .yaml extension\n- [ ] YAML files parse without errors (valid YAML)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:26:14.665442-05:00","created_by":"petardjukic","updated_at":"2026-02-07T02:01:15.917211-05:00","closed_at":"2026-02-07T02:01:15.917211-05:00","close_reason":"Closed"}
{"id":"crumbs-do8","title":"Create missing test suites for use cases","description":"9 of 14 use cases lack dedicated test suites. The use-case-format rule requires every use case to have a corresponding test suite in docs/test-suites/. This epic creates the missing test suite YAML files, grouped by release. Each issue depends on the corresponding use case YAML conversion issue from crumbs-c0p so the agent has the finalized use case to work from.","status":"closed","priority":1,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:21:34.55166-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:45:44.906612-05:00","closed_at":"2026-02-07T13:45:44.906612-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-do8.1","title":"Create test suite for rel01.0-uc002 (sqlite-crud)","description":"## Required Reading\n- .claude/rules/test-case-format.md (target test suite format)\n- docs/use-cases/rel01.0-uc002-sqlite-crud.yaml (use case to validate, created by crumbs-c0p.1)\n- docs/product-requirements/prd-cupboard-core.yaml\n- docs/product-requirements/prd-sqlite-backend.yaml\n\n## Files to Create\n- docs/test-suites/test006-sqlite-crud.yaml\n\n## Requirements\n- Write test cases covering all success criteria (S1, S2, ...) from rel01.0-uc002\n- Follow test-case-format rule: id, title, traces, preconditions, test_cases with name/inputs/expected\n- Set traces field to rel01.0-uc002-sqlite-crud\n- Use concrete commands and checkable expected outputs\n\n## Acceptance Criteria\n- [ ] YAML passes the test-case-format completeness checklist\n- [ ] Every success criterion from the use case has at least one test case\n- [ ] traces field references rel01.0-uc002-sqlite-crud\n- [ ] File saved as test006-sqlite-crud.yaml in docs/test-suites/\n- [ ] Update rel01.0-uc002-sqlite-crud.yaml test_suite field from TBD to test006-sqlite-crud","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:21:51.379352-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:38:17.112056-05:00","closed_at":"2026-02-07T12:38:17.112056-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-do8.1","depends_on_id":"crumbs-do8","type":"parent-child","created_at":"2026-02-07T12:21:51.380713-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-do8.1","depends_on_id":"crumbs-c0p.1","type":"blocks","created_at":"2026-02-07T12:21:51.382456-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-do8.2","title":"Create test suite for rel01.1-uc001 (go-install)","description":"## Required Reading\n- .claude/rules/test-case-format.md (target test suite format)\n- docs/use-cases/rel01.1-uc001-go-install.yaml (use case to validate, created by crumbs-c0p.2)\n\n## Files to Create\n- docs/test-suites/test007-go-install.yaml\n\n## Requirements\n- Write test cases covering all success criteria (S1, S2, ...) from rel01.1-uc001\n- Follow test-case-format rule: id, title, traces, preconditions, test_cases with name/inputs/expected\n- Set traces field to rel01.1-uc001-go-install\n- Use concrete commands and checkable expected outputs\n\n## Acceptance Criteria\n- [ ] YAML passes the test-case-format completeness checklist\n- [ ] Every success criterion from the use case has at least one test case\n- [ ] traces field references rel01.1-uc001-go-install\n- [ ] File saved as test007-go-install.yaml in docs/test-suites/\n- [ ] Update rel01.1-uc001-go-install.yaml test_suite field from TBD to test007-go-install","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:21:56.647321-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:39:48.604917-05:00","closed_at":"2026-02-07T12:39:48.604917-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-do8.2","depends_on_id":"crumbs-do8","type":"parent-child","created_at":"2026-02-07T12:21:56.650279-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-do8.2","depends_on_id":"crumbs-c0p.2","type":"blocks","created_at":"2026-02-07T12:21:56.659311-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-do8.3","title":"Create test suites for rel02.0 use cases (2 suites)","description":"## Required Reading\n- .claude/rules/test-case-format.md (target test suite format)\n- docs/use-cases/rel02.0-uc001-property-enforcement.yaml (created by crumbs-c0p.3)\n- docs/use-cases/rel02.0-uc002-regeneration-compatibility.yaml (created by crumbs-c0p.3)\n- docs/product-requirements/prd-properties-interface.yaml\n- docs/product-requirements/prd-crumbs-interface.yaml\n\n## Files to Create\n- docs/test-suites/test008-property-enforcement.yaml\n- docs/test-suites/test009-regeneration-compatibility.yaml\n\n## Requirements\n- Write test cases covering all success criteria from each rel02.0 use case\n- Follow test-case-format rule: id, title, traces, preconditions, test_cases with name/inputs/expected\n- Set traces field to the respective use case ID\n- Use concrete commands and checkable expected outputs\n\n## Acceptance Criteria\n- [ ] Both YAML files pass the test-case-format completeness checklist\n- [ ] Every success criterion from each use case has at least one test case\n- [ ] traces fields reference the correct use case IDs\n- [ ] Files saved as test008-property-enforcement.yaml and test009-regeneration-compatibility.yaml\n- [ ] Update both rel02.0 use case YAML files test_suite field from TBD to the new test suite IDs","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:22:03.540894-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:47:51.298569-05:00","closed_at":"2026-02-07T12:47:51.298569-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-do8.3","depends_on_id":"crumbs-do8","type":"parent-child","created_at":"2026-02-07T12:22:03.544702-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-do8.3","depends_on_id":"crumbs-c0p.3","type":"blocks","created_at":"2026-02-07T12:22:03.54685-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-do8.4","title":"Create test suite for rel02.1-uc001 (issue-tracking-cli)","description":"## Required Reading\n- .claude/rules/test-case-format.md (target test suite format)\n- docs/use-cases/rel02.1-uc001-issue-tracking-cli.yaml (created by crumbs-c0p.4)\n- docs/product-requirements/prd-cupboard-cli.yaml\n\n## Files to Create\n- docs/test-suites/test010-issue-tracking-cli.yaml\n\n## Requirements\n- Write test cases covering all success criteria (S1, S2, ...) from rel02.1-uc001\n- Follow test-case-format rule: id, title, traces, preconditions, test_cases with name/inputs/expected\n- Set traces field to rel02.1-uc001-issue-tracking-cli\n- Use concrete commands and checkable expected outputs\n\n## Acceptance Criteria\n- [ ] YAML passes the test-case-format completeness checklist\n- [ ] Every success criterion from the use case has at least one test case\n- [ ] traces field references rel02.1-uc001-issue-tracking-cli\n- [ ] File saved as test010-issue-tracking-cli.yaml in docs/test-suites/\n- [ ] Update rel02.1-uc001-issue-tracking-cli.yaml test_suite field from TBD to test010-issue-tracking-cli","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:22:09.398208-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:49:29.958059-05:00","closed_at":"2026-02-07T12:49:29.958059-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-do8.4","depends_on_id":"crumbs-do8","type":"parent-child","created_at":"2026-02-07T12:22:09.400146-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-do8.4","depends_on_id":"crumbs-c0p.4","type":"blocks","created_at":"2026-02-07T12:22:09.402384-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-do8.5","title":"Create test suites for rel03.0 and rel99.0 use cases (3 suites)","description":"## Required Reading\n- .claude/rules/test-case-format.md (target test suite format)\n- docs/use-cases/rel03.0-uc001-trail-exploration.yaml (created by crumbs-c0p.5)\n- docs/use-cases/rel99.0-uc001-blazes-templates.yaml (created by crumbs-c0p.5)\n- docs/use-cases/rel99.0-uc002-docker-bootstrap.yaml (created by crumbs-c0p.5)\n- docs/product-requirements/prd-trails-interface.yaml\n- docs/product-requirements/prd-stash-interface.yaml\n\n## Files to Create\n- docs/test-suites/test011-trail-exploration.yaml\n- docs/test-suites/test012-blazes-templates.yaml\n- docs/test-suites/test013-docker-bootstrap.yaml\n\n## Requirements\n- Write test cases covering all success criteria from each use case\n- Follow test-case-format rule: id, title, traces, preconditions, test_cases with name/inputs/expected\n- Set traces field to the respective use case ID\n- Use concrete commands and checkable expected outputs\n\n## Acceptance Criteria\n- [ ] All 3 YAML files pass the test-case-format completeness checklist\n- [ ] Every success criterion from each use case has at least one test case\n- [ ] traces fields reference the correct use case IDs\n- [ ] Files saved as test011, test012, test013 in docs/test-suites/\n- [ ] Update all 3 use case YAML files test_suite field from TBD to the new test suite IDs","status":"closed","priority":3,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:22:16.836422-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:57:39.080537-05:00","closed_at":"2026-02-07T12:57:39.080537-05:00","close_reason":"Closed","labels":["documentation"],"dependencies":[{"issue_id":"crumbs-do8.5","depends_on_id":"crumbs-do8","type":"parent-child","created_at":"2026-02-07T12:22:16.839673-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-do8.5","depends_on_id":"crumbs-c0p.5","type":"blocks","created_at":"2026-02-07T12:22:16.842279-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-ee9","title":"Implement built-in property seeding on first startup","description":"## Required Reading\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R9 built-in properties)\n- docs/specs/product-requirements/prd002-sqlite-backend.yaml (R9 seeding)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F1, F2)\n- internal/sqlite/backend.go (current implementation)\n- pkg/types/property.go (Property struct)\n\n## Files to Create/Modify\n- internal/sqlite/backend.go (add seeding logic)\n- internal/sqlite/backend_test.go (add tests for seeding)\n\n## Requirements\n- Seed five built-in properties on first startup when properties table is empty:\n  - priority (categorical) with categories: highest(0), high(1), medium(2), low(3), lowest(4)\n  - type (categorical) with categories: task(0), epic(1), bug(2), chore(3)\n  - description (text)\n  - owner (text)\n  - labels (list)\n- Seeding is idempotent: only runs when properties table is empty\n- Built-in categories are created with DefineCategory\n- Per R9.4: existing data is never modified by seeding\n\n## Design Decisions\n- Seeding runs during Attach after schema creation\n- Check if properties table has entries before seeding\n- Use Table.Set for properties and CategoryDefiner for categories\n\n## Acceptance Criteria\n- [ ] Fresh cupboard init produces 5 properties in properties.jsonl\n- [ ] Priority property has 5 categories in categories.jsonl\n- [ ] Type property has 4 categories in categories.jsonl\n- [ ] Second init does not duplicate properties\n- [ ] Unit tests verify seeding logic","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:07:40.109287-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:07:40.109287-05:00"}
{"id":"crumbs-el0","title":"Write use case rel00.0-uc004-jsonl-git-roundtrip","description":"## Required Reading\n- docs/engineering/eng01-git-integration.md (conventions this use case validates)\n- docs/product-requirements/prd-sqlite-backend.md (JSONL persistence requirements)\n- docs/product-requirements/prd-cupboard-core.md (Attach/Detach lifecycle)\n- docs/use-cases/rel00.0-uc001-self-hosting.md (depends on JSONL working through git)\n- .claude/rules/use-case-format.md\n\n## Files to Create\n- docs/use-cases/rel00.0-uc004-jsonl-git-roundtrip.md\n\n## Requirements\n- The tracer bullet: create crumbs, commit JSONL to git, delete cupboard.db, re-attach, verify data intact from JSONL\n- Validate that JSONL files are the source of truth (not SQLite)\n- Validate that Attach rebuilds state from JSONL when cupboard.db is missing\n- Cite eng01-git-integration conventions and prd-sqlite-backend JSONL requirements\n- Define success criteria as observable git and CLI operations\n\n## Design Decisions\n- This use case validates eng01-git-integration as a cross-release concern\n- It sits between uc003 (CLI commands work) and uc001 (full self-hosting with git commits)\n- Scope is JSONL persistence and rebuild, not merge conflict handling\n\n## Acceptance Criteria\n- [ ] Use case follows use-case-format rule\n- [ ] Flow covers: create data, commit JSONL, remove DB, re-attach, verify\n- [ ] Architecture touchpoints cite prd-sqlite-backend and eng01-git-integration\n- [ ] Success criteria are demo-ready\n- [ ] File saved as rel00.0-uc004-jsonl-git-roundtrip.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:34:36.690182-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:46:12.135091-05:00","closed_at":"2026-02-06T23:46:12.135091-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-euj","title":"Rename all test suites to test-[use-case-id] convention","description":"## Required Reading\n- .claude/rules/test-case-format.md (new naming convention: test-[use-case-id].yaml)\n- All 13 files in docs/test-suites/\n- All use case files in docs/use-cases/ (to update test_suite references if present)\n\n## Files to Modify\nRename all 13 test suite files and update their internal id fields:\n\n| Old Filename | New Filename |\n|---|---|\n| test001-self-hosting.yaml | test-rel02.1-uc003-self-hosting.yaml |\n| test002-jsonl-git-roundtrip.yaml | test-rel01.1-uc002-jsonl-git-roundtrip.yaml |\n| test003-table-benchmarks.yaml | test-rel02.1-uc002-table-benchmarks.yaml |\n| test004-cupboard-lifecycle.yaml | test-rel01.0-uc001-cupboard-lifecycle.yaml |\n| test005-scaffolding-validation.yaml | test-rel01.0-uc004-scaffolding-validation.yaml |\n| test006-sqlite-crud.yaml | test-rel01.0-uc002-sqlite-crud.yaml |\n| test007-go-install.yaml | test-rel01.1-uc001-go-install.yaml |\n| test008-property-enforcement.yaml | test-rel02.0-uc001-property-enforcement.yaml |\n| test009-regeneration-compatibility.yaml | test-rel02.0-uc002-regeneration-compatibility.yaml |\n| test010-issue-tracking-cli.yaml | test-rel02.1-uc001-issue-tracking-cli.yaml |\n| test011-trail-exploration.yaml | test-rel03.0-uc001-trail-exploration.yaml |\n| test012-blazes-templates.yaml | test-rel99.0-uc001-blazes-templates.yaml |\n| test013-docker-bootstrap.yaml | test-rel99.0-uc002-docker-bootstrap.yaml |\n\nAlso update any use case files that reference old test suite IDs in their test_suite field.\n\n## Requirements\n- git mv each file to the new name\n- Update the id field inside each YAML to match the new filename (without extension)\n- Update test_suite references in any use case files (.md or .yaml)\n- test004 traces to two use cases (uc001 and uc003); name after primary (rel01.0-uc001), keep both traces\n\n## Acceptance Criteria\n- [ ] All 13 test suite files follow test-[use-case-id].yaml naming\n- [ ] Internal id field matches filename in every file\n- [ ] No broken cross-references between use cases and test suites\n- [ ] Old filenames no longer exist\n- [ ] git history preserved via git mv","status":"closed","priority":1,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:59:36.081329-05:00","created_by":"petardjukic","updated_at":"2026-02-07T13:03:59.21189-05:00","closed_at":"2026-02-07T13:03:59.21189-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-f9f","title":"Documentation Cleanup: Fix stale references after link migration","description":"Fix documentation inconsistencies found after the link migration (ARCHITECTURE Decision 10) and module rename.\n\n## Background\n\nUse cases reference removed fields (Trail.ParentCrumbID), non-existent constructors (NewCupboard), stale terminology (CrumbTable, PropertyTable), and outdated road-map statuses.\n\n## Scope\n\n- 4 use case files\n- ARCHITECTURE.md\n- road-map.yaml\n\n## Success Criteria\n\nAll documentation matches implemented code and current architecture decisions.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:10:31.057747-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:36:56.776863-05:00","closed_at":"2026-02-06T22:36:56.776863-05:00","close_reason":"Closed"}
{"id":"crumbs-f9f.1","title":"Fix use case references to removed fields and constructors","description":"## Required Reading\n- docs/ARCHITECTURE.md (Decision 10: links table)\n- pkg/types/trail.go (Trail struct)\n- pkg/sqlite/backend.go (NewBackend constructor)\n- docs/product-requirements/prd-trails-interface.md\n- docs/product-requirements/prd-sqlite-backend.md (link types)\n\n## Files to Modify\n- docs/use-cases/rel03.0-uc001-trail-exploration.md\n- docs/use-cases/rel00.0-uc001-self-hosting.md\n- docs/use-cases/rel01.0-uc001-cupboard-lifecycle.md\n- docs/use-cases/rel01.0-uc002-sqlite-crud.md\n\n## Requirements\n1. Replace Trail{ParentCrumbID: ...} with branches_from link creation\n2. Replace NewCupboard() with sqlite.NewBackend() \n3. Fix trail_id filter usage to match link-based querying\n4. Ensure all code examples compile conceptually against actual interfaces\n\n## Acceptance Criteria\n- [ ] No references to Trail.ParentCrumbID in any use case\n- [ ] No references to NewCupboard() in any use case\n- [ ] Trail branching uses branches_from links per Decision 10\n- [ ] Filter examples match link-based querying pattern","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:10:39.004731-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:15:35.10066-05:00","closed_at":"2026-02-06T22:15:35.10066-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-f9f.1","depends_on_id":"crumbs-f9f","type":"parent-child","created_at":"2026-02-06T22:10:39.015344-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-f9f.2","title":"Fix stale terminology in ARCHITECTURE.md and road-map.yaml","description":"## Required Reading\n- docs/ARCHITECTURE.md\n- docs/road-map.yaml\n- pkg/types/table.go (Table interface)\n- docs/product-requirements/prd-properties-interface.md (no PropertyTable)\n- pkg/types/trail.go (actual Trail methods)\n\n## Files to Modify\n- docs/ARCHITECTURE.md\n- docs/road-map.yaml\n\n## Requirements\n1. Replace \"CrumbTable\" with \"Table\" in ARCHITECTURE.md (uniform interface)\n2. Replace \"PropertyTable\" with standard Table interface reference in road-map.yaml\n3. Update release 03.0 deliverables to match actual Trail methods (Complete, Abandon) and remove non-existent AddCrumb, RemoveCrumb, GetCrumbs\n\n## Acceptance Criteria\n- [ ] No \"CrumbTable\" references in ARCHITECTURE.md\n- [ ] No \"PropertyTable\" references in road-map.yaml\n- [ ] Release 03.0 deliverables match code and PRDs","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:10:45.247049-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:16:32.207937-05:00","closed_at":"2026-02-06T22:16:32.207937-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-f9f.2","depends_on_id":"crumbs-f9f","type":"parent-child","created_at":"2026-02-06T22:10:45.250709-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-f9f.3","title":"Update road-map.yaml use case statuses for release 01.0","description":"## Required Reading\n- docs/road-map.yaml\n- tests/integration/ (integration tests validating use cases)\n- docs/use-cases/rel01.0-uc001-cupboard-lifecycle.md\n- docs/use-cases/rel01.0-uc002-sqlite-crud.md\n- docs/use-cases/rel01.0-uc003-crud-operations.md\n\n## Files to Modify\n- docs/road-map.yaml\n\n## Requirements\n1. Review release 01.0 use cases against implemented code and passing tests\n2. Update status from not_started to the correct status (done or partially done)\n3. Review release 02.0 and 03.0 statuses for accuracy\n\n## Acceptance Criteria\n- [ ] Release 01.0 use case statuses reflect actual implementation state\n- [ ] No use case marked not_started if the functionality exists and tests pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:10:51.946201-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:18:30.333558-05:00","closed_at":"2026-02-06T22:18:30.333558-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-f9f.3","depends_on_id":"crumbs-f9f","type":"parent-child","created_at":"2026-02-06T22:10:51.948679-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-f9f.4","title":"Expand trail lifecycle and relationship semantics in ARCHITECTURE.md","description":"## Required Reading\n- docs/ARCHITECTURE.md (Lifecycle section)\n- pkg/types/trail.go (Trail struct and methods)\n- pkg/types/link.go (link types)\n- docs/product-requirements/prd-trails-interface.md\n- docs/product-requirements/prd-sqlite-backend.md (link types table)\n\n## Files to Modify\n- docs/ARCHITECTURE.md\n\n## Requirements\n1. Add draft and pending states to trail lifecycle (TODO at line 50)\n2. Document relationship semantics for each link type (TODO at line 54):\n   - child_of: crumb is blocked until parent crumb reaches pebble\n   - branches_from: trail explores alternative approach starting from that crumb\n   - belongs_to: crumb is part of that trail and follows its lifecycle\n3. Document the rule that all crumbs must belong to a trail (TODO at line 56):\n   - Trail completion: crumbs are unlinked and become permanent record\n   - Trail abandonment: crumbs are deleted\n4. Remove the TODO comments after incorporating content\n\n## Acceptance Criteria\n- [ ] Trail lifecycle includes draft and pending states\n- [ ] Each link type has documented semantics\n- [ ] Trail completion and abandonment rules are explicit\n- [ ] No TODO comments remain in the Lifecycle section","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:11:34.431573-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:19:39.62931-05:00","closed_at":"2026-02-06T22:19:39.62931-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-f9f.4","depends_on_id":"crumbs-f9f","type":"parent-child","created_at":"2026-02-06T22:11:34.434562-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-f9f.5","title":"Document property extensions for trails and stashes in VISION.md","description":"## Required Reading\n- docs/VISION.md (Properties paragraph)\n- docs/ARCHITECTURE.md (entity types)\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-trails-interface.md\n- docs/product-requirements/prd-stash-interface.md\n\n## Files to Modify\n- docs/VISION.md\n\n## Requirements\n1. Expand the properties paragraph (TODO at line 23) to explain how properties extend trails and stashes, not just crumbs\n2. Clarify what trail properties and stash properties would look like\n3. Remove the TODO comment after incorporating content\n\n## Acceptance Criteria\n- [ ] VISION.md explains property extensions for trails and stashes\n- [ ] No TODO comment remains at the properties paragraph","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:11:37.624843-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:20:29.28283-05:00","closed_at":"2026-02-06T22:20:29.28283-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-f9f.5","depends_on_id":"crumbs-f9f","type":"parent-child","created_at":"2026-02-06T22:11:37.6273-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-f9f.6","title":"Align prd-trails-interface with ARCHITECTURE trail lifecycle","description":"## Required Reading\n- docs/ARCHITECTURE.md (Lifecycle of entities section, line 50)\n- docs/VISION.md (trail description)\n- pkg/types/trail.go (Trail struct and state constants)\n\n## Files to Modify\n- docs/product-requirements/prd-trails-interface.md\n\n## Requirements\n1. Add draft and pending states to R2.1 state table:\n   - draft: Trail is being planned; crumbs not yet committed\n   - pending: Trail defined but waiting for precondition before work begins\n2. Change R2.2 initial state from \"active\" to \"draft\"\n3. Update R2.3 state transitions to reflect full lifecycle: draft → pending → active → completed/abandoned\n4. Update R3 trail creation example to use draft initial state\n5. Reconcile R7.3 with ARCHITECTURE trail ownership rule (line 63): ARCHITECTURE says all crumbs must belong to a trail; R7.3 says crumbs without belongs_to are \"permanent or untracked\" — align these\n\n## Design Decisions\n- Follow ARCHITECTURE.md as authoritative for trail lifecycle\n- The trail ownership rule means crumbs are either on a trail or were released from a completed trail\n\n## Acceptance Criteria\n- [ ] R2.1 lists all 5 states: draft, pending, active, completed, abandoned\n- [ ] R2.2 initial state is draft\n- [ ] R3 creation example uses draft state\n- [ ] R7.3 aligned with ARCHITECTURE trail ownership rule\n- [ ] No contradictions with ARCHITECTURE.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:31:52.162249-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:33:43.046354-05:00","closed_at":"2026-02-06T22:33:43.046354-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-f9f.6","depends_on_id":"crumbs-f9f","type":"parent-child","created_at":"2026-02-06T22:31:52.164716-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-f9f.7","title":"Fix prd-sqlite-backend signature and prd-stash-interface filter example","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (R3.1: Table.Set returns (string, error))\n- docs/product-requirements/prd-sqlite-backend.md (R13.1: wrong signature)\n- docs/product-requirements/prd-stash-interface.md (R9.2, R9.2.1, R10.1)\n\n## Files to Modify\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/product-requirements/prd-stash-interface.md\n\n## Requirements\n1. prd-sqlite-backend R13.1: Change Table.Set signature from `Set(id string, data any) error` to `Set(id string, data any) (string, error)` to match prd-cupboard-core R3.1\n2. prd-stash-interface R10.1: Remove trail_id from filter example (not in R9.2 supported keys). Replace with a links-table-based query example per R9.2.1\n\n## Acceptance Criteria\n- [ ] prd-sqlite-backend R13.1 Table interface matches prd-cupboard-core R3.1\n- [ ] prd-stash-interface R10.1 example does not use trail_id filter\n- [ ] Example shows how to find trail-scoped stashes via links table","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:31:57.116699-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:34:21.208725-05:00","closed_at":"2026-02-06T22:34:21.208725-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-f9f.7","depends_on_id":"crumbs-f9f","type":"parent-child","created_at":"2026-02-06T22:31:57.118333-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-f9f.8","title":"Align ARCHITECTURE and prd-properties-interface with VISION property scope","description":"## Required Reading\n- docs/VISION.md (lines 23-27: properties extend crumbs, trails, and stashes)\n- docs/ARCHITECTURE.md (line 71: Properties section)\n- docs/product-requirements/prd-properties-interface.md\n\n## Files to Modify\n- docs/ARCHITECTURE.md\n- docs/product-requirements/prd-properties-interface.md\n\n## Requirements\n1. ARCHITECTURE.md line 71: Change \"Properties extend crumbs with custom attributes\" to match VISION scope (properties extend entities: crumbs, trails, stashes)\n2. Update ARCHITECTURE Properties Model section to reflect that properties are a general mechanism per VISION\n3. prd-properties-interface: Add a forward-looking note that the property system will extend to trails and stashes (currently scoped to crumbs; VISION establishes the broader scope)\n\n## Design Decisions\n- VISION.md is authoritative for scope and direction\n- prd-properties-interface currently specifies crumb properties only; adding a note preserves PRD accuracy while acknowledging VISION direction\n\n## Acceptance Criteria\n- [ ] ARCHITECTURE Properties section matches VISION scope\n- [ ] prd-properties-interface has note about future trail/stash property support\n- [ ] No contradictions between VISION, ARCHITECTURE, and PRD","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T22:32:02.643751-05:00","created_by":"petardjukic","updated_at":"2026-02-06T22:35:13.048052-05:00","closed_at":"2026-02-06T22:35:13.048052-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-f9f.8","depends_on_id":"crumbs-f9f","type":"parent-child","created_at":"2026-02-06T22:32:02.651292-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-gfu","title":"Interface Definition PRDs","description":"Define Cupboard interface PRDs using table accessor pattern. Each PRD specifies one table interface from prd-cupboard-core.\n\n## Scope (revised)\n\nSix PRDs total:\n1. prd-cupboard-core - Cupboard lifecycle, config, table accessors (DONE)\n2. prd-sqlite-backend - SQLite backend, JSON sync, graph model, LinkTable (DONE)\n3. prd-crumbs-interface - CrumbTable: Drop, Get, Delete, Fetch, property ops\n4. prd-trails-interface - TrailTable: Start, Get, GetCrumbs, Complete, Abandon\n5. prd-properties-interface - PropertyTable: Define, Get, List, DefineCategory\n6. prd-metadata-interface - MetadataTable: Register, Add, Get, Search\n\n## Design Decisions\n\n- Table accessor pattern: cupboard.Crumbs(), cupboard.Trails(), etc.\n- Graph model: links table for belongs_to (crumb→trail) and child_of (crumb→crumb)\n- Property values on CrumbTable (not separate interface)\n- FetchCrumbs on CrumbTable (not separate query interface)\n- LinkTable defined in prd-sqlite-backend (graph model)\n\n## Removed from original scope\n\n- prd-crumb-properties-interface (merged into CrumbTable)\n- prd-query-interface (FetchCrumbs merged into CrumbTable)\n\n## Acceptance Criteria\n\n- [ ] All six PRDs created in docs/product-requirements/\n- [ ] Each PRD follows prd-format\n- [ ] Each PRD defines Go interface matching prd-cupboard-core\n- [ ] PRDs traceable to prd-task-storage requirements","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-03T21:04:45.137607-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:22:30.764254-05:00","closed_at":"2026-02-04T11:22:30.764254-05:00","close_reason":"Closed","comments":[{"id":7,"issue_id":"crumbs-gfu","author":"petardjukic","text":"All 6 interface PRDs complete","created_at":"2026-02-04T16:22:30Z"}]}
{"id":"crumbs-gfu.1","title":"PRD: Cupboard Core Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-cupboard-core.md\n\n## Required Sections (per prd-format)\n1. Problem - Why we need a cupboard lifecycle interface\n2. Goals - Define the core cupboard contract\n3. Requirements - Go interface definition, Config struct, OpenCupboard, CloseCupboard, backend selection, error conditions\n4. Non-Goals - Implementation details, specific backend behavior\n5. Acceptance Criteria - Interface defined, config schema, error handling\n\n## Scope\n- Config struct with backend selection, backend-specific parameters\n- OpenCupboard(config) returns Cupboard instance\n- CloseCupboard() releases resources, idempotent\n- Error handling for operations after close\n- Backend interface that all backends must implement\n\n## Design Decisions\n- Config uses functional options or struct with backend-specific embedded configs\n- Cupboard interface is the main contract; backends implement it\n- Reference prd-task-storage R8, R9\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-cupboard-core.md\n- [ ] Defines Config struct with all fields\n- [ ] Defines Cupboard interface with OpenCupboard, CloseCupboard\n- [ ] Defines Backend interface\n- [ ] Documents error conditions\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:00.164888-05:00","created_by":"petardjukic","updated_at":"2026-02-03T21:07:49.837711-05:00","closed_at":"2026-02-03T21:07:49.837711-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.1","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:00.167338-05:00","created_by":"petardjukic"}],"comments":[{"id":1,"issue_id":"crumbs-gfu.1","author":"petardjukic","text":"tokens: 45000, loc: 162+0","created_at":"2026-02-04T02:07:44Z"}]}
{"id":"crumbs-gfu.2","title":"PRD: Crumbs Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-crumbs-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Core entity storage for work items\n2. Goals - Define CrumbTable interface\n3. Requirements - Crumb struct, Drop, Get, Delete, Fetch, property operations\n4. Non-Goals - Trail operations, property definitions (separate interfaces)\n5. Acceptance Criteria - Interface defined, struct documented\n\n## Scope (updated for table accessor pattern)\n- Crumb struct: crumb_id, name, state, created_at, updated_at (no trail_id - uses links)\n- CrumbTable interface from prd-cupboard-core:\n  - Drop(name) - create crumb with UUID v7\n  - Get(id) - retrieve by ID\n  - Delete(id) - remove crumb and associated data\n  - Fetch(filter) - query crumbs by properties\n  - SetProperty, GetProperty, GetProperties, ClearProperty - property values\n- State values: pending, ready, running, completed, failed\n- Filter struct for Fetch operation\n\n## Design Decisions\n- Trail membership via links table (belongs_to), not crumb field\n- Property operations on CrumbTable (not separate interface)\n- Fetch replaces separate query interface\n- Reference prd-cupboard-core R2.3\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-crumbs-interface.md\n- [ ] Defines Crumb struct (no trail_id field)\n- [ ] Defines CrumbTable interface matching prd-cupboard-core\n- [ ] Defines Filter struct for Fetch\n- [ ] Documents state values\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:07.136442-05:00","created_by":"petardjukic","updated_at":"2026-02-04T10:36:56.204119-05:00","closed_at":"2026-02-04T10:36:56.204119-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.2","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:07.14021-05:00","created_by":"petardjukic"}],"comments":[{"id":3,"issue_id":"crumbs-gfu.2","author":"petardjukic","text":"tokens: 18000","created_at":"2026-02-04T15:36:55Z"}]}
{"id":"crumbs-gfu.3","title":"PRD: Trails Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-trails-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Support exploratory work sessions with backtracking\n2. Goals - Define TrailTable interface\n3. Requirements - Trail struct, Start, Get, GetCrumbs, Complete, Abandon\n4. Non-Goals - Crumb CRUD (separate interface), link operations (prd-sqlite-backend)\n5. Acceptance Criteria - Interface defined, lifecycle documented\n\n## Scope (updated for table accessor pattern)\n- Trail struct: trail_id, parent_crumb_id, state, created_at, completed_at\n- TrailTable interface from prd-cupboard-core:\n  - Start(parentCrumbID?) - create trail, optionally deviate from crumb\n  - Get(id) - retrieve trail\n  - GetCrumbs(id) - list crumbs on trail (via belongs_to links)\n  - Complete(id) - mark completed, remove belongs_to links (crumbs become permanent)\n  - Abandon(id) - mark abandoned, delete crumbs and their links\n- Trail states: active, completed, abandoned\n\n## Design Decisions\n- Crumb membership via links table (belongs_to), queried by GetCrumbs\n- Complete removes belongs_to links (crumbs no longer belong to any trail)\n- Abandon deletes crumbs and all their links\n- Reference prd-cupboard-core R2.3, prd-sqlite-backend graph model\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-trails-interface.md\n- [ ] Defines Trail struct\n- [ ] Defines TrailTable interface matching prd-cupboard-core\n- [ ] Documents complete vs abandon semantics with links\n- [ ] Documents trail states\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:12.659552-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:13:21.786124-05:00","closed_at":"2026-02-04T11:13:21.786124-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.3","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:12.661217-05:00","created_by":"petardjukic"}],"comments":[{"id":4,"issue_id":"crumbs-gfu.3","author":"petardjukic","text":"tokens: ~15000","created_at":"2026-02-04T16:13:21Z"}]}
{"id":"crumbs-gfu.4","title":"PRD: Properties Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-properties-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Extensible property definitions without schema migrations\n2. Goals - Define PropertyTable interface\n3. Requirements - Property struct, Category struct, Define, Get, List, DefineCategory\n4. Non-Goals - Setting property values on crumbs (in CrumbTable)\n5. Acceptance Criteria - Interface defined, built-in properties listed\n\n## Scope (updated for table accessor pattern)\n- Property struct: property_id, name, description, value_type, created_at\n- Category struct: category_id, property_id, name, ordinal\n- PropertyTable interface from prd-cupboard-core:\n  - Define(name, description, valueType) - create property definition\n  - Get(id) - retrieve definition\n  - List() - list all definitions\n  - DefineCategory(propertyID, name, ordinal) - create category for categorical property\n- value_type enum: categorical, text, integer, boolean, timestamp, list\n- Built-in properties: priority, type, description, owner, labels, dependencies\n\n## Design Decisions\n- Property definitions only (not values - those are on CrumbTable)\n- Categories enable ordered enumeration for categorical properties\n- Built-in properties seeded on first startup (per prd-sqlite-backend R9)\n- Reference prd-cupboard-core R2.3\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-properties-interface.md\n- [ ] Defines Property struct\n- [ ] Defines Category struct\n- [ ] Defines PropertyTable interface matching prd-cupboard-core\n- [ ] Documents value_type enum\n- [ ] Lists built-in properties\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:05:19.061987-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:20:46.797976-05:00","closed_at":"2026-02-04T11:20:46.797976-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.4","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:05:19.063767-05:00","created_by":"petardjukic"}],"comments":[{"id":5,"issue_id":"crumbs-gfu.4","author":"petardjukic","text":"tokens: ~8000","created_at":"2026-02-04T16:20:46Z"}]}
{"id":"crumbs-gfu.5","title":"PRD: SQLite Backend","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-sqlite-backend.md\n\n## Required Sections (per prd-format)\n1. Problem - Why we need detailed SQLite backend specification\n2. Goals - Define JSON↔SQLite sync, schema, file layout\n3. Requirements - JSON file format, SQLite schema, sync operations, startup/shutdown, error handling\n4. Non-Goals - Other backends, Cupboard interface (defined elsewhere)\n5. Acceptance Criteria - Schema documented, sync behavior specified\n\n## Scope\n- JSON file format and directory layout (DataDir structure)\n- SQLite schema matching JSON structure\n- Startup: load JSON → SQLite\n- Write operations: update SQLite → persist to JSON\n- Shutdown: flush pending writes\n- Error handling: corrupt JSON, schema mismatch\n- Concurrency: single-writer, multiple-reader\n\n## Design Decisions\n- JSON is source of truth; SQLite is ephemeral query cache\n- modernc.org/sqlite (pure Go, no CGO)\n- One JSON file per table or single JSONL file\n- Reference prd-cupboard-core R7\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-sqlite-backend.md\n- [ ] JSON file format fully specified\n- [ ] SQLite schema documented\n- [ ] Sync lifecycle (startup, write, shutdown) specified\n- [ ] Error handling documented\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T21:17:26.922101-05:00","created_by":"petardjukic","updated_at":"2026-02-04T09:59:55.836462-05:00","closed_at":"2026-02-04T09:59:55.836462-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.5","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-03T21:17:26.92315-05:00","created_by":"petardjukic"}],"comments":[{"id":2,"issue_id":"crumbs-gfu.5","author":"petardjukic","text":"tokens: 25000, loc: 477+0","created_at":"2026-02-04T14:59:55Z"}]}
{"id":"crumbs-gfu.6","title":"PRD: Metadata Interface","description":"## Type\nDocumentation\n\n## Output Path\ndocs/product-requirements/prd-metadata-interface.md\n\n## Required Sections (per prd-format)\n1. Problem - Extensible metadata storage (comments, attachments, logs)\n2. Goals - Define MetadataTable interface\n3. Requirements - Metadata struct, Schema struct, Register, Add, Get, Search\n4. Non-Goals - Core crumb/trail operations (separate interfaces)\n5. Acceptance Criteria - Interface defined, built-in tables listed\n\n## Scope (from prd-cupboard-core table accessor pattern)\n- Metadata struct: metadata_id, table_name, crumb_id, property_id, content, created_at\n- Schema struct: defines fields for custom metadata tables\n- MetadataTable interface from prd-cupboard-core:\n  - Register(tableName, schema) - add new metadata table type\n  - Add(tableName, crumbID, content, propertyID?) - add metadata entry\n  - Get(tableName, crumbID) - retrieve metadata for crumb\n  - Search(tableName, filter) - search by crumb, property, or text\n- MetadataFilter struct for search\n- Built-in tables: comments, attachments\n\n## Design Decisions\n- Metadata tables are extensible at runtime\n- Schema defines structure but storage is flexible (content as text/JSON)\n- Search supports filtering by crumb_id, property_id, or text content\n- Reference prd-cupboard-core R2.3, prd-sqlite-backend R2.9\n\n## Acceptance Criteria\n- [ ] PRD saved at docs/product-requirements/prd-metadata-interface.md\n- [ ] Defines Metadata struct\n- [ ] Defines Schema struct\n- [ ] Defines MetadataTable interface matching prd-cupboard-core\n- [ ] Defines MetadataFilter for search\n- [ ] Lists built-in tables (comments, attachments)\n- [ ] Follows prd-format","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-04T10:13:31.44233-05:00","created_by":"petardjukic","updated_at":"2026-02-04T11:22:08.582849-05:00","closed_at":"2026-02-04T11:22:08.582849-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-gfu.6","depends_on_id":"crumbs-gfu","type":"parent-child","created_at":"2026-02-04T10:13:31.443413-05:00","created_by":"petardjukic"}],"comments":[{"id":6,"issue_id":"crumbs-gfu.6","author":"petardjukic","text":"tokens: ~6000","created_at":"2026-02-04T16:22:08Z"}]}
{"id":"crumbs-gkk","title":"Add category CLI commands (define-category, get-categories)","description":"## Required Reading\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (S12-S15 test cases)\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R7, R8)\n- pkg/types/property.go (DefineCategory, GetCategories methods)\n- internal/sqlite/category.go (CategoryDefiner implementation)\n\n## Files to Create/Modify\n- cmd/cupboard/category.go (create - category CLI commands)\n- cmd/cupboard/main.go (register commands)\n\n## Requirements\n- cupboard define-category \u003cproperty-name\u003e \u003ccategory-name\u003e \u003cordinal\u003e: define a category\n- cupboard get-categories \u003cproperty-name\u003e [--json]: list categories for a property\n- Property name resolved to PropertyID via lookup\n- Validate property is categorical type (ErrInvalidValueType)\n- Validate category name is unique within property (ErrDuplicateName)\n- Categories ordered by ordinal ascending, then name ascending\n- Support negative ordinals\n\n## Design Decisions\n- Accept property name not PropertyID for user convenience\n- Output JSON for machine parsing, human-readable default\n- Error exit codes per existing CLI patterns\n\n## Acceptance Criteria\n- [ ] define-category creates category and returns JSON with CategoryID\n- [ ] get-categories lists categories in correct order\n- [ ] ErrInvalidValueType for non-categorical properties\n- [ ] ErrDuplicateName for duplicate category names","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:11.112412-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:11.112412-05:00","dependencies":[{"issue_id":"crumbs-gkk","depends_on_id":"crumbs-jf2","type":"blocks","created_at":"2026-02-08T22:46:12.344293-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-gln","title":"Implement rel01.1-uc005-flat-self-hosting integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel01.1-uc005-flat-self-hosting.yaml\n- docs/specs/test-suites/test-rel01.1-uc005-flat-self-hosting.yaml\n- tests/integration/test_rel01_1_uc004_generic_table_cli_test.go (similar patterns)\n- eng01-git-integration.md (JSONL persistence context)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_1_uc005_flat_self_hosting_test.go (create)\n- cmd/cupboard/main.go (update version command)\n\n## Requirements\n- Implement integration tests for flat self-hosting workflow\n- Test create crumb with name and state via generic set command\n- Test list with state filter (State=draft, State=taken, State=pebble)\n- Test full workflow: draft -\u003e taken -\u003e pebble state transitions\n- Test JSONL persistence survives database deletion\n- Test do-work cycle (create, list draft, claim, close)\n- Test make-work cycle (list existing, create new)\n- Update version command to list rel01.1-uc005\n\n## Design Decisions\n- Use generic table commands only (set, get, list, delete) - no property or issue-tracking commands\n- Simulate script workflows via test steps\n- Follow existing table-driven test patterns\n\n## Acceptance Criteria\n- [ ] All test cases from test-rel01.1-uc005-flat-self-hosting.yaml implemented\n- [ ] go test ./tests/integration -run TestFlatSelfHosting passes\n- [ ] cupboard version lists rel01.1-uc005-flat-self-hosting","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:10.230618-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:10.230618-05:00","dependencies":[{"issue_id":"crumbs-gln","depends_on_id":"crumbs-vkf","type":"blocks","created_at":"2026-02-08T22:46:11.713145-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-gx7","title":"Audit test suites for compliance with use cases, PRDs, and rules","description":"## Required Reading\n- All docs/test-suites/*.yaml files\n- All tests/integration/*_test.go files\n- All docs/use-cases/*.md files\n- .claude/rules/test-case-format.md\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-sqlite-backend.md\n\n## Files to Modify\n- Any test suite YAML or Go file that needs correction\n\n## Requirements\n1. Verify every YAML test case traces to a use case or PRD requirement\n2. Verify every use case success criterion has at least one test case covering it\n3. Verify YAML and Go files follow naming conventions (test-case-format.md)\n4. Verify Go files use table-driven tests\n5. Verify YAML fields match required format (id, title, traces, preconditions, test_cases)\n6. Fix any non-compliance found; file new issues for gaps too large to fix in this task\n\n## Acceptance Criteria\n- [ ] Every test suite traces to at least one use case or PRD\n- [ ] No orphan test cases (Go tests without YAML spec)\n- [ ] All naming conventions followed\n- [ ] All Go test files use table-driven pattern\n- [ ] Gaps documented as fixes or new issues\n\n## Dependencies\n- crumbs-566 (rename cli_test.go)\n- crumbs-pu4 (extract rel01.0 tests)\n- crumbs-3wg (implement test002)\n- crumbs-8xl (implement test003)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:14:08.577304-05:00","created_by":"petardjukic","updated_at":"2026-02-07T01:46:08.504168-05:00","closed_at":"2026-02-07T01:46:08.504168-05:00","close_reason":"Closed"}
{"id":"crumbs-jf2","title":"Add property CLI commands (set-property, get-property, clear-property, get-properties)","description":"## Required Reading\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (S3, S4, S6, S7 test cases)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F5, F6, F11)\n- cmd/cupboard/crumb.go (existing crumb subcommand pattern)\n- prd003-crumbs-interface.yaml (R5 property methods)\n\n## Files to Create/Modify\n- cmd/cupboard/property.go (create - property CLI commands)\n- cmd/cupboard/main.go (register commands)\n\n## Requirements\n- cupboard set-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e \u003cvalue\u003e: set property value on entity\n- cupboard get-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e: get single property value\n- cupboard get-properties \u003ctable\u003e \u003cid\u003e: get all properties as JSON\n- cupboard clear-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e: reset property to default\n- Property name resolved to PropertyID via lookup\n- Validate value matches property type (text, integer, list as JSON, etc.)\n- Error messages for invalid property names, type mismatches\n\n## Design Decisions\n- Commands work on crumbs table initially (trail/stash properties future)\n- Accept property name (human readable) not PropertyID\n- List values as JSON array for list type\n\n## Acceptance Criteria\n- [ ] set-property updates property and persists\n- [ ] get-property returns current value\n- [ ] get-properties returns all properties as JSON object\n- [ ] clear-property resets to default\n- [ ] Appropriate error messages for validation failures","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:10.956385-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:10.956385-05:00","dependencies":[{"issue_id":"crumbs-jf2","depends_on_id":"crumbs-7q2","type":"blocks","created_at":"2026-02-08T22:46:12.20854-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-jp1","title":"Write use case rel00.0-uc003-issue-tracking-cli","description":"## Required Reading\n- docs/use-cases/rel00.0-uc001-self-hosting.md (Phase 1 is the basis)\n- docs/test-suites/test001-self-hosting.yaml (test cases this use case drives)\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-properties-interface.md\n- .claude/rules/use-case-format.md\n\n## Files to Create\n- docs/use-cases/rel00.0-uc003-issue-tracking-cli.md\n\n## Requirements\n- Extract Phase 1 of uc001 into a standalone use case\n- The tracer bullet: run the 7 issue-tracking commands (create, ready, update, close, show, list, comments) against a fresh cupboard and verify correct output\n- Reference test001-self-hosting.yaml as the validation suite\n- Cite PRD requirements for each command (Table.Get, Table.Set, Table.Fetch, properties)\n- Define success criteria as observable CLI output (both human-readable and --json)\n\n## Design Decisions\n- This use case sits between rel02.0 (properties exist) and uc001 (full self-hosting)\n- It drives implementation of cmd/cupboard issue-tracking commands only, not script changes\n\n## Acceptance Criteria\n- [ ] Use case follows use-case-format rule\n- [ ] Flow steps map to real CLI commands with concrete examples\n- [ ] Architecture touchpoints cite PRD requirements\n- [ ] Success criteria are demo-ready (run command, observe output)\n- [ ] File saved as rel00.0-uc003-issue-tracking-cli.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:34:30.008564-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:44:40.95192-05:00","closed_at":"2026-02-06T23:44:40.95192-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-jz1","title":"Blazes","description":"Documentation for workflow templates feature.\n\nTemplates are predefined workflow patterns stored as YAML files that agents can discover, select based on semantic metadata, and instantiate with parameters.\n\nIssues:\n1. Use case: Agent discovers and uses workflow templates\n2. PRD: Template format and instantiation (future)","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T08:47:16.833647-05:00","created_by":"petardjukic","updated_at":"2026-02-05T14:25:39.289766-05:00","closed_at":"2026-02-05T14:25:39.289766-05:00","close_reason":"Closed"}
{"id":"crumbs-jz1.1","title":"Write use case: Agent uses blazes","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/VISION.md (trails concept)\n- docs/use-cases/uc002-self-hosting.md (trail workflow reference)\n- .claude/rules/use-case-format.md (format rule)\n\n## Files to Create/Modify\n- docs/use-cases/uc005-workflow-templates.md (create)\n\n## Required Sections (per use-case-format)\n1. Summary - Agent uses predefined templates to instantiate trails for common workflows\n2. Actor and trigger - Agent needs to perform a known workflow pattern\n3. Flow:\n   - Discover available templates from template directory\n   - Read template metadata (name, description, tags, parameters)\n   - Select template based on semantic match to current task\n   - Extract required parameters from template definition\n   - (Future) Instantiate template with parameter values\n4. Architecture touchpoints - Template directory, YAML parser, parameter extraction\n5. Success/demo criteria - Agent can list, describe, and select templates\n6. Out of scope - Instantiation mechanism (deferred to future PRD)\n\n## Acceptance Criteria\n- [ ] Use case follows use-case-format rule\n- [ ] Describes template YAML structure (name, description, tags, parameters, trail definition)\n- [ ] Describes agent discovery and selection flow\n- [ ] Shows example template YAML\n- [ ] Explicitly marks instantiation as out of scope / future PRD\n- [ ] File saved as uc005-workflow-templates.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T08:47:29.879255-05:00","created_by":"petardjukic","updated_at":"2026-02-05T11:06:32.223567-05:00","closed_at":"2026-02-05T11:06:32.223567-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-jz1.1","depends_on_id":"crumbs-jz1","type":"parent-child","created_at":"2026-02-05T08:47:29.880889-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7","title":"Reconcile test suite YAMLs with Go test implementations","description":"The test suite YAML specs in docs/test-suites/ were written independently from the Go test implementations in tests/integration/. The YAMLs describe ideal test cases; the Go files implement what was actually built. These have diverged.\n\nThis epic reconciles each test suite YAML to match its Go test implementation. For each of the 13 use cases with Go tests, the agent reads the use case, test suite YAML, and Go test file, then rewrites the test suite YAML so that:\n\n1. Every Go test function/subtest maps to a named test_case in the YAML\n2. Test cases that exist in YAML but have no Go implementation are removed or marked\n3. Inputs and expected outputs match what the Go test actually asserts\n4. Test case count reflects reality\n\nThis is documentation work (output under docs/test-suites/). No code changes.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:51:54.479661-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:06.780261-05:00","closed_at":"2026-02-08T09:28:06.780261-05:00","close_reason":"Closed"}
{"id":"crumbs-kc7.1","title":"Reconcile test-rel01.0-uc001-cupboard-lifecycle with Go tests","description":"## Required Reading\n- docs/use-cases/rel01.0-uc001-cupboard-lifecycle.yaml (success criteria S1-S7)\n- docs/test-suites/test-rel01.0-uc001-cupboard-lifecycle.yaml (19 YAML test cases)\n- tests/integration/test_rel01_0_uc001_cupboard_lifecycle_test.go (6 Go funcs, 3 subtests, 309 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel01.0-uc001-cupboard-lifecycle.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:05.659129-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:04.629161-05:00","closed_at":"2026-02-08T09:28:04.629161-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.1","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:05.662565-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.10","title":"Reconcile test-rel02.1-uc003-self-hosting with Go tests","description":"## Required Reading\n- docs/use-cases/rel02.1-uc003-self-hosting.yaml (success criteria)\n- docs/test-suites/test-rel02.1-uc003-self-hosting.yaml (24 YAML test cases)\n- tests/integration/test_rel02_1_uc003_self_hosting_test.go (12 Go funcs, 6 subtests, 568 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel02.1-uc003-self-hosting.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:53:04.159714-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:06.14863-05:00","closed_at":"2026-02-08T09:28:06.14863-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.10","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:53:04.161586-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.11","title":"Reconcile test-rel02.1-uc004-metadata-lifecycle with Go tests","description":"## Required Reading\n- docs/use-cases/rel02.1-uc004-metadata-lifecycle.yaml (success criteria)\n- docs/test-suites/test-rel02.1-uc004-metadata-lifecycle.yaml (17 YAML test cases)\n- tests/integration/test_rel02_1_uc004_metadata_lifecycle_test.go (17 Go funcs, 1 subtest, 757 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel02.1-uc004-metadata-lifecycle.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:53:09.916096-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:06.297212-05:00","closed_at":"2026-02-08T09:28:06.297212-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.11","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:53:09.917747-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.12","title":"Reconcile test-rel03.0-uc002-link-management with Go tests","description":"## Required Reading\n- docs/use-cases/rel03.0-uc002-link-management.yaml (success criteria)\n- docs/test-suites/test-rel03.0-uc002-link-management.yaml (28 YAML test cases)\n- tests/integration/test_rel03_0_uc002_link_management_test.go (27 Go funcs, 996 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel03.0-uc002-link-management.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:53:16.256122-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:06.448815-05:00","closed_at":"2026-02-08T09:28:06.448815-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.12","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:53:16.258786-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.13","title":"Reconcile test-rel03.0-uc003-stash-operations with Go tests","description":"## Required Reading\n- docs/use-cases/rel03.0-uc003-stash-operations.yaml (success criteria)\n- docs/test-suites/test-rel03.0-uc003-stash-operations.yaml (43 YAML test cases)\n- tests/integration/test_rel03_0_uc003_stash_operations_test.go (37 Go funcs, 1168 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel03.0-uc003-stash-operations.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:53:22.681194-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:06.602024-05:00","closed_at":"2026-02-08T09:28:06.602024-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.13","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:53:22.683583-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.2","title":"Reconcile test-rel01.0-uc002-table-crud with Go tests","description":"## Required Reading\n- docs/use-cases/rel01.0-uc002-sqlite-crud.yaml (success criteria)\n- docs/test-suites/test-rel01.0-uc002-sqlite-crud.yaml (37 YAML test cases)\n- tests/integration/test_rel01_0_uc002_sqlite_crud_test.go (26 Go funcs, 8 subtests, 942 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel01.0-uc002-sqlite-crud.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:11.875985-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:04.785572-05:00","closed_at":"2026-02-08T09:28:04.785572-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.2","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:11.878158-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.3","title":"Reconcile test-rel01.0-uc003-crumb-lifecycle with Go tests","description":"## Required Reading\n- docs/use-cases/rel01.0-uc003-crud-operations.yaml (success criteria)\n- docs/test-suites/test-rel01.0-uc003-crud-operations.yaml (22 YAML test cases)\n- tests/integration/test_rel01_0_uc003_crud_operations_test.go (9 Go funcs, 4 subtests, 425 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel01.0-uc003-crud-operations.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:17.982244-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:04.937388-05:00","closed_at":"2026-02-08T09:28:04.937388-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.3","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:17.98453-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.4","title":"Reconcile test-rel01.0-uc004-scaffolding-validation with Go tests","description":"## Required Reading\n- docs/use-cases/rel01.0-uc004-scaffolding-validation.yaml (success criteria)\n- docs/test-suites/test-rel01.0-uc004-scaffolding-validation.yaml (22 YAML test cases)\n- tests/integration/test_rel01_0_uc004_scaffolding_validation_test.go (19 Go funcs, 4 subtests, 464 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel01.0-uc004-scaffolding-validation.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:24.05643-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:05.090365-05:00","closed_at":"2026-02-08T09:28:05.090365-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.4","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:24.058066-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.5","title":"Reconcile test-rel01.0-uc005-crumbs-table-benchmarks with Go tests","description":"## Required Reading\n- docs/use-cases/rel01.0-uc005-crumbs-table-benchmarks.yaml (success criteria)\n- docs/test-suites/test-rel01.0-uc005-crumbs-table-benchmarks.yaml (14 YAML test cases)\n- tests/integration/test_rel01_0_uc005_crumbs_table_benchmarks_test.go (14 Go funcs, 271 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel01.0-uc005-crumbs-table-benchmarks.yaml\n\n## Requirements\n1. Read the Go test file and catalog every benchmark function\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go benchmark, identify which YAML test case it maps to\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go benchmark\n   - Inputs and expected outputs match what the Go benchmark actually measures\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go benchmarks not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go benchmark function has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:30.356368-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:05.237703-05:00","closed_at":"2026-02-08T09:28:05.237703-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.5","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:30.358113-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.6","title":"Reconcile test-rel01.1-uc002-jsonl-git-roundtrip with Go tests","description":"## Required Reading\n- docs/use-cases/rel01.1-uc002-jsonl-git-roundtrip.yaml (success criteria)\n- docs/test-suites/test-rel01.1-uc002-jsonl-git-roundtrip.yaml (32 YAML test cases)\n- tests/integration/test_rel01_1_uc002_jsonl_git_roundtrip_test.go (8 Go funcs, 10 subtests, 716 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel01.1-uc002-jsonl-git-roundtrip.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:37.044685-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:05.41987-05:00","closed_at":"2026-02-08T09:28:05.41987-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.6","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:37.046438-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.7","title":"Reconcile test-rel01.1-uc003-configuration-loading with Go tests","description":"## Required Reading\n- docs/use-cases/rel01.1-uc003-configuration-loading.yaml (success criteria)\n- docs/test-suites/test-rel01.1-uc003-configuration-loading.yaml (12 YAML test cases)\n- tests/integration/test_rel01_1_uc003_configuration_loading_test.go (4 Go funcs, 10 subtests, 571 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel01.1-uc003-configuration-loading.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:43.129057-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:05.618314-05:00","closed_at":"2026-02-08T09:28:05.618314-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.7","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:43.130921-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.8","title":"Reconcile test-rel01.1-uc004-generic-table-cli with Go tests","description":"## Required Reading\n- docs/use-cases/rel01.1-uc004-generic-table-cli.yaml (success criteria)\n- docs/test-suites/test-rel01.1-uc004-generic-table-cli.yaml (18 YAML test cases)\n- tests/integration/test_rel01_1_uc004_generic_table_cli_test.go (1 Go func, 12 subtests, 520 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel01.1-uc004-generic-table-cli.yaml\n\n## Requirements\n1. Read the Go test file and catalog every test function and subtest (t.Run)\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go test, identify which YAML test case it maps to (by name or behavior)\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go test\n   - Inputs and expected outputs match what the Go test actually asserts\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go tests not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go test function/subtest has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:50.915056-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:05.807129-05:00","closed_at":"2026-02-08T09:28:05.807129-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.8","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:50.917946-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-kc7.9","title":"Reconcile test-rel02.1-uc002-table-benchmarks with Go tests","description":"## Required Reading\n- docs/use-cases/rel02.1-uc002-table-benchmarks.yaml (success criteria)\n- docs/test-suites/test-rel02.1-uc002-table-benchmarks.yaml (23 YAML test cases)\n- tests/integration/test_rel02_1_uc002_table_benchmarks_test.go (21 Go funcs, 536 lines)\n\n## Files to Modify\n- docs/test-suites/test-rel02.1-uc002-table-benchmarks.yaml\n\n## Requirements\n1. Read the Go test file and catalog every benchmark function\n2. Read the YAML test suite and catalog every test_case by name\n3. For each Go benchmark, identify which YAML test case it maps to\n4. Rewrite the YAML so that:\n   - Every test_case corresponds to an implemented Go benchmark\n   - Inputs and expected outputs match what the Go benchmark actually measures\n   - Test cases with no Go implementation are removed\n   - New test cases are added for Go benchmarks not in the YAML\n5. Preserve the id, title, traces, preconditions, and tags fields\n6. Follow test-case-format rule\n\n## Acceptance Criteria\n- [ ] Every Go benchmark function has a corresponding YAML test_case\n- [ ] No YAML test_case lacks a Go implementation\n- [ ] Inputs and expected outputs reflect actual Go assertions\n- [ ] File passes YAML lint","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T22:52:56.947825-05:00","created_by":"petardjukic","updated_at":"2026-02-08T09:28:06.000204-05:00","closed_at":"2026-02-08T09:28:06.000204-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-kc7.9","depends_on_id":"crumbs-kc7","type":"parent-child","created_at":"2026-02-07T22:52:56.949995-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-l3x","title":"SQLite Backend Implementation","description":"Implement the SQLite backend with ORM pattern:\n- Uniform Table interface (Get/Set/Delete/Fetch)\n- Entity types with methods (Crumb, Trail, Property, Stash, Metadata)\n- SQLite backend with JSON persistence\n- Use case demonstrating CRUD operations\n- CLI commands for table operations\n\nThis epic delivers the core storage functionality.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:45.23551-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:49:48.568433-05:00","closed_at":"2026-02-04T21:49:48.568433-05:00","close_reason":"Closed"}
{"id":"crumbs-l3x.1","title":"Create uc004-sqlite-crud.md use case","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md (SQLite backend spec)\n- docs/product-requirements/prd-crumbs-interface.md (Crumb entity)\n- docs/use-cases/uc001-crud-operations.md (current CRUD use case)\n- .claude/rules/use-case-format.md (use case format rule)\n\n## Files to Create/Modify\n- docs/use-cases/uc004-sqlite-crud.md (create)\n\n## Requirements\nCreate use case demonstrating SQLite backend CRUD operations:\n1. Summary: How to perform CRUD operations on crumbs using SQLite backend\n2. Actor: Developer or agent using Crumbs with SQLite\n3. Flow: Attach SQLite backend → Get table → Create crumb → Get crumb → Update via entity methods → Save → Delete\n4. Architecture touchpoints: Cupboard, Table, Crumb entity, SQLite backend\n5. Success criteria: Crumbs persisted to JSON, queryable via SQLite\n6. Out of scope: Trails, properties, stashes (covered in later use cases)\n\n## Design Decisions\n- Focus on basic CRUD for crumbs table\n- Demonstrate ORM pattern (Get entity → modify → Set)\n- Show JSON persistence\n\n## Acceptance Criteria\n- [ ] Summary states SQLite CRUD workflow clearly\n- [ ] Actor and trigger defined\n- [ ] Flow shows end-to-end CRUD (Attach → GetTable → Get/Set/Delete)\n- [ ] Architecture touchpoints list Cupboard, Table, Crumb, SQLite backend\n- [ ] Success/demo criteria are checkable\n- [ ] File follows use-case-format rule with numeric prefix uc004","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:07.430381-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:00:49.124477-05:00","closed_at":"2026-02-04T21:00:49.124477-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.1","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:07.436875-05:00","created_by":"petardjukic"}],"comments":[{"id":26,"issue_id":"crumbs-l3x.1","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T02:00:46Z"}]}
{"id":"crumbs-l3x.2","title":"Implement entity types in pkg/types","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md (Crumb entity spec)\n- docs/product-requirements/prd-trails-interface.md (Trail entity spec)\n- docs/product-requirements/prd-properties-interface.md (Property entity spec)\n- docs/product-requirements/prd-stash-interface.md (Stash entity spec)\n- docs/product-requirements/prd-metadata-interface.md (Metadata entity spec)\n\n## Files to Create/Modify\n- pkg/types/crumb.go (create)\n- pkg/types/trail.go (create)\n- pkg/types/property.go (create)\n- pkg/types/stash.go (create)\n- pkg/types/metadata.go (create)\n\n## Requirements\nImplement entity structs per updated PRDs:\n1. Crumb struct: CrumbID, Name, State, CreatedAt, UpdatedAt, Properties (map[string]any)\n2. Trail struct: TrailID, ParentCrumbID, State, CreatedAt, CompletedAt\n3. Property struct: PropertyID, Name, ValueType, Description, CreatedAt\n4. Category struct: CategoryID, PropertyID, Name, Ordinal\n5. Stash struct: StashID, TrailID, Name, StashType, Value, Version, CreatedAt\n6. Metadata struct: MetadataID, CrumbID, TableName, Content, PropertyID, CreatedAt\n7. Link struct: LinkID, LinkType, FromID, ToID\n\n## Design Decisions\n- All entities are plain structs (no embedded methods yet)\n- Use time.Time for timestamps\n- Use string for IDs (UUID v7 will be generated by backend)\n- Properties field on Crumb is map[string]any\n\n## Acceptance Criteria\n- [ ] All entity structs defined with correct fields\n- [ ] Field types match PRD specs\n- [ ] Files saved in pkg/types/\n- [ ] Go code compiles","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:15.306509-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:54:18.172661-05:00","closed_at":"2026-02-04T20:54:18.172661-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.2","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:15.308138-05:00","created_by":"petardjukic"}],"comments":[{"id":24,"issue_id":"crumbs-l3x.2","author":"petardjukic","text":"tokens: 25000","created_at":"2026-02-05T01:54:17Z"}]}
{"id":"crumbs-l3x.3","title":"Implement entity methods in pkg/types","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md (Crumb methods)\n- docs/product-requirements/prd-trails-interface.md (Trail methods)\n- docs/product-requirements/prd-stash-interface.md (Stash methods)\n- pkg/types/crumb.go (Crumb struct)\n- pkg/types/trail.go (Trail struct)\n- pkg/types/stash.go (Stash struct)\n\n## Files to Create/Modify\n- pkg/types/crumb.go (update - add methods)\n- pkg/types/trail.go (update - add methods)\n- pkg/types/stash.go (update - add methods)\n\n## Requirements\nImplement entity methods per updated PRDs:\n1. Crumb methods: SetState(state), Complete(), Archive(), Fail(), SetProperty(name, value), GetProperty(name), ClearProperty(name)\n2. Trail methods: Complete(), Abandon()\n3. Stash methods: SetValue(value), GetValue(), Increment(delta) (for counter type)\n4. Property methods: DefineCategory(name, ordinal) returns Category struct\n\n## Design Decisions\n- Methods update struct fields in place\n- Caller must save entity via Table.Set after modifying\n- SetState validates state transitions\n- Property methods on Crumb manipulate Properties map\n\n## Acceptance Criteria\n- [ ] All entity methods implemented\n- [ ] Methods update struct fields correctly\n- [ ] State validation logic in place (for Crumb.SetState)\n- [ ] Go code compiles\n- [ ] Unit tests for entity methods","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:21.942717-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:21:01.608357-05:00","closed_at":"2026-02-04T21:21:01.608357-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.3","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:21.944391-05:00","created_by":"petardjukic"}],"comments":[{"id":29,"issue_id":"crumbs-l3x.3","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T02:21:01Z"},{"id":30,"issue_id":"crumbs-l3x.3","author":"petardjukic","text":"stats: +268 LOC (prod), +652 LOC (test), +0 words (docs)","created_at":"2026-02-05T02:22:11Z"}]}
{"id":"crumbs-l3x.4","title":"Implement SQLite backend in internal/sqlite","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md (SQLite backend spec)\n- docs/product-requirements/prd-cupboard-core.md (Cupboard and Table interfaces)\n- pkg/types/cupboard.go (Cupboard interface)\n- pkg/types/table.go (Table interface)\n- pkg/types/crumb.go (Crumb entity)\n\n## Files to Create/Modify\n- internal/sqlite/backend.go (create)\n- internal/sqlite/table.go (create)\n- internal/sqlite/schema.sql (create)\n\n## Requirements\nImplement SQLite backend per prd-sqlite-backend:\n1. Backend struct implementing Cupboard interface\n2. Table implementation for uniform Get/Set/Delete/Fetch operations\n3. Entity hydration: table rows → entity objects (Crumb, Trail, etc.)\n4. Entity persistence: entity objects → table rows\n5. Table name routing: GetTable(\"crumbs\") → crumbs table\n6. SQLite schema creation on first startup\n7. Use modernc.org/sqlite (pure Go)\n\n## Design Decisions\n- Backend struct holds SQLite connection\n- Table struct holds reference to backend and table name\n- Hydration uses type switch on table name\n- Schema includes all tables: crumbs, trails, properties, categories, stashes, metadata, links\n- SQLite is query cache; JSON is source of truth (handled in separate issue)\n\n## Acceptance Criteria\n- [ ] Backend implements Cupboard interface (GetTable, Attach, Detach)\n- [ ] Table implements Table interface (Get, Set, Delete, Fetch)\n- [ ] Entity hydration works for all entity types\n- [ ] Table name routing works\n- [ ] Schema creation on Attach\n- [ ] Go code compiles\n- [ ] Unit tests for backend operations","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:30.120679-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:35:13.621039-05:00","closed_at":"2026-02-04T21:35:13.621039-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.4","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:30.122479-05:00","created_by":"petardjukic"}],"comments":[{"id":31,"issue_id":"crumbs-l3x.4","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T02:35:13Z"}]}
{"id":"crumbs-l3x.5","title":"Implement JSON persistence in internal/sqlite","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md (JSON persistence spec)\n- internal/sqlite/backend.go (SQLite backend)\n\n## Files to Create/Modify\n- internal/sqlite/json.go (create)\n- internal/sqlite/backend.go (update - integrate JSON sync)\n\n## Requirements\nImplement JSON ↔ SQLite synchronization per prd-sqlite-backend:\n1. On Attach: Load JSON files → SQLite tables\n2. On Set/Delete: Write to JSON first, then update SQLite\n3. JSON file per table: crumbs.json, trails.json, properties.json, etc.\n4. JSON format: array of entity objects\n5. Atomic writes (temp file + rename)\n\n## Design Decisions\n- JSON is source of truth\n- SQLite is query cache (for filtering, joins, indexing)\n- JSON files stored in DataDir\n- Use json.Marshal/Unmarshal for serialization\n- Atomic writes prevent corruption\n\n## Acceptance Criteria\n- [ ] LoadFromJSON loads all tables on Attach\n- [ ] SaveToJSON writes entity to JSON on Set\n- [ ] DeleteFromJSON removes entity from JSON on Delete\n- [ ] Atomic writes implemented (temp + rename)\n- [ ] JSON format is array of objects\n- [ ] Go code compiles\n- [ ] Unit tests for JSON sync","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:36.668863-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:41:14.464042-05:00","closed_at":"2026-02-04T21:41:14.464042-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.5","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:36.671625-05:00","created_by":"petardjukic"}],"comments":[{"id":32,"issue_id":"crumbs-l3x.5","author":"petardjukic","text":"tokens: 35000","created_at":"2026-02-05T02:41:14Z"}]}
{"id":"crumbs-l3x.6","title":"Add CLI commands for table operations","description":"## Required Reading\n- cmd/crumbs/main.go (CLI setup)\n- pkg/types/cupboard.go (Cupboard interface)\n- pkg/types/table.go (Table interface)\n\n## Files to Create/Modify\n- cmd/crumbs/cmd/get.go (create)\n- cmd/crumbs/cmd/set.go (create)\n- cmd/crumbs/cmd/delete.go (create)\n- cmd/crumbs/cmd/list.go (create)\n- cmd/crumbs/main.go (update - register commands)\n\n## Requirements\nImplement CLI commands for table operations:\n1. crumbs get \u003ctable\u003e \u003cid\u003e - Get entity by ID\n2. crumbs set \u003ctable\u003e \u003cid\u003e \u003cjson\u003e - Create or update entity\n3. crumbs delete \u003ctable\u003e \u003cid\u003e - Delete entity\n4. crumbs list \u003ctable\u003e [filter] - List entities with optional filter\n5. Output format: JSON (pretty-printed)\n\n## Design Decisions\n- Use cobra for command structure\n- Commands call Cupboard.GetTable().Get/Set/Delete/Fetch\n- JSON input for set command\n- Filter syntax for list: key=value pairs\n\n## Acceptance Criteria\n- [ ] All commands implemented\n- [ ] Commands call Cupboard operations\n- [ ] JSON output formatted\n- [ ] Error handling for invalid table names, IDs, data\n- [ ] CLI compiles and runs\n- [ ] Manual testing of each command","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:07:42.377269-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:49:10.467304-05:00","closed_at":"2026-02-04T21:49:10.467304-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-l3x.6","depends_on_id":"crumbs-l3x","type":"parent-child","created_at":"2026-02-04T20:07:42.378613-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-lvj","title":"Write use case: go install","description":"Write rel00.0-uc002-go-install.md use case and update road-map.yaml","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:05:02.267462-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:05:47.775038-05:00","closed_at":"2026-02-06T23:05:47.775038-05:00","close_reason":"Closed"}
{"id":"crumbs-mtn","title":"PRD Gap Fixes","description":"## Summary\n\nAddress missing operations identified during PRD review that would block implementation.\n\n## Gaps Identified\n\n1. **SetState on CrumbTable** - No way to change crumb state except Archive\n2. **Trail membership operations** - No way to add/remove crumbs from trails\n3. **ListCategories on PropertyTable** - Can define categories but not list them\n4. **Update crumb name** - No way to rename a crumb after creation\n\n## Deliverables\n\n- PRD updates to add missing operations\n- Update sqlite-backend with affected JSON files","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T16:39:51.373391-05:00","created_by":"petardjukic","updated_at":"2026-02-04T16:44:18.389741-05:00","closed_at":"2026-02-04T16:44:18.389741-05:00","close_reason":"Closed"}
{"id":"crumbs-mtn.1","title":"PRD Update: CrumbTable SetState and Update operations","description":"## Required Reading\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-cupboard-core.md\n\n## Files to Create/Modify\n- docs/product-requirements/prd-crumbs-interface.md (modify)\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n\n### Add SetState operation (new R14)\n```go\nfunc (t CrumbTable) SetState(id string, state string) error\n```\n- Validate crumb exists\n- Validate state is one of valid states (R2.1)\n- Update state and UpdatedAt\n- Return ErrInvalidState if state is not recognized\n\n### Add Update operation (new R15)\n```go\nfunc (t CrumbTable) Update(id string, name string) error\n```\n- Validate crumb exists\n- Validate name is non-empty\n- Update name and UpdatedAt\n\n### Update CrumbTable interface in prd-cupboard-core\n\n### Add ErrInvalidState to error types (R13)\n\n## Acceptance Criteria\n- [ ] SetState operation specified\n- [ ] Update operation specified  \n- [ ] ErrInvalidState error documented\n- [ ] CrumbTable interface updated in prd-cupboard-core","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T16:40:01.553475-05:00","created_by":"petardjukic","updated_at":"2026-02-04T16:42:38.176569-05:00","closed_at":"2026-02-04T16:42:38.176569-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-mtn.1","depends_on_id":"crumbs-mtn","type":"parent-child","created_at":"2026-02-04T16:40:01.554976-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-mtn.2","title":"PRD Update: Trail membership operations","description":"## Required Reading\n- docs/product-requirements/prd-trails-interface.md\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-sqlite-backend.md (links table)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-trails-interface.md (modify)\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n\n### Add AddCrumb operation to TrailTable\n```go\nfunc (t TrailTable) AddCrumb(trailID, crumbID string) error\n```\n- Validate trail exists\n- Validate crumb exists\n- Validate crumb not already in another trail (belongs_to is many-to-one)\n- Create belongs_to link\n- Return ErrAlreadyInTrail if crumb belongs to another trail\n\n### Add RemoveCrumb operation to TrailTable\n```go\nfunc (t TrailTable) RemoveCrumb(trailID, crumbID string) error\n```\n- Validate trail exists\n- Validate crumb exists\n- Validate crumb belongs to this trail\n- Remove belongs_to link\n- Idempotent: succeed if crumb not in trail\n\n### Update TrailTable interface in prd-cupboard-core\n\n### Add ErrAlreadyInTrail to error types\n\n## Acceptance Criteria\n- [ ] AddCrumb operation specified\n- [ ] RemoveCrumb operation specified\n- [ ] ErrAlreadyInTrail error documented\n- [ ] TrailTable interface updated in prd-cupboard-core","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T16:40:09.662387-05:00","created_by":"petardjukic","updated_at":"2026-02-04T16:43:38.574589-05:00","closed_at":"2026-02-04T16:43:38.574589-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-mtn.2","depends_on_id":"crumbs-mtn","type":"parent-child","created_at":"2026-02-04T16:40:09.664309-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-mtn.3","title":"PRD Update: PropertyTable ListCategories operation","description":"## Required Reading\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-cupboard-core.md\n\n## Files to Create/Modify\n- docs/product-requirements/prd-properties-interface.md (modify)\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n\n### Add ListCategories operation (update R10)\n```go\nfunc (t PropertyTable) ListCategories(propertyID string) ([]*Category, error)\n```\n- Validate property exists\n- Return categories ordered by ordinal ascending, then name\n- Return empty slice if no categories defined\n- Return ErrNotFound if property does not exist\n- Return ErrInvalidID if propertyID is empty\n\n### Remove R10.3 implementation note (no longer needed)\n\n### Update PropertyTable interface in prd-cupboard-core\n\n## Acceptance Criteria\n- [ ] ListCategories operation specified\n- [ ] R10.3 implementation note removed\n- [ ] PropertyTable interface updated in prd-cupboard-core","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T16:40:16.81199-05:00","created_by":"petardjukic","updated_at":"2026-02-04T16:44:15.089828-05:00","closed_at":"2026-02-04T16:44:15.089828-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-mtn.3","depends_on_id":"crumbs-mtn","type":"parent-child","created_at":"2026-02-04T16:40:16.81492-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-o3t","title":"Write engineering guideline for cupboard CLI usage","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-cli.yaml (must be written first, crumbs-817)\n- docs/product-requirements/prd-configuration-directories.md (config directories and flags)\n- docs/engineering/eng01-git-integration.md (JSONL in git, cupboard.db gitignored)\n- docs/engineering/eng02-beads-migration.md (beads-to-cupboard command mapping)\n- docs/use-cases/rel01.1-uc001-go-install.md (installation flow)\n- docs/use-cases/rel02.1-uc001-issue-tracking-cli.md (issue-tracking workflow)\n- cmd/cupboard/*.go (current implementation)\n\n## Files to Create\n- docs/engineering/eng03-cupboard-cli.md\n\n## Requirements\n- Follow engineering-guideline-format rule\n- Cover these sections:\n  1. Installation (go install, go build for local dev)\n  2. Initialization (cupboard init, directory layout)\n  3. Configuration (config.yaml, environment variables, CLI flags, precedence)\n  4. Generic table operations (get, set, delete, list with examples)\n  5. Crumb operations (crumb add, crumb get, crumb list, crumb delete with examples)\n  6. Issue-tracking workflow (ready, create, show, update, close - replacing beads)\n  7. JSON output for scripting (--json flag, piping to jq)\n  8. Git integration (what to commit, what to gitignore, JSONL as source of truth)\n  9. Common patterns (create-then-query, state transitions, filtering)\n- Include concrete command examples with expected output\n- Show the beads-to-cupboard migration path (bd ready -\u003e cupboard ready, etc.)\n- Reference prd-cupboard-cli for the formal specification\n\n## Design Decisions\n- This is a practical \"how to\" guide, not a specification (the PRD is the spec)\n- Target audience: developers and agents using cupboard from scripts or interactive shells\n- Examples should use real commands that work with the current implementation\n\n## Acceptance Criteria\n- [ ] All sections listed above are present\n- [ ] Each command has at least one concrete example with expected output\n- [ ] Beads-to-cupboard migration table included\n- [ ] Git integration workflow documented\n- [ ] File saved as docs/engineering/eng03-cupboard-cli.md\n- [ ] References prd-cupboard-cli.yaml","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:29:16.636604-05:00","created_by":"petardjukic","updated_at":"2026-02-07T02:05:29.55028-05:00","closed_at":"2026-02-07T02:05:29.55028-05:00","close_reason":"Closed"}
{"id":"crumbs-oiz","title":"Add PRD references to rel99.0-uc002-docker-bootstrap","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/product-requirements/prd-configuration-directories.md\n- docs/engineering/eng02-beads-migration.md\n- docs/use-cases/rel99.0-uc002-docker-bootstrap.md\n\n## Files to Modify\n- docs/use-cases/rel99.0-uc002-docker-bootstrap.md\n\n## Requirements\n- Add PRD citations to flow steps and architecture touchpoints\n- Update beads references per eng02-beads-migration (replace bd commands with cupboard commands)\n- Add dependencies section with specific PRD IDs\n\n## Acceptance Criteria\n- [ ] Flow steps cite specific PRD requirements\n- [ ] Architecture touchpoints include PRD references\n- [ ] Beads references updated to cupboard per eng02-beads-migration\n- [ ] Dependencies section added with PRD IDs\n- [ ] Follow documentation-standards rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:27:20.996096-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:43:16.145961-05:00","closed_at":"2026-02-06T23:43:16.145961-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-ozv","title":"Add category CLI commands (define-category, get-categories)","description":"## Required Reading\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (S12-S15 test cases)\n- docs/specs/product-requirements/prd004-properties-interface.yaml (R7, R8)\n- pkg/types/property.go (DefineCategory, GetCategories methods)\n- internal/sqlite/category.go (CategoryDefiner implementation)\n\n## Files to Create/Modify\n- cmd/cupboard/category.go (create - category CLI commands)\n- cmd/cupboard/main.go (register commands)\n\n## Requirements\n- cupboard define-category \u003cproperty-name\u003e \u003ccategory-name\u003e \u003cordinal\u003e: define a category\n- cupboard get-categories \u003cproperty-name\u003e [--json]: list categories for a property\n- Property name resolved to PropertyID via lookup\n- Validate property is categorical type (ErrInvalidValueType)\n- Validate category name is unique within property (ErrDuplicateName)\n- Categories ordered by ordinal ascending, then name ascending\n- Support negative ordinals\n\n## Design Decisions\n- Accept property name not PropertyID for user convenience\n- Output JSON for machine parsing, human-readable default\n- Error exit codes per existing CLI patterns\n\n## Acceptance Criteria\n- [ ] define-category creates category and returns JSON with CategoryID\n- [ ] get-categories lists categories in correct order\n- [ ] ErrInvalidValueType for non-categorical properties\n- [ ] ErrDuplicateName for duplicate category names","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:41.792614-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:41.792614-05:00","dependencies":[{"issue_id":"crumbs-ozv","depends_on_id":"crumbs-vlw","type":"blocks","created_at":"2026-02-08T22:53:43.337154-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-pu4","title":"Extract rel01.0 tests into test004-cupboard-lifecycle","description":"## Required Reading\n- tests/integration/cli_test.go (Test5-Test9: trails, links, archive)\n- tests/integration/testutil.go\n- docs/use-cases/rel01.0-uc001-cupboard-lifecycle.md\n- docs/use-cases/rel01.0-uc003-crud-operations.md\n- .claude/rules/test-case-format.md\n\n## Files to Create\n- docs/test-suites/test004-cupboard-lifecycle.yaml (create)\n- tests/integration/test004_cupboard_lifecycle_test.go (create)\n\n## Files to Modify\n- tests/integration/test001_self_hosting_test.go (remove extracted tests)\n\n## Requirements\n- Write YAML spec tracing to rel01.0-uc001 and rel01.0-uc003\n- Cover: crumb state transitions (draft→ready→taken→pebble), trail creation, trail completion, trail abandonment, crumb-trail linking, crumb archival (dust), JSON persistence verification\n- Implement as table-driven Go tests matching the YAML spec\n- Remove extracted test functions from test001 file\n- Keep testutil.go unchanged\n\n## Design Decisions\n- Traces to rel01.0 use cases (not test001 self-hosting which is rel02.1)\n- YAML follows test-case-format rule\n- Table-driven Go implementation\n\n## Acceptance Criteria\n- [ ] YAML file follows test-case-format with id, title, traces, preconditions, test_cases\n- [ ] Go file named test004_cupboard_lifecycle_test.go\n- [ ] Table-driven tests, one row per YAML test case\n- [ ] Extracted tests removed from test001 file\n- [ ] All tests pass\n\n## Dependencies\n- crumbs-566 (rename cli_test.go first)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T00:13:34.869596-05:00","created_by":"petardjukic","updated_at":"2026-02-07T00:42:40.445699-05:00","closed_at":"2026-02-07T00:42:40.445699-05:00","close_reason":"Closed"}
{"id":"crumbs-r4y","title":"Self-Hosting Milestone","description":"Milestone: Crumbs builds crumbs.\n- Update uc002-self-hosting.md for ORM pattern\n- Validate that crumbs can manage its own development tasks\n- Demonstrate trails for exploratory work\n- End-to-end validation of the system\n\nThis epic proves the system works for its intended use case.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:48.686509-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:53:55.474626-05:00","closed_at":"2026-02-04T21:53:55.474626-05:00","close_reason":"Closed"}
{"id":"crumbs-r4y.1","title":"Update uc002-self-hosting.md for ORM pattern","description":"## Required Reading\n- docs/use-cases/uc002-self-hosting.md (current use case)\n- docs/product-requirements/prd-cupboard-core.md (updated interfaces)\n- docs/product-requirements/prd-crumbs-interface.md (Crumb entity)\n- docs/product-requirements/prd-trails-interface.md (Trail entity)\n- .claude/rules/use-case-format.md (use case format rule)\n\n## Files to Create/Modify\n- docs/use-cases/uc002-self-hosting.md (update)\n\n## Requirements\nUpdate uc002-self-hosting.md to reflect ORM pattern:\n1. Update flow to use new interfaces (GetTable, entity methods)\n2. Show trail creation and management with ORM pattern\n3. Demonstrate crumb creation via entity objects\n4. Update architecture touchpoints to reference new interfaces\n5. Keep milestone goal: crumbs builds crumbs\n\n## Design Decisions\n- Flow uses Cupboard.GetTable(\"crumbs\") and Cupboard.GetTable(\"trails\")\n- Entities created via Table.Set with empty ID\n- State transitions via entity methods\n- Trail operations via Trail entity methods\n\n## Acceptance Criteria\n- [ ] Flow updated to use ORM pattern\n- [ ] GetTable and Table interface shown in flow\n- [ ] Entity methods demonstrated\n- [ ] Architecture touchpoints updated\n- [ ] Success criteria reflect milestone validation\n- [ ] File follows use-case-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:08:04.496101-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:10:15.920337-05:00","closed_at":"2026-02-04T21:10:15.920337-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r4y.1","depends_on_id":"crumbs-r4y","type":"parent-child","created_at":"2026-02-04T20:08:04.497838-05:00","created_by":"petardjukic"}],"comments":[{"id":28,"issue_id":"crumbs-r4y.1","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T02:10:15Z"}]}
{"id":"crumbs-r4y.2","title":"Validate self-hosting milestone","description":"## Required Reading\n- docs/use-cases/uc002-self-hosting.md (updated use case)\n- All implemented code (pkg/types, internal/sqlite, cmd/crumbs)\n\n## Files to Create/Modify\n- scripts/validate-self-hosting.sh (create - test script)\n\n## Requirements\nValidate that crumbs can manage its own development:\n1. Create trail for a feature exploration\n2. Add crumbs to trail representing implementation tasks\n3. Complete trail (merge crumbs into permanent record)\n4. Abandon a trail (cleanup failed exploration)\n5. Query crumbs with filters\n6. Verify JSON persistence\n\n## Design Decisions\n- Test script uses CLI commands\n- Covers full workflow from uc002-self-hosting\n- Validates trail lifecycle\n- Checks JSON files for correctness\n\n## Acceptance Criteria\n- [ ] Test script created\n- [ ] Script covers trail creation, crumb addition, completion, abandonment\n- [ ] Script verifies JSON persistence\n- [ ] All tests pass\n- [ ] Milestone validated: crumbs builds crumbs","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:08:10.656296-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:53:52.016262-05:00","closed_at":"2026-02-04T21:53:52.016262-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r4y.2","depends_on_id":"crumbs-r4y","type":"parent-child","created_at":"2026-02-04T20:08:10.657665-05:00","created_by":"petardjukic"}],"comments":[{"id":34,"issue_id":"crumbs-r4y.2","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-05T02:53:47Z"}]}
{"id":"crumbs-r9j","title":"Stash Interface PRD","description":"## Summary\n\nDefine the Stash entity for sharing state between crumbs on a trail. Stashes provide shared resources, artifacts, context, and coordination primitives (counters, locks) with full change history.\n\n## Motivation\n\nCrumbs are individual work items. Trails group them. But there's no mechanism for crumbs to share runtime state. When multiple agents coordinate on work, they need:\n- Shared resources (files, URLs, connections)\n- Artifacts (outputs from one crumb as inputs to another)\n- Context (decisions, configuration)\n- Coordination primitives (locks, counters)\n\nStash is a new first-class entity that provides this shared state with versioning and history.\n\n## Deliverables\n\n1. PRD: Stash Interface - Stash struct, StashHistory, types, operations\n2. PRD update: Cupboard Core - Add Stashes() accessor\n3. PRD update: SQLite Backend - Add stashes.json, stash_history.json, schema\n\n## Design Summary\n\n- Stash scoped to trail (or global if trail_id is null)\n- Types: resource, artifact, context, counter, lock\n- All mutations create history entries with version, operation, changedBy\n- Interface includes GetHistory and GetValueAtVersion for auditing","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:31.561381-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:02:11.498943-05:00","closed_at":"2026-02-04T14:02:11.498943-05:00","close_reason":"Closed"}
{"id":"crumbs-r9j.1","title":"PRD: Stash Interface","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (interface pattern)\n- docs/product-requirements/prd-properties-interface.md (similar entity design)\n- docs/product-requirements/prd-crumbs-interface.md (operation patterns)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-stash-interface.md (create)\n\n## Required Sections (per prd-format rule)\n\n### Problem\n- Crumbs need to share state: resources, artifacts, context, coordination primitives\n- No current mechanism for trail-scoped or global shared state\n- Agents coordinating on work need blackboard-style communication\n\n### Goals\n1. Define Stash struct with all fields\n2. Define StashHistory struct for change tracking\n3. Define stash types and their semantics\n4. Specify CRUD operations\n5. Specify type-specific operations (counter increment, lock acquire/release)\n6. Specify history operations\n7. Document error conditions\n\n### Requirements\n\nR1: Stash Struct\n- StashID (UUID v7)\n- TrailID (optional, null for global)\n- Name (unique within scope)\n- StashType (resource | artifact | context | counter | lock)\n- Value (JSON blob)\n- Version (monotonically increasing)\n- CreatedAt, UpdatedAt\n\nR2: StashHistory Struct\n- HistoryID (UUID v7)\n- StashID (foreign key)\n- Version\n- Value (value after change)\n- Operation (create | set | increment | acquire | release)\n- ChangedBy (crumb ID, nullable)\n- CreatedAt\n\nR3: Stash Types\n- resource: URIs, paths, connections\n- artifact: outputs with producer, checksum\n- context: configuration, decisions\n- counter: atomic numeric state\n- lock: mutual exclusion\n\nR4-R8: Operations (Create, Get, GetByName, List, Delete)\nR9: Set operation (records history)\nR10: Counter operations (Increment)\nR11: Lock operations (Acquire, Release, TryAcquire)\nR12: History operations (GetHistory, GetValueAtVersion)\nR13: Error types\n\n### Non-Goals\n- Queue/channel type (future)\n- Cross-cupboard stashes\n- Stash replication\n\n## Acceptance Criteria\n- [ ] Stash struct defined with all fields\n- [ ] StashHistory struct defined\n- [ ] All stash types documented with value schemas\n- [ ] CRUD operations specified\n- [ ] Type-specific operations specified\n- [ ] History operations specified\n- [ ] Error types documented\n- [ ] File saved at docs/product-requirements/prd-stash-interface.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:46.438271-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:00:13.290671-05:00","closed_at":"2026-02-04T14:00:13.290671-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.1","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:54:46.43996-05:00","created_by":"petardjukic"}],"comments":[{"id":11,"issue_id":"crumbs-r9j.1","author":"petardjukic","text":"tokens: 12000","created_at":"2026-02-04T19:00:13Z"}]}
{"id":"crumbs-r9j.2","title":"PRD Update: Cupboard Core - Add Stashes accessor","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-stash-interface.md (after crumbs-r9j.1)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-cupboard-core.md (modify)\n\n## Requirements\n- Add Stashes() StashTable to Cupboard interface (R2.2)\n- Add StashTable interface definition to R2.3\n- Update R2.4 to reference prd-stash-interface\n- Update Acceptance Criteria\n\n## Acceptance Criteria\n- [ ] Cupboard interface includes Stashes() accessor\n- [ ] StashTable interface listed in R2.3\n- [ ] Reference to prd-stash-interface added","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:54:52.914779-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:01:01.824984-05:00","closed_at":"2026-02-04T14:01:01.824984-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.2","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:54:52.917854-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-r9j.2","depends_on_id":"crumbs-r9j.1","type":"blocks","created_at":"2026-02-04T13:55:04.191426-05:00","created_by":"petardjukic"}],"comments":[{"id":12,"issue_id":"crumbs-r9j.2","author":"petardjukic","text":"tokens: 3000","created_at":"2026-02-04T19:01:01Z"}]}
{"id":"crumbs-r9j.3","title":"PRD Update: SQLite Backend - Stash storage","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/product-requirements/prd-stash-interface.md (after crumbs-r9j.1)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-sqlite-backend.md (modify)\n\n## Requirements\n\n### R1: Directory Layout\n- Add stashes.json to file list\n- Add stash_history.json to file list\n\n### R2: JSON File Format\n- Add stashes.json format specification\n- Add stash_history.json format specification\n\n### R3: SQLite Schema\n- Add stashes table (stash_id, trail_id, name, stash_type, value, version, created_at, updated_at)\n- Add stash_history table (history_id, stash_id, version, value, operation, changed_by, created_at)\n- Add indexes for common queries\n\n### R5: Write Operations\n- Add stash operations to affected JSON files table\n\n## Acceptance Criteria\n- [ ] stashes.json format specified\n- [ ] stash_history.json format specified\n- [ ] SQLite schema includes stashes and stash_history tables\n- [ ] Indexes defined for stash queries\n- [ ] Write operations table updated","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T13:55:00.129284-05:00","created_by":"petardjukic","updated_at":"2026-02-04T14:02:11.342691-05:00","closed_at":"2026-02-04T14:02:11.342691-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-r9j.3","depends_on_id":"crumbs-r9j","type":"parent-child","created_at":"2026-02-04T13:55:00.131692-05:00","created_by":"petardjukic"},{"issue_id":"crumbs-r9j.3","depends_on_id":"crumbs-r9j.1","type":"blocks","created_at":"2026-02-04T13:55:04.353483-05:00","created_by":"petardjukic"}],"comments":[{"id":13,"issue_id":"crumbs-r9j.3","author":"petardjukic","text":"tokens: 5000","created_at":"2026-02-04T19:02:11Z"}]}
{"id":"crumbs-tjm","title":"Add PRD references to rel00.0-uc002-go-install","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-configuration-directories.md\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/use-cases/rel00.0-uc002-go-install.md\n\n## Files to Modify\n- docs/use-cases/rel00.0-uc002-go-install.md\n\n## Requirements\n- Add PRD citations to flow steps (init -\u003e prd-configuration-directories R1/R2, set/list -\u003e prd-cupboard-core R2, JSONL creation -\u003e prd-sqlite-backend R4/R5)\n- Add PRD citations to architecture touchpoints table\n- Add dependencies section with specific PRD IDs\n\n## Acceptance Criteria\n- [ ] Flow steps cite specific PRD requirements\n- [ ] Architecture touchpoints include PRD references\n- [ ] Dependencies section added with PRD IDs\n- [ ] Follow documentation-standards rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:27:10.20459-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:39:32.332162-05:00","closed_at":"2026-02-06T23:39:32.332162-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-u4i","title":"Add PRD references to rel99.0-uc001-blazes-templates","description":"## Required Reading\n- docs/product-requirements/prd-trails-interface.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-stash-interface.md\n- docs/use-cases/rel99.0-uc001-blazes-templates.md\n\n## Files to Modify\n- docs/use-cases/rel99.0-uc001-blazes-templates.md\n\n## Requirements\n- Add PRD citations where templates interact with existing entities (trails, crumbs, stash)\n- Note which PRDs need new requirements for blazes (gaps in coverage)\n- Add dependencies section with specific PRD IDs\n\n## Acceptance Criteria\n- [ ] Existing PRD requirements cited where applicable\n- [ ] Gaps noted in dependencies section (e.g. missing prd-blazes-instantiation)\n- [ ] Follow documentation-standards rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:27:15.372915-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:40:54.148661-05:00","closed_at":"2026-02-06T23:40:54.148661-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-u67","title":"Implement rel02.0-uc001-property-enforcement integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml\n- tests/integration/testutil.go (test patterns)\n\n## Files to Create/Modify\n- tests/integration/test_rel02_0_uc001_property_enforcement_test.go (create)\n- cmd/cupboard/main.go (update version command)\n\n## Requirements\n- Implement all test cases from test-rel02.0-uc001-property-enforcement.yaml:\n  - S1: Built-in properties seeded (5 properties)\n  - S2: New crumbs have all properties with defaults\n  - S3-S4: SetProperty/GetProperty work\n  - S5: Property definition backfills crumbs\n  - S6: GetProperties returns all properties\n  - S7: ClearProperty resets to default\n  - S8: Crumbs after definition have new property\n  - S9: Invariant - no crumb has fewer properties\n  - S10-S11: Round-trip properties\n  - S12-S15: DefineCategory/GetCategories\n- Update version command to list rel02.0-uc001\n\n## Design Decisions\n- Follow existing table-driven test pattern\n- Use CLI commands for all operations\n- Verify via JSON output and JSONL file inspection\n\n## Acceptance Criteria\n- [ ] All 60+ test cases from YAML implemented\n- [ ] go test ./tests/integration -run TestPropertyEnforcement passes\n- [ ] cupboard version lists rel02.0-uc001-property-enforcement","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:11.455647-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:11.455647-05:00","dependencies":[{"issue_id":"crumbs-u67","depends_on_id":"crumbs-gkk","type":"blocks","created_at":"2026-02-08T22:46:12.477986-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-uoz","title":"Phase 1: Core Storage","description":"Implement core storage with SQLite backend per ARCHITECTURE.md Phase 1.\n\nIncludes:\n- Configuration directory structure and JSONL format\n- CLI crumb subcommands\n- Property auto-initialization\n- Integration tests and tracer bullet validation\n\nSuccess criteria: A working system for local use with Cupboard interface, Table operations, and JSON persistence.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T11:13:21.23435-05:00","created_by":"petardjukic","updated_at":"2026-02-05T14:25:39.182506-05:00","closed_at":"2026-02-05T14:25:39.182506-05:00","close_reason":"Closed"}
{"id":"crumbs-vkf","title":"Implement rel01.1-uc001-go-install integration tests","description":"## Required Reading\n- docs/specs/use-cases/rel01.1-uc001-go-install.yaml\n- docs/specs/test-suites/test-rel01.1-uc001-go-install.yaml\n- tests/integration/testutil.go (test patterns)\n- tests/integration/test_rel01_1_uc004_generic_table_cli_test.go (example test structure)\n\n## Files to Create/Modify\n- tests/integration/test_rel01_1_uc001_go_install_test.go (create)\n- cmd/cupboard/main.go (update version command to include uc001)\n\n## Requirements\n- Implement integration tests validating the go install workflow\n- Test init creates data directory with all JSONL files (crumbs.jsonl, trails.jsonl, properties.jsonl, links.jsonl, stashes.jsonl, metadata.jsonl)\n- Test set and list round-trip a crumb\n- Test init is idempotent\n- Test version command works standalone\n- Update version command output to list rel01.1-uc001\n\n## Design Decisions\n- Use existing TestEnv pattern from testutil.go\n- Table-driven tests per test-case-format rule\n- Tests run against locally-built binary (not go install from proxy)\n\n## Acceptance Criteria\n- [ ] All test cases from test-rel01.1-uc001-go-install.yaml implemented\n- [ ] go test ./tests/integration -run TestGoInstall passes\n- [ ] cupboard version lists rel01.1-uc001-go-install","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:46:10.072188-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:46:10.072188-05:00"}
{"id":"crumbs-vlw","title":"Add property CLI commands (set-property, get-property, clear-property, get-properties)","description":"## Required Reading\n- docs/specs/test-suites/test-rel02.0-uc001-property-enforcement.yaml (S3, S4, S6, S7 test cases)\n- docs/specs/use-cases/rel02.0-uc001-property-enforcement.yaml (F5, F6, F11)\n- cmd/cupboard/crumb.go (existing crumb subcommand pattern)\n- prd003-crumbs-interface.yaml (R5 property methods)\n\n## Files to Create/Modify\n- cmd/cupboard/property.go (create - property CLI commands)\n- cmd/cupboard/main.go (register commands)\n\n## Requirements\n- cupboard set-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e \u003cvalue\u003e: set property value on entity\n- cupboard get-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e: get single property value\n- cupboard get-properties \u003ctable\u003e \u003cid\u003e: get all properties as JSON\n- cupboard clear-property \u003ctable\u003e \u003cid\u003e \u003cproperty-name\u003e: reset property to default\n- Property name resolved to PropertyID via lookup\n- Validate value matches property type (text, integer, list as JSON, etc.)\n- Error messages for invalid property names, type mismatches\n\n## Design Decisions\n- Commands work on crumbs table initially (trail/stash properties future)\n- Accept property name (human readable) not PropertyID\n- List values as JSON array for list type\n\n## Acceptance Criteria\n- [ ] set-property updates property and persists\n- [ ] get-property returns current value\n- [ ] get-properties returns all properties as JSON object\n- [ ] clear-property resets to default\n- [ ] Appropriate error messages for validation failures","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-08T22:53:41.573923-05:00","created_by":"petardjukic","updated_at":"2026-02-08T22:53:41.573923-05:00","dependencies":[{"issue_id":"crumbs-vlw","depends_on_id":"crumbs-cz4","type":"blocks","created_at":"2026-02-08T22:53:43.198363-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-w43","title":"Add use cases and tests for orphaned code","description":"Five areas of implemented code have no corresponding use case or test coverage. This epic creates use cases, test suite specs, integration tests, and road-map entries for each.\n\n## Orphaned Code Areas\n\n1. **Configuration and Path Resolution** (internal/paths, cmd/cupboard/config.go) — Platform-specific defaults, env/flag overrides, config.yaml lifecycle\n2. **Generic Table CLI** (cmd/cupboard/get.go, set.go, list.go, delete.go) — Four commands exposing Table interface via CLI\n3. **Metadata Lifecycle** (internal/sqlite metadata methods, pkg/types/metadata.go) — Full CRUD, schemas, cascade delete\n4. **Link Management** (internal/sqlite link methods, pkg/types/link.go) — Graph model CRUD, all four link types\n5. **Stash Operations** (internal/sqlite stash methods, pkg/types/stash.go) — Counters, locks, value ops, history, versioning\n\n## Deliverables per child issue\n\n- Use case YAML in docs/use-cases/\n- Test suite YAML in docs/test-suites/\n- Integration test Go code in tests/integration/\n- Road-map.yaml entry for the new use case","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T15:02:26.672519-05:00","created_by":"petardjukic","updated_at":"2026-02-07T16:56:15.134598-05:00","closed_at":"2026-02-07T16:56:15.134598-05:00","close_reason":"Closed"}
{"id":"crumbs-w43.1","title":"Use case, test suite, and tests for Configuration and Path Resolution","description":"## Required Reading\n- docs/product-requirements/prd-configuration-directories.yaml (R1-R2, R7-R8)\n- docs/product-requirements/prd-cupboard-cli.yaml (R6 global flags)\n- internal/paths/paths.go (implemented path resolution)\n- cmd/cupboard/config.go (implemented config loading)\n- .claude/rules/use-case-format.md\n- .claude/rules/test-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/rel01.1-uc003-configuration-loading.yaml (create)\n- docs/test-suites/test-rel01.1-uc003-configuration-loading.yaml (create)\n- tests/integration/test_rel01_1_uc003_configuration_loading_test.go (create)\n- docs/road-map.yaml (add use case to release 01.1)\n\n## Requirements\n- Use case covers the full config loading pipeline: platform-specific defaults (XDG on Linux, Library on macOS), env variable overrides (CRUMBS_CONFIG_DIR, CRUMBS_DATA_DIR), flag overrides (--config-dir, --data-dir), config.yaml creation on first run, config.yaml loading via Viper, precedence chain (flag \u003e env \u003e config \u003e platform default)\n- Test suite has ~8-10 test cases covering each precedence level and error cases\n- Integration tests exercise the CLI binary with env vars, flags, and config files in temp directories\n- Follow use-case-format and test-case-format rules\n\n## Design Decisions\n- Tests use temp directories to avoid polluting real config/data locations\n- Tests set env vars per-test and restore after\n- Tests invoke the cupboard binary (not Go API) since this is CLI behavior\n\n## Acceptance Criteria\n- [ ] Use case YAML follows use-case-format, has all required fields\n- [ ] Test suite YAML follows test-case-format, traces to use case\n- [ ] Integration tests pass: go test ./tests/integration/ -run TestConfigurationLoading -v\n- [ ] Road-map.yaml updated with new use case in release 01.1\n- [ ] All tests exercise real precedence behavior (not mocked)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T15:02:44.114914-05:00","created_by":"petardjukic","updated_at":"2026-02-07T15:15:03.132079-05:00","closed_at":"2026-02-07T15:15:03.132079-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-w43.1","depends_on_id":"crumbs-w43","type":"parent-child","created_at":"2026-02-07T15:02:44.119002-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-w43.2","title":"Use case, test suite, and tests for Generic Table CLI Operations","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-cli.yaml (R3 generic table commands, R7-R9 output/errors)\n- docs/product-requirements/prd-cupboard-core.yaml (R3 Table interface)\n- cmd/cupboard/get.go, set.go, list.go, delete.go (implemented generic commands)\n- .claude/rules/use-case-format.md\n- .claude/rules/test-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/rel01.1-uc004-generic-table-cli.yaml (create)\n- docs/test-suites/test-rel01.1-uc004-generic-table-cli.yaml (create)\n- tests/integration/test_rel01_1_uc004_generic_table_cli_test.go (create)\n- docs/road-map.yaml (add use case to release 01.1)\n\n## Requirements\n- Use case covers all four generic table commands: get, set, list, delete\n- Test cases exercise commands across multiple table types (crumbs, trails, links)\n- Validates JSON input parsing (cupboard set \u003ctable\u003e \u003cid\u003e \u003cjson\u003e)\n- Validates JSON output format (single object for get, array for list)\n- Validates error handling: unknown table (exit 1), missing entity (exit 1), invalid JSON (exit 1)\n- Validates filter parsing for list command (key=value pairs)\n- Test suite has ~10-12 test cases\n\n## Design Decisions\n- Tests invoke the cupboard binary directly (CLI behavior, not Go API)\n- Each test case uses a fresh temp data directory\n- Verifies both stdout content and exit codes\n\n## Acceptance Criteria\n- [ ] Use case YAML follows use-case-format, has all required fields\n- [ ] Test suite YAML follows test-case-format, traces to use case\n- [ ] Integration tests pass: go test ./tests/integration/ -run TestGenericTableCli -v\n- [ ] Road-map.yaml updated with new use case in release 01.1\n- [ ] All four generic commands (get, set, list, delete) tested\n- [ ] Error cases covered (unknown table, invalid JSON, missing ID)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T15:02:58.315364-05:00","created_by":"petardjukic","updated_at":"2026-02-07T15:19:48.369732-05:00","closed_at":"2026-02-07T15:19:48.369732-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-w43.2","depends_on_id":"crumbs-w43","type":"parent-child","created_at":"2026-02-07T15:02:58.317953-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-w43.3","title":"Use case, test suite, and tests for Metadata Lifecycle","description":"## Required Reading\n- docs/product-requirements/prd-metadata-interface.yaml (R1-R10)\n- docs/product-requirements/prd-cupboard-core.yaml (R3 Table interface)\n- internal/sqlite/table.go (getMetadata, setMetadata, fetchMetadata methods)\n- pkg/types/metadata.go (Metadata struct, Schema struct)\n- .claude/rules/use-case-format.md\n- .claude/rules/test-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/rel02.1-uc004-metadata-lifecycle.yaml (create)\n- docs/test-suites/test-rel02.1-uc004-metadata-lifecycle.yaml (create)\n- tests/integration/test_rel02_1_uc004_metadata_lifecycle_test.go (create)\n- docs/road-map.yaml (add use case to release 02.1)\n\n## Requirements\n- Use case covers full metadata lifecycle: create entries with comments and attachments schemas, retrieve by ID, filter by schema/crumb_id/property_id, append-only convention, cascade delete when crumb removed\n- Validates multiple metadata entries per crumb accumulate (additive, not replacement)\n- Validates built-in schemas (comments: text content, attachments: JSON content)\n- Validates ErrNotFound for missing metadata, ErrInvalidID for empty ID\n- Test suite has ~10-12 test cases\n\n## Design Decisions\n- Tests use the Go API (Table.Set, Table.Get, Table.Fetch) not CLI\n- Each test creates a crumb first, then attaches metadata\n- Cascade delete verified by deleting parent crumb and checking metadata gone\n\n## Acceptance Criteria\n- [ ] Use case YAML follows use-case-format, has all required fields\n- [ ] Test suite YAML follows test-case-format, traces to use case\n- [ ] Integration tests pass: go test ./tests/integration/ -run TestMetadataLifecycle -v\n- [ ] Road-map.yaml updated with new use case in release 02.1\n- [ ] Comments and attachments schemas both exercised\n- [ ] Cascade delete on crumb removal verified\n- [ ] Filter combinations (schema, crumb_id) tested","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T15:03:09.64475-05:00","created_by":"petardjukic","updated_at":"2026-02-07T15:25:59.47179-05:00","closed_at":"2026-02-07T15:25:59.47179-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-w43.3","depends_on_id":"crumbs-w43","type":"parent-child","created_at":"2026-02-07T15:03:09.646997-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-w43.4","title":"Use case, test suite, and tests for Link Management","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.yaml (graph model, R10 graph audit)\n- docs/product-requirements/prd-trails-interface.yaml (R7 crumb membership, R9 branching)\n- docs/product-requirements/prd-stash-interface.yaml (R13 stash scoping)\n- internal/sqlite/table.go (getLink, setLink, fetchLinks methods)\n- pkg/types/link.go (Link struct, link type constants)\n- .claude/rules/use-case-format.md\n- .claude/rules/test-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/rel03.0-uc002-link-management.yaml (create)\n- docs/test-suites/test-rel03.0-uc002-link-management.yaml (create)\n- tests/integration/test_rel03_0_uc002_link_management_test.go (create)\n- docs/road-map.yaml (add use case to release 03.0)\n\n## Requirements\n- Use case covers link CRUD for all four link types: belongs_to, child_of, branches_from, scoped_to\n- Tests create entities first (crumbs, trails, stashes), then link them\n- Validates uniqueness constraint (link_type + from_id + to_id)\n- Validates fetch with filters: by link_type, from_id, to_id\n- Validates delete removes link, ErrNotFound on missing link\n- Exercises the graph model that underpins trails, crumb hierarchy, and stash scoping\n- Test suite has ~8-10 test cases\n\n## Design Decisions\n- Tests use the Go API (Table.Set, Table.Get, Table.Fetch, Table.Delete on links table)\n- Each test creates prerequisite entities (crumbs, trails) before creating links\n- child_of validates crumb hierarchy (epic → task pattern)\n- belongs_to validates trail membership\n- scoped_to validates stash scoping\n\n## Acceptance Criteria\n- [ ] Use case YAML follows use-case-format, has all required fields\n- [ ] Test suite YAML follows test-case-format, traces to use case\n- [ ] Integration tests pass: go test ./tests/integration/ -run TestLinkManagement -v\n- [ ] Road-map.yaml updated with new use case in release 03.0\n- [ ] All four link types exercised (belongs_to, child_of, branches_from, scoped_to)\n- [ ] Uniqueness constraint verified (duplicate link creation fails or is idempotent)\n- [ ] Fetch filters by link_type, from_id, to_id tested","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T15:03:25.444987-05:00","created_by":"petardjukic","updated_at":"2026-02-07T15:31:15.004571-05:00","closed_at":"2026-02-07T15:31:15.004571-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-w43.4","depends_on_id":"crumbs-w43","type":"parent-child","created_at":"2026-02-07T15:03:25.446831-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-w43.5","title":"Use case, test suite, and tests for Stash Operations","description":"## Required Reading\n- docs/product-requirements/prd-stash-interface.yaml (R1-R13)\n- docs/product-requirements/prd-cupboard-core.yaml (R3 Table interface)\n- internal/sqlite/table.go (getStash, setStash, fetchStashes methods)\n- pkg/types/stash.go (Stash struct, StashHistoryEntry, all entity methods)\n- .claude/rules/use-case-format.md\n- .claude/rules/test-case-format.md\n\n## Files to Create/Modify\n- docs/use-cases/rel03.0-uc003-stash-operations.yaml (create)\n- docs/test-suites/test-rel03.0-uc003-stash-operations.yaml (create)\n- tests/integration/test_rel03_0_uc003_stash_operations_test.go (create)\n- docs/road-map.yaml (add use case to release 03.0)\n\n## Requirements\n- Use case covers the full stash system: create stashes of each type (resource, artifact, context, counter, lock)\n- Value operations: SetValue/GetValue on resource/artifact/context stashes\n- Counter operations: Increment with positive and negative deltas, verify accumulated value\n- Lock operations: Acquire, Release, reentrant acquire (same holder), ErrLockHeld (different holder), ErrNotLockHolder on wrong release\n- Version tracking: version increments on every mutation (SetValue, Increment, Acquire, Release)\n- Stash history: verify history entries recorded for each operation\n- Fetch with filters: by stash_type, by name\n- Test suite has ~12-15 test cases\n\n## Design Decisions\n- Tests use the Go API (Table.Set, Table.Get, Table.Fetch on stashes table)\n- Each stash type gets dedicated test cases exercising type-specific methods\n- Counter tests verify arithmetic correctness across multiple increments\n- Lock tests verify mutual exclusion semantics\n- Version tests verify monotonic incrementing\n\n## Acceptance Criteria\n- [ ] Use case YAML follows use-case-format, has all required fields\n- [ ] Test suite YAML follows test-case-format, traces to use case\n- [ ] Integration tests pass: go test ./tests/integration/ -run TestStashOperations -v\n- [ ] Road-map.yaml updated with new use case in release 03.0\n- [ ] All five stash types exercised (resource, artifact, context, counter, lock)\n- [ ] Counter increment (positive + negative deltas) verified\n- [ ] Lock acquire/release/reentrant/contention verified\n- [ ] Version tracking verified across mutations\n- [ ] Stash history entries verified","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T15:03:37.856254-05:00","created_by":"petardjukic","updated_at":"2026-02-07T15:36:36.37544-05:00","closed_at":"2026-02-07T15:36:36.37544-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-w43.5","depends_on_id":"crumbs-w43","type":"parent-child","created_at":"2026-02-07T15:03:37.85774-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wfu","title":"Add PRD references to rel00.0-uc001-self-hosting","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md\n- docs/product-requirements/prd-crumbs-interface.md\n- docs/product-requirements/prd-properties-interface.md\n- docs/product-requirements/prd-sqlite-backend.md\n- docs/use-cases/rel00.0-uc001-self-hosting.md\n\n## Files to Modify\n- docs/use-cases/rel00.0-uc001-self-hosting.md\n\n## Requirements\n- Add PRD requirement citations to flow steps (Table.Get/Set/Fetch -\u003e prd-cupboard-core R2, crumb state -\u003e prd-crumbs-interface R4, properties -\u003e prd-properties-interface)\n- Add PRD citations to architecture touchpoints table\n- Replace generic release references in dependencies with specific PRD IDs\n- Follow the citation pattern used in rel01.0-uc001 and rel01.0-uc002 (inline parenthetical references)\n\n## Acceptance Criteria\n- [ ] Every flow step that references a storage operation cites the specific PRD requirement\n- [ ] Architecture touchpoints table includes PRD references\n- [ ] Dependencies section cites specific PRD IDs not just release numbers\n- [ ] Follow documentation-standards rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-06T23:27:04.743259-05:00","created_by":"petardjukic","updated_at":"2026-02-06T23:38:30.66634-05:00","closed_at":"2026-02-06T23:38:30.66634-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-wy7","title":"Documentation Technical Debt: Align docs with implementation","description":"Align all documentation files with VISION.md, ARCHITECTURE.md, and implemented code.\n\n## Background\n\nVISION.md and ARCHITECTURE.md have been updated to match the actual implementation. PRDs and use cases may have:\n- Incorrect method signatures (e.g., Table.Set returns `(string, error)` not just `error`)\n- Non-existent methods (e.g., Trail.GetCrumbs, AddCrumb, RemoveCrumb don't exist)\n- Outdated terminology (JSON vs JSONL)\n- Old state names or patterns\n\n## Scope\n\n- 8 PRD files in docs/product-requirements/\n- 8 use case files in docs/use-cases/\n\n## Success Criteria\n\nAll documentation accurately reflects the implemented code and is consistent with VISION.md and ARCHITECTURE.md.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:31:40.664445-05:00","created_by":"petardjukic","updated_at":"2026-02-05T23:25:34.518787-05:00","closed_at":"2026-02-05T23:25:34.518787-05:00","close_reason":"Closed"}
{"id":"crumbs-wy7.1","title":"Align prd-cupboard-core.md with implementation","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md (Main Interface section)\n- pkg/types/cupboard.go\n- pkg/types/table.go\n\n## Files to Modify\n- docs/product-requirements/prd-cupboard-core.md\n\n## Requirements\n1. Fix Table.Set signature: currently shows `error` return but implementation returns `(string, error)`\n2. Verify all Cupboard interface methods match implementation\n3. Verify all Table interface methods match implementation\n4. Verify error types match pkg/types/table.go\n\n## Acceptance Criteria\n- [ ] Table.Set signature shows `(string, error)` return type\n- [ ] All interface methods match actual Go code\n- [ ] Error types documented match defined errors\n- [ ] No references to non-existent methods","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:31:48.52838-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:31:57.786834-05:00","closed_at":"2026-02-05T22:31:57.786834-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.1","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:31:48.530182-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.10","title":"Remove Dolt and DynamoDB references from all docs","description":"## Background\n\nDolt and DynamoDB backends are no longer planned. VISION.md and ARCHITECTURE.md have been cleaned up. \n\n## Files to Update\n\n- docs/use-cases/rel04.0-uc001-dolt-backend.md - DELETE entire file\n- docs/road-map.yaml - Remove release 04.0 (Dolt backend)\n- docs/product-requirements/prd-cupboard-core.md - Remove DoltConfig, DynamoDBConfig structs and references\n- docs/product-requirements/prd-configuration-directories.md - Remove DoltConfig, DynamoDBConfig\n- docs/use-cases/rel01.0-uc001-cupboard-lifecycle.md - Remove out-of-scope mentions\n- docs/use-cases/rel01.0-uc003-crud-operations.md - Remove reference to rel04.0\n- docs/product-requirements/prd-sqlite-backend.md - Remove mention of other backends\n\n## Acceptance Criteria\n\n- [ ] No references to Dolt or DynamoDB in any docs\n- [ ] rel04.0-uc001-dolt-backend.md deleted\n- [ ] Config struct only has SQLite-relevant fields","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:53:19.560039-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:59:34.663081-05:00","closed_at":"2026-02-05T22:59:34.663081-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.10","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:53:19.562437-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.11","title":"Migrate all relationships to links table","description":"## Background\n\nARCHITECTURE Decision 10: All entity relationships use the links table with typed edges.\n\n## Link Types\n\n| Link Type | From | To | Replaces |\n|-----------|------|-----|----------|\n| belongs_to | crumb | trail | (already exists) |\n| child_of | crumb | crumb | dependencies property |\n| branches_from | trail | crumb | Trail.ParentCrumbID field |\n| scoped_to | stash | trail | Stash.TrailID field |\n\n## Files to Update\n\n### Code\n- pkg/types/trail.go - remove ParentCrumbID field\n- pkg/types/stash.go - remove TrailID field\n- pkg/types/link.go - add new link type constants\n- internal/sqlite/* - update queries to use links\n\n### PRDs\n- prd-trails-interface.md - remove ParentCrumbID, add branches_from link\n- prd-stash-interface.md - remove TrailID, update to scoped_to link (partially done)\n- prd-properties-interface.md - remove dependencies from built-in properties\n- prd-sqlite-backend.md - update link types table\n\n## Acceptance Criteria\n\n- [ ] Trail.ParentCrumbID removed, replaced with branches_from link\n- [ ] Stash.TrailID removed, replaced with scoped_to link  \n- [ ] dependencies property removed from built-ins (use child_of links)\n- [ ] Link types documented: belongs_to, child_of, branches_from, scoped_to\n- [ ] All PRDs updated consistently\n- [ ] Code compiles and tests pass","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T22:16:51.717219-05:00","created_by":"petardjukic","updated_at":"2026-02-05T23:22:09.102433-05:00","closed_at":"2026-02-05T23:22:09.102433-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.11","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T22:16:51.718751-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.12","title":"Add configurable JSONL sync strategy","description":"## Problem\n\nCurrently the SQLite backend syncs every write to JSONL immediately (Decision 6). This is safe but may impact performance for high-write workloads.\n\n## Required Reading\n- docs/ARCHITECTURE.md § Decision 6\n- internal/sqlite/jsonl.go\n\n## Requirements\n- Add sync strategy to Attach config: `immediate` (current default), `on_close`, `batch`\n- For batch mode, support `batch_size` and/or `batch_interval`\n- Update prd-sqlite-backend with new config options\n- Update Decision 6 in ARCHITECTURE to note configurability\n\n## Acceptance Criteria\n- [ ] Config option documented in prd-sqlite-backend\n- [ ] Decision 6 updated to mention sync strategy is configurable\n- [ ] Default remains `immediate` for safety","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T22:28:10.592353-05:00","created_by":"petardjukic","updated_at":"2026-02-05T23:24:48.655349-05:00","closed_at":"2026-02-05T23:24:48.655349-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.12","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T22:28:10.594693-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.2","title":"Align prd-sqlite-backend.md with implementation","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md (SQLite Backend section, Decision 6)\n- internal/sqlite/backend.go\n- internal/sqlite/jsonl.go\n- prd-cupboard-core.md (after Task 1 updates)\n\n## Files to Modify\n- docs/product-requirements/prd-sqlite-backend.md\n\n## Requirements\n1. Change \"JSON files\" to \"JSONL files\" throughout (one JSON object per line)\n2. Update file layout table: *.json -\u003e *.jsonl\n3. Verify schema and directory layout matches implementation\n4. Verify hydration/dehydration description matches code\n5. UPDATE operation names to use Table interface:\n   - AddCrumb, ArchiveCrumb, PurgeCrumb -\u003e Table.Set, Table.Delete\n   - StartTrail, CompleteTrail, AbandonTrail -\u003e Table.Set (with cascades)\n   - DefineProperty, DefineCategory -\u003e Table.Set\n   - etc.\n6. ADD cascade behavior for trails Table.Set:\n   - When trail state changes to completed: remove belongs_to links\n   - When trail state changes to abandoned: delete crumbs\n\n## Acceptance Criteria\n- [ ] All references to \"JSON\" storage changed to \"JSONL\"\n- [ ] File names in layout table use .jsonl extension\n- [ ] Directory layout matches actual implementation\n- [ ] Operation names use Table interface (Get, Set, Delete, Fetch)\n- [ ] Trail cascade behavior documented for Table.Set\n- [ ] No references to non-existent files or structures\n\n## Blocked By\n- crumbs-wy7.1 (prd-cupboard-core alignment)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:31:56.097695-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:37:15.941096-05:00","closed_at":"2026-02-05T22:37:15.941096-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.2","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:31:56.099305-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.3","title":"Align prd-crumbs-interface.md with implementation","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md (Lifecycle section)\n- pkg/types/crumb.go\n- pkg/types/crumb_test.go\n- prd-cupboard-core.md (after Task 1 updates)\n\n## Files to Modify\n- docs/product-requirements/prd-crumbs-interface.md\n\n## Requirements\n1. Verify pebble/dust terminology is correct (already updated)\n2. Verify entity methods match implementation (SetState, Pebble, Dust, SetProperty, GetProperty, GetProperties, ClearProperty)\n3. Fix any Table.Set signature references to show (string, error) return\n4. Verify state values and transitions match implementation\n\n## Acceptance Criteria\n- [ ] All entity methods documented exist in implementation\n- [ ] State values match: draft, pending, ready, taken, pebble, dust\n- [ ] Table.Set references show correct return type\n- [ ] Error types match implementation\n\n## Blocked By\n- crumbs-wy7.1 (prd-cupboard-core alignment)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:32:03.649997-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:38:51.257249-05:00","closed_at":"2026-02-05T22:38:51.257249-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.3","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:32:03.651577-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.4","title":"Align prd-trails-interface.md with implementation (MAJOR)","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md (Lifecycle section, trail states)\n- pkg/types/trail.go\n- pkg/types/trail_test.go\n- prd-cupboard-core.md (after Task 1 updates)\n\n## Files to Modify\n- docs/product-requirements/prd-trails-interface.md\n\n## Requirements\nMAJOR CHANGES NEEDED:\n\n1. CHANGE method signatures:\n   - Complete(cupboard Cupboard) -\u003e Complete() (no args)\n   - Abandon(cupboard Cupboard) -\u003e Abandon() (no args)\n   - Methods only update struct fields; cascades happen on Table.Set\n\n2. UPDATE cascade responsibility:\n   - Entity methods only update State and CompletedAt fields\n   - Backend performs cascades when trail is persisted via Table.Set\n   - Complete: backend removes belongs_to links\n   - Abandon: backend deletes crumbs\n\n3. REMOVE non-existent methods:\n   - GetCrumbs(cupboard Cupboard) - NOT IMPLEMENTED\n   - AddCrumb(crumbID string, cupboard Cupboard) - NOT IMPLEMENTED  \n   - RemoveCrumb(crumbID string, cupboard Cupboard) - NOT IMPLEMENTED\n\n4. Fix Table.Set signature references\n\n5. Verify Trail struct fields match implementation\n\n## Acceptance Criteria\n- [ ] Complete() and Abandon() have no arguments\n- [ ] Cascade operations documented as backend responsibility on Table.Set\n- [ ] GetCrumbs, AddCrumb, RemoveCrumb sections removed\n- [ ] Trail struct fields match pkg/types/trail.go exactly\n- [ ] No references to methods that don't exist","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:32:12.895227-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:41:05.50955-05:00","closed_at":"2026-02-05T22:41:05.50955-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.4","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:32:12.897257-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.5","title":"Align prd-properties-interface.md with implementation","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md (Properties Model section)\n- pkg/types/property.go\n- prd-cupboard-core.md (after Task 1 updates)\n- prd-crumbs-interface.md (after Task 3 updates)\n\n## Files to Modify\n- docs/product-requirements/prd-properties-interface.md\n\n## Requirements\n1. Verify Property struct fields match implementation\n2. Verify Category struct fields match implementation\n3. Verify value type constants match implementation\n4. Fix any Table.Set signature references\n5. Verify property enforcement rules match what's actually implemented\n\n## Acceptance Criteria\n- [ ] Property and Category structs match implementation\n- [ ] Value types match: categorical, text, integer, boolean, timestamp, list\n- [ ] Table interface references are correct\n- [ ] Enforcement rules reflect actual implementation status\n\n## Blocked By\n- crumbs-wy7.1 (prd-cupboard-core alignment)\n- crumbs-wy7.3 (prd-crumbs-interface alignment)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:32:19.666973-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:44:10.110367-05:00","closed_at":"2026-02-05T22:44:10.110367-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.5","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:32:19.668698-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.6","title":"Align prd-stash-interface.md with implementation","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md (Stashes section)\n- pkg/types/stash.go\n- pkg/types/stash_test.go\n- prd-cupboard-core.md (after Task 1 updates)\n\n## Files to Modify\n- docs/product-requirements/prd-stash-interface.md\n\n## Requirements\n1. Verify Stash struct fields match implementation\n2. Verify stash type constants match: resource, artifact, context, counter, lock\n3. Verify entity methods match: SetValue, GetValue, Increment, Acquire, Release\n4. Verify StashHistoryEntry struct matches implementation\n5. Fix any Table.Set signature references\n\n## Acceptance Criteria\n- [ ] Stash struct fields match pkg/types/stash.go\n- [ ] All entity methods documented exist and have correct signatures\n- [ ] Stash types match implementation\n- [ ] History entry structure matches implementation\n\n## Blocked By\n- crumbs-wy7.1 (prd-cupboard-core alignment)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:32:26.351611-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:46:15.309543-05:00","closed_at":"2026-02-05T22:46:15.309543-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.6","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:32:26.353847-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.7","title":"Align prd-metadata-interface.md with implementation","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md (Entity Types table)\n- pkg/types/metadata.go\n- prd-cupboard-core.md (after Task 1 updates)\n\n## Files to Modify\n- docs/product-requirements/prd-metadata-interface.md\n\n## Requirements\n1. Verify Metadata struct fields match implementation\n2. Verify Schema struct fields match implementation\n3. Verify content type constants match: text, json\n4. Fix any Table.Set signature references\n\n## Acceptance Criteria\n- [ ] Metadata struct fields match pkg/types/metadata.go\n- [ ] Schema struct fields match implementation\n- [ ] Content types match implementation\n- [ ] Table interface references are correct\n\n## Blocked By\n- crumbs-wy7.1 (prd-cupboard-core alignment)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:32:31.543431-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:47:12.360537-05:00","closed_at":"2026-02-05T22:47:12.360537-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.7","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:32:31.545309-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.8","title":"Align prd-configuration-directories.md with implementation","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md (Project Structure section)\n- pkg/types/config.go\n- internal/sqlite/backend.go\n- prd-sqlite-backend.md (after Task 2 updates)\n\n## Files to Modify\n- docs/product-requirements/prd-configuration-directories.md\n\n## Requirements\n1. Verify Config struct fields match implementation\n2. Verify directory structure matches actual layout\n3. Verify file names use JSONL extension (not JSON)\n4. Verify any platform-specific paths are accurate\n\n## Acceptance Criteria\n- [ ] Config struct matches pkg/types/config.go\n- [ ] Directory paths match actual implementation\n- [ ] File references use .jsonl extension\n- [ ] Platform-specific defaults are accurate\n\n## Blocked By\n- crumbs-wy7.2 (prd-sqlite-backend alignment)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:32:37.399549-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:48:30.696806-05:00","closed_at":"2026-02-05T22:48:30.696806-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.8","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:32:37.401099-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-wy7.9","title":"Align use cases with updated PRDs","description":"## Type\nDocumentation\n\n## Required Reading\n- docs/ARCHITECTURE.md\n- All updated PRDs (after Tasks 1-8)\n- docs/use-cases/*.md (8 files)\n\n## Files to Modify\n- docs/use-cases/rel00.0-uc001-self-hosting.md\n- docs/use-cases/rel01.0-uc001-cupboard-lifecycle.md\n- docs/use-cases/rel01.0-uc002-sqlite-crud.md\n- docs/use-cases/rel01.0-uc003-crud-operations.md\n- docs/use-cases/rel02.0-uc001-property-enforcement.md\n- docs/use-cases/rel03.0-uc001-trail-exploration.md\n- docs/use-cases/rel04.0-uc001-dolt-backend.md (DELETE - covered by wy7.10)\n- docs/use-cases/rel99.0-uc001-blazes-templates.md\n- docs/use-cases/rel99.0-uc002-docker-bootstrap.md\n\n## Requirements\n1. Verify method names match updated PRDs (no GetCrumbs, AddCrumb, RemoveCrumb)\n2. Verify state names: pebble/dust for crumbs, completed/abandoned for trails\n3. Verify interface patterns match: GetTable, Get, Set, Delete, Fetch\n4. Verify Table.Set shows correct return type in examples\n5. Update any JSON references to JSONL where applicable\n6. FIX trail method signatures:\n   - trail.Abandon(cupboard) -\u003e trail.Abandon() then Table.Set\n   - trail.Complete(cupboard) -\u003e trail.Complete() then Table.Set\n   - Trails().Abandon(id) -\u003e get trail, call Abandon(), Table.Set\n   - Cascades happen on Table.Set, not in entity methods\n7. Update code examples to show correct pattern:\n   trail.Abandon()\n   table.Set(trail.TrailID, trail)  // backend performs cascade\n\n## Acceptance Criteria\n- [ ] No references to non-existent Trail methods (GetCrumbs, AddCrumb, RemoveCrumb)\n- [ ] Trail methods have no arguments (no cupboard parameter)\n- [ ] Code examples show Table.Set after entity method calls\n- [ ] All state names correct (pebble/dust for crumbs)\n- [ ] All code examples use correct interface patterns\n- [ ] JSONL terminology used where appropriate\n- [ ] Each use case consistent with its referenced PRDs\n\n## Blocked By\n- crumbs-wy7.1 through crumbs-wy7.8 (all PRD alignments)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T21:32:48.48303-05:00","created_by":"petardjukic","updated_at":"2026-02-05T22:56:47.550266-05:00","closed_at":"2026-02-05T22:56:47.550266-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-wy7.9","depends_on_id":"crumbs-wy7","type":"parent-child","created_at":"2026-02-05T21:32:48.48424-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-xgb","title":"epic","description":"Update all product requirement documents to reflect the ORM pattern design:\n- Cupboard interface with GetTable(name), Attach(config), Detach()\n- Uniform Table interface with Get/Set/Delete/Fetch\n- Entity types (Crumb, Trail, Property, etc.) with methods for state transitions\n- Remove table-specific interfaces (CrumbTable, TrailTable, etc.)\n\nThis epic ensures all documentation is aligned with the new ORM design before implementation begins.","status":"tombstone","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:24.142164-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:13:11.556126-05:00","deleted_at":"2026-02-04T20:13:11.556126-05:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"crumbs-xzo","title":"Create SPECIFICATIONS.md","description":"## Required Reading\n- .claude/rules/specification-format.md (target format)\n- .claude/rules/documentation-standards.md (writing style, PlantUML format)\n- docs/VISION.md\n- docs/ARCHITECTURE.md\n- docs/road-map.yaml\n- All files in docs/product-requirements/\n- All files in docs/use-cases/\n- All files in docs/test-suites/\n\n## Files to Create\n- docs/SPECIFICATIONS.md\n\n## Requirements (per specification-format rule)\n- Overview: 1-2 paragraphs referencing VISION.md and ARCHITECTURE.md\n- Roadmap Summary: table covering all 6 releases from road-map.yaml with status and use case counts\n- PRD Index: table listing all 9 PRDs with links, titles, and one-sentence summaries\n- Use Case Index: table listing all 14 use cases with release, status, and test suite links\n- Test Suite Index: table listing all 5 test suites with traces and test case counts\n- Traceability Diagram: PlantUML component diagram showing PRD-to-use-case and use-case-to-test-suite relationships\n- Coverage Gaps: list use cases without test suites, PRDs not referenced by any use case\n- Read all source files to build tables from live data; do not hardcode\n- Use relative paths from docs/ for all links\n- Name all tables per documentation-standards\n\n## Design Decisions\n- Use cases may still be .md at time of execution; index whatever format exists\n- SPECIFICATIONS.md should be regenerated after the conversion epic (crumbs-c0p) and test suite epic (crumbs-do8) complete\n\n## Acceptance Criteria\n- [ ] SPECIFICATIONS.md passes the specification-format completeness checklist\n- [ ] Roadmap Summary covers all 6 releases\n- [ ] PRD Index lists all PRDs in docs/product-requirements/\n- [ ] Use Case Index lists all use cases in docs/use-cases/ with correct status\n- [ ] Test Suite Index lists all test suites in docs/test-suites/\n- [ ] Traceability Diagram is valid PlantUML per documentation-standards\n- [ ] Coverage Gaps identifies use cases without dedicated test suites\n- [ ] File saved as docs/SPECIFICATIONS.md","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-07T12:30:42.912081-05:00","created_by":"petardjukic","updated_at":"2026-02-07T12:52:04.533311-05:00","closed_at":"2026-02-07T12:52:04.533311-05:00","close_reason":"Closed","labels":["documentation"]}
{"id":"crumbs-y6u","title":"Update PRDs for ORM Pattern","description":"Update all product requirement documents to reflect the ORM pattern design:\n- Cupboard interface with GetTable(name), Attach(config), Detach()\n- Uniform Table interface with Get/Set/Delete/Fetch\n- Entity types (Crumb, Trail, Property, etc.) with methods for state transitions\n- Remove table-specific interfaces (CrumbTable, TrailTable, etc.)\n\nThis epic ensures all documentation is aligned with the new ORM design before implementation begins.","status":"closed","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:04:39.672073-05:00","created_by":"petardjukic","updated_at":"2026-02-04T21:49:49.267414-05:00","closed_at":"2026-02-04T21:49:49.267414-05:00","close_reason":"Closed"}
{"id":"crumbs-y6u.1","title":"Update prd-cupboard-core.md for ORM pattern","description":"## Required Reading\n- docs/ARCHITECTURE.md (current design)\n- docs/product-requirements/prd-cupboard-core.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-cupboard-core.md (update)\n\n## Requirements\nUpdate prd-cupboard-core.md to reflect the ORM pattern:\n1. Cupboard interface with GetTable(name), Attach(config), Detach()\n2. Uniform Table interface with Get(id), Set(id, data), Delete(id), Fetch(filter)\n3. Remove table-specific interfaces (CrumbTable, TrailTable, etc.)\n4. Update Config struct (keep typed struct per user preference 4B)\n5. Update OpenCupboard → Attach/Detach pattern\n6. Define standard table names: \"crumbs\", \"trails\", \"properties\", \"metadata\", \"links\", \"stashes\"\n\n## Design Decisions\n- Cupboard.GetTable(name) returns uniform Table interface\n- Table.Get returns entity objects (any type)\n- Table.Set accepts entity objects for persistence\n- Config remains a typed struct for compile-time validation\n- Attach/Detach methods replace OpenCupboard function\n\n## Acceptance Criteria\n- [ ] Cupboard interface defined with GetTable, Attach, Detach\n- [ ] Table interface defined with Get, Set, Delete, Fetch\n- [ ] Config struct updated with Backend, DataDir, backend-specific configs\n- [ ] Standard table names documented\n- [ ] All required PRD sections present (Problem, Goals, Requirements, Non-Goals, Acceptance Criteria)\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:14.754092-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:15:05.517195-05:00","closed_at":"2026-02-04T20:15:05.517195-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.1","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:14.755819-05:00","created_by":"petardjukic"}],"comments":[{"id":14,"issue_id":"crumbs-y6u.1","author":"petardjukic","text":"tokens: 15320, doc_changes: +94-113 lines (prd-cupboard-core.md updated for ORM pattern)","created_at":"2026-02-05T01:15:05Z"}]}
{"id":"crumbs-y6u.2","title":"Update prd-crumbs-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-crumbs-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-crumbs-interface.md (update)\n\n## Requirements\nUpdate prd-crumbs-interface.md to define Crumb entity and methods:\n1. Crumb struct with fields: CrumbID, Name, State, CreatedAt, UpdatedAt, Properties (map)\n2. Entity methods: SetState(state), Complete(), Archive(), Fail()\n3. Property methods: SetProperty(name, value), GetProperty(name), ClearProperty(name)\n4. Remove table-level operations (they move to uniform Table interface)\n5. Define state transitions and validation rules\n\n## Design Decisions\n- Crumb is a plain struct with methods (not active record)\n- State transitions via entity methods (SetState, Complete, Archive, Fail)\n- Properties stored as map[string]any on Crumb struct\n- Methods update struct fields; caller must save via Table.Set\n\n## Acceptance Criteria\n- [ ] Crumb struct defined with all required fields\n- [ ] State transition methods defined\n- [ ] Property methods defined\n- [ ] State validation rules documented\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:25.67095-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:18:26.393691-05:00","closed_at":"2026-02-04T20:18:26.393691-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.2","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:25.672223-05:00","created_by":"petardjukic"}],"comments":[{"id":15,"issue_id":"crumbs-y6u.2","author":"petardjukic","text":"tokens: 23016, loc: 213+186","created_at":"2026-02-05T01:18:23Z"}]}
{"id":"crumbs-y6u.3","title":"Update prd-trails-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-trails-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-trails-interface.md (update)\n\n## Requirements\nUpdate prd-trails-interface.md to define Trail entity and methods:\n1. Trail struct with fields: TrailID, ParentCrumbID, State, CreatedAt, CompletedAt\n2. Entity methods: Complete(), Abandon()\n3. Crumb association: AddCrumb(crumbID), RemoveCrumb(crumbID), GetCrumbs()\n4. Define trail states and lifecycle\n5. Remove table-level operations\n\n## Design Decisions\n- Trail is a plain struct with methods\n- Complete/Abandon update state field\n- Crumb associations managed via methods\n- GetCrumbs queries the links table\n\n## Acceptance Criteria\n- [ ] Trail struct defined with all required fields\n- [ ] Complete and Abandon methods defined\n- [ ] Crumb association methods defined\n- [ ] Trail lifecycle documented\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:30.311391-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:23:52.584319-05:00","closed_at":"2026-02-04T20:23:52.584319-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.3","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:30.313987-05:00","created_by":"petardjukic"}],"comments":[{"id":16,"issue_id":"crumbs-y6u.3","author":"petardjukic","text":"tokens: 19533, lines: 87 modified","created_at":"2026-02-05T01:23:52Z"}]}
{"id":"crumbs-y6u.4","title":"Update prd-properties-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-properties-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-properties-interface.md (update)\n\n## Requirements\nUpdate prd-properties-interface.md to define Property and Category entities:\n1. Property struct: PropertyID, Name, ValueType, Description, CreatedAt\n2. Category struct: CategoryID, PropertyID, Name, Ordinal\n3. Entity methods for property operations: DefineCategory(name, ordinal)\n4. Built-in properties seeding (priority, type, description, owner, labels, dependencies)\n5. Remove table-level operations\n\n## Design Decisions\n- Property and Category are plain structs\n- DefineCategory creates Category and saves via Table.Set\n- Built-in properties seeded on first startup\n- Type-based defaults enforcement remains\n\n## Acceptance Criteria\n- [ ] Property struct defined\n- [ ] Category struct defined\n- [ ] DefineCategory method defined\n- [ ] Built-in properties specified\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:35.498784-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:28:31.013373-05:00","closed_at":"2026-02-04T20:28:31.013373-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.4","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:35.499941-05:00","created_by":"petardjukic"}],"comments":[{"id":17,"issue_id":"crumbs-y6u.4","author":"petardjukic","text":"tokens: 35000","created_at":"2026-02-05T01:28:30Z"}]}
{"id":"crumbs-y6u.5","title":"Update prd-metadata-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-metadata-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-metadata-interface.md (update)\n\n## Requirements\nUpdate prd-metadata-interface.md to define Metadata entity:\n1. Metadata struct: MetadataID, CrumbID, TableName, Content, PropertyID, CreatedAt\n2. Schema registration for extensible metadata tables (comments, attachments, logs)\n3. Remove table-level operations (use uniform Table interface)\n4. Define how metadata is queried and filtered\n\n## Design Decisions\n- Metadata is a plain struct\n- Schema registration defines metadata table structures\n- Uniform Table interface handles metadata CRUD\n\n## Acceptance Criteria\n- [ ] Metadata struct defined\n- [ ] Schema registration approach documented\n- [ ] Query and filter patterns documented\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:39.981939-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:34:21.195457-05:00","closed_at":"2026-02-04T20:34:21.195457-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.5","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:39.985173-05:00","created_by":"petardjukic"}],"comments":[{"id":18,"issue_id":"crumbs-y6u.5","author":"petardjukic","text":"tokens: 25000","created_at":"2026-02-05T01:34:20Z"}]}
{"id":"crumbs-y6u.6","title":"Update prd-stash-interface.md for entity pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-stash-interface.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-stash-interface.md (update)\n\n## Requirements\nUpdate prd-stash-interface.md to define Stash entity and methods:\n1. Stash struct: StashID, TrailID, Name, StashType, Value, Version, CreatedAt\n2. Entity methods: SetValue(value), GetValue(), Increment(delta), Acquire(holder), Release(holder)\n3. History operations: GetHistory(), GetValueAtVersion(version)\n4. Stash types: resource, artifact, context, counter, lock\n5. Remove table-level operations\n\n## Design Decisions\n- Stash is a plain struct with methods\n- Versioning and history maintained by backend\n- Lock operations (Acquire/Release) use special stash type\n- Counter operations use Increment method\n\n## Acceptance Criteria\n- [ ] Stash struct defined\n- [ ] All stash types documented\n- [ ] Entity methods defined (SetValue, Increment, Acquire, Release, etc.)\n- [ ] History operations defined\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:45.467734-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:42:49.678621-05:00","closed_at":"2026-02-04T20:42:49.678621-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.6","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:45.469251-05:00","created_by":"petardjukic"}],"comments":[{"id":19,"issue_id":"crumbs-y6u.6","author":"petardjukic","text":"tokens: estimated 15000","created_at":"2026-02-05T01:42:49Z"}]}
{"id":"crumbs-y6u.7","title":"Update prd-sqlite-backend.md for ORM pattern","description":"## Required Reading\n- docs/product-requirements/prd-cupboard-core.md (updated Cupboard and Table interfaces)\n- docs/product-requirements/prd-sqlite-backend.md (current PRD)\n- .claude/rules/prd-format.md (PRD format rule)\n\n## Files to Create/Modify\n- docs/product-requirements/prd-sqlite-backend.md (update)\n\n## Requirements\nUpdate prd-sqlite-backend.md to describe ORM implementation:\n1. How backend implements uniform Table interface\n2. Entity hydration: table rows → entity objects (Crumb, Trail, etc.)\n3. Entity persistence: entity objects → table rows\n4. JSON ↔ SQLite synchronization\n5. Graph model for links table\n6. Table name routing (GetTable(\"crumbs\") → crumbs table)\n\n## Design Decisions\n- SQLite backend implements Cupboard interface\n- Each table name maps to SQLite table and entity type\n- Entity hydration uses reflection or manual mapping\n- JSON files remain source of truth\n- SQLite is query cache\n\n## Acceptance Criteria\n- [ ] Table interface implementation described\n- [ ] Entity hydration pattern documented\n- [ ] Entity persistence pattern documented\n- [ ] JSON ↔ SQLite sync updated\n- [ ] Table name routing documented\n- [ ] All required PRD sections present\n- [ ] File follows prd-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:51.34812-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:46:47.476888-05:00","closed_at":"2026-02-04T20:46:47.476888-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.7","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:51.349651-05:00","created_by":"petardjukic"}],"comments":[{"id":20,"issue_id":"crumbs-y6u.7","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T01:46:46Z"}]}
{"id":"crumbs-y6u.8","title":"Update ARCHITECTURE.md for ORM pattern","description":"## Required Reading\n- docs/ARCHITECTURE.md (current architecture)\n- docs/product-requirements/prd-cupboard-core.md (updated PRD)\n- .claude/rules/architecture-format.md (architecture format rule)\n\n## Files to Create/Modify\n- docs/ARCHITECTURE.md (update)\n\n## Requirements\nUpdate ARCHITECTURE.md to reflect ORM pattern:\n1. Update System Overview with ORM pattern description\n2. Update Main Interface section with Cupboard.GetTable and Table interface\n3. Update interface examples to show entity objects and methods\n4. Update Design Decisions to include ORM rationale\n5. Update usage patterns throughout\n\n## Design Decisions\n- Document why ORM pattern was chosen\n- Explain entity objects vs active record\n- Clarify table interface uniformity benefits\n\n## Acceptance Criteria\n- [ ] System Overview updated\n- [ ] Main Interface section updated with new interfaces\n- [ ] Usage examples show ORM pattern\n- [ ] Design Decisions include ORM rationale\n- [ ] All required architecture sections present\n- [ ] File follows architecture-format rule","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-04T20:05:56.229493-05:00","created_by":"petardjukic","updated_at":"2026-02-04T20:58:38.087207-05:00","closed_at":"2026-02-04T20:58:38.087207-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-y6u.8","depends_on_id":"crumbs-y6u","type":"parent-child","created_at":"2026-02-04T20:05:56.232186-05:00","created_by":"petardjukic"}],"comments":[{"id":25,"issue_id":"crumbs-y6u.8","author":"petardjukic","text":"tokens: 15000","created_at":"2026-02-05T01:58:37Z"}]}
{"id":"crumbs-yqk","title":"Implement CLI crumb subcommands","description":"## Required Reading\n- docs/ARCHITECTURE.md § System Components (CLI section)\n- docs/product-requirements/prd-cupboard-core.md (Table interface)\n- docs/product-requirements/prd-crumbs-interface.md (Crumb entity)\n- pkg/types/cupboard.go, pkg/types/table.go, pkg/types/crumb.go\n\n## Files to Create/Modify\n- cmd/cupboard/crumb.go (create) - crumb subcommand group\n- cmd/cupboard/crumb_add.go (create) - `crumb add` command\n- cmd/cupboard/crumb_get.go (create) - `crumb get \u003cid\u003e` command\n- cmd/cupboard/crumb_list.go (create) - `crumb list` command\n- cmd/cupboard/crumb_delete.go (create) - `crumb delete \u003cid\u003e` command\n\n## Requirements\n- Add `crumb` subcommand to CLI with add/get/list/delete operations\n- Use Cupboard.GetTable(\"crumbs\") and Table interface (Get, Set, Delete, Fetch)\n- `crumb add --name \"task name\"` creates a new crumb, prints ID\n- `crumb get \u003cid\u003e` retrieves and prints crumb details\n- `crumb list` fetches all crumbs, prints as table\n- `crumb delete \u003cid\u003e` deletes a crumb\n\n## Design Decisions\n- Use cobra for command structure\n- Output as human-readable table; add --json flag for JSON output\n- Exit with non-zero status on errors\n\n## Acceptance Criteria\n- [ ] `crumb add --name \"test\"` creates crumb and prints ID\n- [ ] `crumb get \u003cid\u003e` prints crumb details\n- [ ] `crumb list` shows all crumbs\n- [ ] `crumb delete \u003cid\u003e` removes crumb\n- [ ] --json flag outputs JSON for all commands\n- [ ] Non-zero exit on errors","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T11:10:26.211926-05:00","created_by":"petardjukic","updated_at":"2026-02-05T11:27:40.079902-05:00","closed_at":"2026-02-05T11:27:40.079902-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-yqk","depends_on_id":"crumbs-uoz","type":"parent-child","created_at":"2026-02-05T11:13:25.743219-05:00","created_by":"petardjukic"}]}
{"id":"crumbs-z96","title":"Add integration tests for SQLite backend","description":"## Required Reading\n- docs/product-requirements/prd-sqlite-backend.md (backend requirements)\n- docs/product-requirements/prd-cupboard-core.md (Cupboard interface)\n- docs/ARCHITECTURE.md § System Components (SQLite Backend)\n- internal/sqlite/backend.go, internal/sqlite/table.go\n- internal/sqlite/json.go (JSON persistence)\n\n## Files to Create/Modify\n- internal/sqlite/backend_integration_test.go (create) - integration tests\n- internal/sqlite/json_integration_test.go (create) - JSON persistence tests\n\n## Requirements\n- Test full flow for each entity type: Crumb, Trail, Property, Stash, Metadata, Link\n- For each entity: Attach → GetTable → Set (create) → Get → Set (update) → Fetch → Delete\n- Verify JSON persistence: after Set, JSON file contains entity; after restart, data loads\n- Test error cases: Get non-existent ID, Delete non-existent ID, operations after Detach\n\n## Design Decisions\n- Use temp directories for test isolation\n- Each test creates fresh cupboard instance\n- Test JSON files are human-readable and match expected schema\n\n## Acceptance Criteria\n- [ ] Integration test for Crumb CRUD with JSON verification\n- [ ] Integration test for Trail CRUD with JSON verification\n- [ ] Integration test for Property CRUD with JSON verification\n- [ ] Integration test for Stash CRUD with JSON verification\n- [ ] Test Attach/Detach lifecycle\n- [ ] Test error cases return correct errors\n- [ ] Tests pass with `go test ./internal/sqlite/...`","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-05T11:10:54.585171-05:00","created_by":"petardjukic","updated_at":"2026-02-05T11:54:29.63181-05:00","closed_at":"2026-02-05T11:54:29.63181-05:00","close_reason":"Closed","dependencies":[{"issue_id":"crumbs-z96","depends_on_id":"crumbs-uoz","type":"parent-child","created_at":"2026-02-05T11:13:26.195309-05:00","created_by":"petardjukic"}]}
