# Make Work

Read VISION.md, ARCHITECTURE.md, road-map.yaml, docs/specs/product-requirements/, docs/specs/use-cases/, docs/specs/test-suites/, and docs/engineering/ if they exist.

## Existing Work

The following issues already exist in the system:

```json
{{.ExistingIssues}}
```

Review what's in progress, what's completed, and what's pending.

## Instructions

Summarize:

1. What problem this project solves
2. The high-level architecture (major components and how they fit together)
3. The current state of implementation (what's done, what's in progress)
4. **Current release**: Which release we are working on and which use cases remain (check road-map.yaml)
5. Current repo size: run `mage stats` and include its output (Go production/test LOC, doc words)

Based on this, propose next steps using **release priority**:

1. **Focus on earliest incomplete release**: Prioritize completing use cases from the current release in road-map.yaml
2. **Early preview allowed**: Later use cases can be partially implemented if they share functionality with the current release
3. **Assign issues to releases**: Each issue should map to a use case in road-map.yaml; if uncertain, use release 99.0 (unscheduled)
4. If epics exist: suggest new issues to add to existing epics, or identify what to work on next
5. If no epics exist: suggest epics to create and initial issues for each
6. Identify dependencies - what should be built first and why?

When proposing issues (per crumb-format rule):

1. **Type**: Say whether each issue is **documentation** (markdown in `docs/`) or **code** (implementation).
2. **Required Reading**: List files the agent must read before starting (PRDs, ARCHITECTURE sections, existing code). This is mandatory for all issues.
3. **Files to Create/Modify**: Explicit list of files the issue will produce or change. For docs: output path. For code: packages/files to create or edit.
4. **Structure** (all issues): Requirements, Design Decisions (optional), Acceptance Criteria.
5. **Documentation issues**: Add **format rule** reference and **required sections** (PRD: Problem, Goals, Requirements, Non-Goals, Acceptance Criteria; use case: Summary, Actor/trigger, Flow, Success criteria).
6. **Code issues**: Requirements, Design Decisions, Acceptance Criteria (tests/behavior); no PRD-style Problem/Goals/Non-Goals.

**Code task sizing**: Target 300-700 lines of production code per task, touching no more than 5 files. This keeps tasks completable in a single session while being substantial enough to make meaningful progress. Split larger features into multiple tasks; combine trivial changes into one task.

**Task limit**: Create no more than {{.Limit}} tasks. If more work is needed, create additional tasks in a future session.

## Output

After analyzing the project and proposing work, create issues directly using the bd CLI.

Create each task:

    bd create --type task "Title" --description "Full description with Required Reading, Files to Create/Modify, Requirements, Design Decisions, Acceptance Criteria"

Create an epic (only when grouping multiple related tasks):

    bd create --type epic "Title" --description "Epic description" --json

To add a task under an epic, use the ID returned from creating the epic:

    bd create --type task "Title" --description "Description" --parent EPIC_ID

**Epics are optional.** Only create a new epic if there is a clear need for grouping multiple related tasks. Most of the time, standalone tasks are sufficient.

After creating all issues, run:

    bd sync
{{- if .UserInput}}

## Additional Context from User

{{.UserInput}}
{{- end}}
{{- if .AppendContent}}

## Appended Instructions

{{.AppendContent}}
{{- end}}
