# Crumbs Roadmap
#
# Each release delivers use cases that validate specific functionality.
# Complete releases in order, prioritizing the earliest incomplete release.
# Read together with VISION.md and ARCHITECTURE.md.

prioritization_rules:
  - Complete releases in order (finish N before starting N+1)
  - Minor releases (X.1, X.2) validate completed releases
  - Unscheduled (99.0) only when all scheduled releases complete

updating_rules:
  - Update use case status when completed
  - Assign new use cases to existing release if scope fits
  - Create minor release (e.g., 01.1) for additions to completed release
  - Add to 99.0 if not yet scheduled

releases:
  - version: "01.0"
    name: Core Storage with SQLite Backend
    description: Implement the Cupboard and Table interfaces with SQLite backend. Validates core concepts and provides a working system for local use.
    done_when: All five use cases pass. An agent can create, query, and manage crumbs via the Table interface.
    deliverables:
      - Cupboard interface with Attach, Detach, GetTable
      - Table interface with Get, Set, Delete, Fetch
      - Crumb entity with state transitions
      - SQLite backend with JSON persistence
      - Basic CLI commands
    use_cases:
      - id: rel01.0-uc001-cupboard-lifecycle
        summary: Config, attach, detach, error handling
        status: done
      - id: rel01.0-uc002-table-crud
        summary: "Table interface CRUD: Set, Get, Fetch, Delete across entity types with JSONL persistence"
        status: done
      - id: rel01.0-uc003-crumb-lifecycle
        summary: "Crumb entity: state machine (draftâ†’pebble/dust), SetState, Pebble, Dust, state-based filtering"
        status: done
      - id: rel01.0-uc004-scaffolding-validation
        summary: Types, interfaces, and CLI compile; version command works; all tables accessible
        status: not_started
      - id: rel01.0-uc005-crumbs-table-benchmarks
        summary: Benchmark crumbs Table operations (Get, Set, Delete, Fetch) at various scales
        status: not_started

  - version: "01.1"
    name: Post-Core Validation
    description: Validate the core storage layer with installation, persistence, and round-trip scenarios. Requires only rel01.0 features.
    done_when: cupboard installs via go install, JSONL files survive database deletion, config loading and generic table CLI validated.
    use_cases:
      - id: rel01.1-uc001-go-install
        summary: Install cupboard CLI via go install
        status: not_started
      - id: rel01.1-uc002-jsonl-git-roundtrip
        summary: JSONL persistence survives database deletion
        status: not_started
      - id: rel01.1-uc003-configuration-loading
        summary: "Config loading pipeline: platform defaults, env overrides, flag overrides, config.yaml lifecycle"
        status: done
      - id: rel01.1-uc004-generic-table-cli
        summary: "Generic table CLI commands: get, set, list, delete across table types"
        status: done
      - id: rel01.1-uc005-flat-self-hosting
        summary: "Self-hosting with flat crumbs only: no properties, no trails, no epics"
        status: done

  - version: "02.0"
    name: Properties with Enforcement
    description: Implement the property system with automatic initialization and backfill. Enables extensibility without schema changes.
    done_when: Every crumb always has a value for every defined property. No gaps, no partial state.
    deliverables:
      - Property and Category entities
      - Property and Category access via Table interface (Get, Set, Fetch)
      - "Crumb property methods: SetProperty, GetProperty, ClearProperty"
      - Built-in property seeding (priority, type, description, owner, labels, dependencies)
      - "Property enforcement: auto-initialization on crumb creation, backfill on property definition"
    use_cases:
      - id: rel02.0-uc001-property-enforcement
        summary: Define properties, auto-init, backfill
        status: not_started
      - id: rel02.0-uc002-regeneration-compatibility
        summary: New generation reads and operates on previous generation's JSONL data
        status: not_started

  - version: "02.1"
    name: Issue-Tracking and Self-Hosting
    description: Validate cupboard as an issue tracker with CLI commands, benchmarks, and self-hosting. Requires properties (rel02.0) for type, priority, and labels.
    done_when: The crumbs system can track crumbs development work, replacing beads for this repository.
    use_cases:
      - id: rel02.1-uc001-issue-tracking-cli
        summary: Issue-tracking CLI commands for scripts
        status: not_started
      - id: rel02.1-uc002-table-benchmarks
        summary: Benchmark Table operations at scale
        status: not_started
      - id: rel02.1-uc003-self-hosting
        summary: Crumbs tracks its own development
        status: not_started
      - id: rel02.1-uc004-metadata-lifecycle
        summary: "Metadata CRUD: comments, attachments, filtering, cascade delete"
        status: not_started

  - version: "03.0"
    name: Trails and Stashes
    description: Implement trail lifecycle for exploratory workflows and stash for shared state coordination.
    done_when: An agent can explore implementation approaches with trails, abandoning failed attempts and completing successful ones.
    deliverables:
      - "Trail entity with lifecycle methods: Complete, Abandon"
      - "Stash entity with methods: SetValue, GetValue, Increment, Acquire, Release, GetHistory"
      - Trail filtering in Fetch
      - Atomic cleanup on trail abandonment
    use_cases:
      - id: rel03.0-uc001-trail-exploration
        summary: Create trails, add crumbs, complete/abandon
        status: not_started
      - id: rel03.0-uc002-link-management
        summary: "Link CRUD: belongs_to, child_of, branches_from, scoped_to with graph queries"
        status: not_started
      - id: rel03.0-uc003-stash-operations
        summary: "Stash system: value ops, counters, locks, versioning, history"
        status: not_started
      - id: rel03.0-uc004-trail-crumb-lifecycle
        summary: "Trail-crumb lifecycle: container semantics, completion makes permanent, abandon cascades deletion"
        status: not_started

  - version: "03.1"
    name: Post-Trails Validation
    description: Validate trails functionality with self-hosting scenarios. Uses trails as epic equivalents to group and control related tasks.
    done_when: Self-hosting with trail-based epics works end-to-end. Agents can create trails as epics, add crumbs as tasks, and use trail lifecycle to finalize or discard grouped work.
    use_cases:
      - id: rel03.1-uc001-self-hosting-with-epics
        summary: "Self-hosting with trails as epics: group tasks, belongs_to links, complete/abandon lifecycle"
        status: not_started

  - version: "99.0"
    name: Unscheduled
    description: Use cases not yet assigned to a release. These will be scheduled as the roadmap evolves.
    use_cases:
      - id: rel99.0-uc001-blazes-templates
        summary: Workflow templates for common patterns
        status: not_started
      - id: rel99.0-uc002-docker-bootstrap
        summary: Build crumbs from docs alone in Docker
        status: not_started
